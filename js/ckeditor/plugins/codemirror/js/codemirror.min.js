(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{(this||window).CodeMirror=a()}}})(function(){var d1=navigator.userAgent;var ec=navigator.platform;var cn=/gecko\/\d/i.test(d1);var eO=/MSIE \d/.test(d1);var bI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(d1);var dK=eO||bI;var k=dK&&(eO?document.documentMode||6:bI[1]);var cZ=/WebKit\//.test(d1);var dN=cZ&&/Qt\/\d+\.\d+/.test(d1);var dc=/Chrome\//.test(d1);var d4=/Opera\//.test(d1);var aB=/Apple Computer/.test(navigator.vendor);var c6=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(d1);var fz=/PhantomJS/.test(d1);var e5=/AppleWebKit/.test(d1)&&/Mobile\/\w+/.test(d1);var ei=e5||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(d1);var b6=e5||/Mac/.test(ec);var fO=/\bCrOS\b/.test(d1);var aO=/win/i.test(ec);var aY=d4&&d1.match(/Version\/(\d*\.\d*)/);if(aY){aY=Number(aY[1])}if(aY&&aY>=15){d4=false;cZ=true}var bP=b6&&(dN||d4&&(aY==null||aY<12.11));var gg=cn||(dK&&k>=9);var gj=false,a6=false;function H(gr,gt){if(!(this instanceof H)){return new H(gr,gt)}this.options=gt=gt?aM(gt):{};aM(e7,gt,false);cd(gt);var gx=gt.value;if(typeof gx=="string"){gx=new ar(gx,gt.mode,null,gt.lineSeparator)}this.doc=gx;var gs=new H.inputStyles[gt.inputStyle](this);var gw=this.display=new eL(gr,gx,gs);gw.wrapper.CodeMirror=this;ee(this);cN(this);if(gt.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(gt.autofocus&&!ei){gw.input.focus()}aC(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new gp(),keySeq:null,specialChars:null};var gq=this;if(dK&&k<11){setTimeout(function(){gq.display.input.reset(true)},20)}fW(this);bi();cH(this);this.curOp.forceUpdate=true;ed(this,gx);if((gt.autofocus&&!ei)||gq.hasFocus()){setTimeout(cu(cA,this),20)}else{aU(this)}for(var gv in be){if(be.hasOwnProperty(gv)){be[gv](this,gt[gv],cb)}}d6(this);if(gt.finishInit){gt.finishInit(this)}for(var gu=0;gu<a7.length;++gu){a7[gu](this)}al(this);if(cZ&&gt.lineWrapping&&getComputedStyle(gw.lineDiv).textRendering=="optimizelegibility"){gw.lineDiv.style.textRendering="auto"}}function eL(gq,gs,gr){var gt=this;this.input=gr;gt.scrollbarFiller=f9("div",null,"CodeMirror-scrollbar-filler");gt.scrollbarFiller.setAttribute("cm-not-content","true");gt.gutterFiller=f9("div",null,"CodeMirror-gutter-filler");gt.gutterFiller.setAttribute("cm-not-content","true");gt.lineDiv=f9("div",null,"CodeMirror-code");gt.selectionDiv=f9("div",null,null,"position: relative; z-index: 1");gt.cursorDiv=f9("div",null,"CodeMirror-cursors");gt.measure=f9("div",null,"CodeMirror-measure");gt.lineMeasure=f9("div",null,"CodeMirror-measure");gt.lineSpace=f9("div",[gt.measure,gt.lineMeasure,gt.selectionDiv,gt.cursorDiv,gt.lineDiv],null,"position: relative; outline: none");gt.mover=f9("div",[f9("div",[gt.lineSpace],"CodeMirror-lines")],null,"position: relative");gt.sizer=f9("div",[gt.mover],"CodeMirror-sizer");gt.sizerWidth=null;gt.heightForcer=f9("div",null,null,"position: absolute; height: "+dJ+"px; width: 1px;");gt.gutters=f9("div",null,"CodeMirror-gutters");gt.lineGutter=null;gt.scroller=f9("div",[gt.sizer,gt.heightForcer,gt.gutters],"CodeMirror-scroll");gt.scroller.setAttribute("tabIndex","-1");gt.wrapper=f9("div",[gt.scrollbarFiller,gt.gutterFiller,gt.scroller],"CodeMirror");if(dK&&k<8){gt.gutters.style.zIndex=-1;gt.scroller.style.paddingRight=0}if(!cZ&&!(cn&&ei)){gt.scroller.draggable=true}if(gq){if(gq.appendChild){gq.appendChild(gt.wrapper)}else{gq(gt.wrapper)}}gt.viewFrom=gt.viewTo=gs.first;gt.reportedViewFrom=gt.reportedViewTo=gs.first;gt.view=[];gt.renderedView=null;gt.externalMeasured=null;gt.viewOffset=0;gt.lastWrapHeight=gt.lastWrapWidth=0;gt.updateLineNumbers=null;gt.nativeBarWidth=gt.barHeight=gt.barWidth=0;gt.scrollbarsClipped=false;gt.lineNumWidth=gt.lineNumInnerWidth=gt.lineNumChars=null;gt.alignWidgets=false;gt.cachedCharWidth=gt.cachedTextHeight=gt.cachedPaddingH=null;gt.maxLine=null;gt.maxLineLength=0;gt.maxLineChanged=false;gt.wheelDX=gt.wheelDY=gt.wheelStartX=gt.wheelStartY=null;gt.shift=false;gt.selForContextMenu=null;gt.activeTouch=null;gr.init(gt)}function bq(gq){gq.doc.mode=H.getMode(gq.options,gq.doc.modeOption);eo(gq)}function eo(gq){gq.doc.iter(function(gr){if(gr.stateAfter){gr.stateAfter=null}if(gr.styles){gr.styles=null}});gq.doc.frontier=gq.doc.first;eh(gq,100);gq.state.modeGen++;if(gq.curOp){ah(gq)}}function eJ(gq){if(gq.options.lineWrapping){fF(gq.display.wrapper,"CodeMirror-wrap");gq.display.sizer.style.minWidth="";gq.display.sizerWidth=null}else{f(gq.display.wrapper,"CodeMirror-wrap");h(gq)}X(gq);ah(gq);aj(gq);setTimeout(function(){e2(gq)},100)}function bd(gq){var gs=aX(gq.display),gr=gq.options.lineWrapping;var gt=gr&&Math.max(5,gq.display.scroller.clientWidth/dD(gq.display)-3);return function(gv){if(fB(gq.doc,gv)){return 0}var gu=0;if(gv.widgets){for(var gw=0;gw<gv.widgets.length;gw++){if(gv.widgets[gw].height){gu+=gv.widgets[gw].height}}}if(gr){return gu+(Math.ceil(gv.text.length/gt)||1)*gs}else{return gu+gs}}}function X(gq){var gs=gq.doc,gr=bd(gq);gs.iter(function(gt){var gu=gr(gt);if(gu!=gt.height){gc(gt,gu)}})}function cN(gq){gq.display.wrapper.className=gq.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+gq.options.theme.replace(/(^|\s)\s*/g," cm-s-");aj(gq)}function dw(gq){ee(gq);ah(gq);setTimeout(function(){eH(gq)},20)}function ee(gq){var gr=gq.display.gutters,gv=gq.options.gutters;d2(gr);for(var gs=0;gs<gv.length;++gs){var gt=gv[gs];var gu=gr.appendChild(f9("div",null,"CodeMirror-gutter "+gt));if(gt=="CodeMirror-linenumbers"){gq.display.lineGutter=gu;gu.style.width=(gq.display.lineNumWidth||1)+"px"}}gr.style.display=gs?"":"none";c3(gq)}function c3(gq){var gr=gq.display.gutters.offsetWidth;gq.display.sizer.style.marginLeft=gr+"px"}function eq(gs){if(gs.height==0){return 0}var gr=gs.text.length,gq,gu=gs;while(gq=eS(gu)){var gt=gq.find(0,true);gu=gt.from.line;gr+=gt.from.ch-gt.to.ch}gu=gs;while(gq=ex(gu)){var gt=gq.find(0,true);gr-=gu.text.length-gt.from.ch;gu=gt.to.line;gr+=gu.text.length-gt.to.ch}return gr}function h(gq){var gs=gq.display,gr=gq.doc;gs.maxLine=fk(gr,gr.first);gs.maxLineLength=eq(gs.maxLine);gs.maxLineChanged=true;gr.iter(function(gu){var gt=eq(gu);if(gt>gs.maxLineLength){gs.maxLineLength=gt;gs.maxLine=gu}})}function cd(gq){var gr=dh(gq.gutters,"CodeMirror-linenumbers");if(gr==-1&&gq.lineNumbers){gq.gutters=gq.gutters.concat(["CodeMirror-linenumbers"])}else{if(gr>-1&&!gq.lineNumbers){gq.gutters=gq.gutters.slice(0);gq.gutters.splice(gr,1)}}}function dA(gq){var gt=gq.display,gs=gt.gutters.offsetWidth;var gr=Math.round(gq.doc.height+bH(gq.display));return{clientHeight:gt.scroller.clientHeight,viewHeight:gt.wrapper.clientHeight,scrollWidth:gt.scroller.scrollWidth,clientWidth:gt.scroller.clientWidth,viewWidth:gt.wrapper.clientWidth,barLeft:gq.options.fixedGutter?gs:0,docHeight:gr,scrollHeight:gr+cS(gq)+gt.barHeight,nativeBarWidth:gt.nativeBarWidth,gutterWidth:gs}}function dk(gs,gr,gq){this.cm=gq;var gt=this.vert=f9("div",[f9("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gu=this.horiz=f9("div",[f9("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gs(gt);gs(gu);bW(gt,"scroll",function(){if(gt.clientHeight){gr(gt.scrollTop,"vertical")}});bW(gu,"scroll",function(){if(gu.clientWidth){gr(gu.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(dK&&k<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}dk.prototype=aM({update:function(gt){var gu=gt.scrollWidth>gt.clientWidth+1;var gs=gt.scrollHeight>gt.clientHeight+1;var gv=gt.nativeBarWidth;if(gs){this.vert.style.display="block";this.vert.style.bottom=gu?gv+"px":"0";var gr=gt.viewHeight-(gu?gv:0);this.vert.firstChild.style.height=Math.max(0,gt.scrollHeight-gt.clientHeight+gr)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gu){this.horiz.style.display="block";this.horiz.style.right=gs?gv+"px":"0";this.horiz.style.left=gt.barLeft+"px";var gq=gt.viewWidth-gt.barLeft-(gs?gv:0);this.horiz.firstChild.style.width=(gt.scrollWidth-gt.clientWidth+gq)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&gt.clientHeight>0){if(gv==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:gs?gv:0,bottom:gu?gv:0}},setScrollLeft:function(gq){if(this.horiz.scrollLeft!=gq){this.horiz.scrollLeft=gq}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}},setScrollTop:function(gq){if(this.vert.scrollTop!=gq){this.vert.scrollTop=gq}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}},zeroWidthHack:function(){var gq=b6&&!c6?"12px":"18px";this.horiz.style.height=this.vert.style.width=gq;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gp;this.disableVert=new gp},enableZeroWidthBar:function(gr,gq){gr.style.pointerEvents="auto";function gs(){var gu=gr.getBoundingClientRect();var gt=document.elementFromPoint(gu.left+1,gu.bottom-1);if(gt!=gr){gr.style.pointerEvents="none"}else{gq.set(1000,gs)}}gq.set(1000,gs)},clear:function(){var gq=this.horiz.parentNode;gq.removeChild(this.horiz);gq.removeChild(this.vert)}},dk.prototype);function e8(){}e8.prototype=aM({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},e8.prototype);H.scrollbarModel={"native":dk,"null":e8};function aC(gq){if(gq.display.scrollbars){gq.display.scrollbars.clear();if(gq.display.scrollbars.addClass){f(gq.display.wrapper,gq.display.scrollbars.addClass)}}gq.display.scrollbars=new H.scrollbarModel[gq.options.scrollbarStyle](function(gr){gq.display.wrapper.insertBefore(gr,gq.display.scrollbarFiller);bW(gr,"mousedown",function(){if(gq.state.focused){setTimeout(function(){gq.display.input.focus()},0)}});gr.setAttribute("cm-not-content","true")},function(gs,gr){if(gr=="horizontal"){bD(gq,gs)}else{N(gq,gs)}},gq);if(gq.display.scrollbars.addClass){fF(gq.display.wrapper,gq.display.scrollbars.addClass)}}function e2(gs,gu){if(!gu){gu=dA(gs)}var gr=gs.display.barWidth,gq=gs.display.barHeight;aT(gs,gu);for(var gt=0;gt<4&&gr!=gs.display.barWidth||gq!=gs.display.barHeight;gt++){if(gr!=gs.display.barWidth&&gs.options.lineWrapping){a8(gs)}aT(gs,dA(gs));gr=gs.display.barWidth;gq=gs.display.barHeight}}function aT(gq,gr){var gt=gq.display;var gs=gt.scrollbars.update(gr);gt.sizer.style.paddingRight=(gt.barWidth=gs.right)+"px";gt.sizer.style.paddingBottom=(gt.barHeight=gs.bottom)+"px";gt.heightForcer.style.borderBottom=gs.bottom+"px solid transparent";if(gs.right&&gs.bottom){gt.scrollbarFiller.style.display="block";gt.scrollbarFiller.style.height=gs.bottom+"px";gt.scrollbarFiller.style.width=gs.right+"px"}else{gt.scrollbarFiller.style.display=""}if(gs.bottom&&gq.options.coverGutterNextToScrollbar&&gq.options.fixedGutter){gt.gutterFiller.style.display="block";gt.gutterFiller.style.height=gs.bottom+"px";gt.gutterFiller.style.width=gr.gutterWidth+"px"}else{gt.gutterFiller.style.display=""}}function b5(gt,gx,gs){var gu=gs&&gs.top!=null?Math.max(0,gs.top):gt.scroller.scrollTop;gu=Math.floor(gu-fd(gt));var gq=gs&&gs.bottom!=null?gs.bottom:gu+gt.wrapper.clientHeight;var gv=bF(gx,gu),gw=bF(gx,gq);if(gs&&gs.ensure){var gr=gs.ensure.from.line,gy=gs.ensure.to.line;if(gr<gv){gv=gr;gw=bF(gx,bL(fk(gx,gr))+gt.wrapper.clientHeight)}else{if(Math.min(gy,gx.lastLine())>=gw){gv=bF(gx,bL(fk(gx,gy))-gt.wrapper.clientHeight);gw=gy}}}return{from:gv,to:Math.max(gw,gv+1)}}function eH(gy){var gw=gy.display,gx=gw.view;if(!gw.alignWidgets&&(!gw.gutters.firstChild||!gy.options.fixedGutter)){return}var gu=dX(gw)-gw.scroller.scrollLeft+gy.doc.scrollLeft;var gq=gw.gutters.offsetWidth,gr=gu+"px";for(var gt=0;gt<gx.length;gt++){if(!gx[gt].hidden){if(gy.options.fixedGutter&&gx[gt].gutter){gx[gt].gutter.style.left=gr}var gv=gx[gt].alignable;if(gv){for(var gs=0;gs<gv.length;gs++){gv[gs].style.left=gr}}}}if(gy.options.fixedGutter){gw.gutters.style.left=(gu+gq)+"px"}}function d6(gq){if(!gq.options.lineNumbers){return false}var gv=gq.doc,gr=ev(gq.options,gv.first+gv.size-1),gu=gq.display;if(gr.length!=gu.lineNumChars){var gw=gu.measure.appendChild(f9("div",[f9("div",gr)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gs=gw.firstChild.offsetWidth,gt=gw.offsetWidth-gs;gu.lineGutter.style.width="";gu.lineNumInnerWidth=Math.max(gs,gu.lineGutter.offsetWidth-gt)+1;gu.lineNumWidth=gu.lineNumInnerWidth+gt;gu.lineNumChars=gu.lineNumInnerWidth?gr.length:-1;gu.lineGutter.style.width=gu.lineNumWidth+"px";c3(gq);return true}return false}function ev(gq,gr){return String(gq.lineNumberFormatter(gr+gq.firstLineNumber))}function dX(gq){return gq.scroller.getBoundingClientRect().left-gq.sizer.getBoundingClientRect().left}function aH(gr,gq,gs){var gt=gr.display;this.viewport=gq;this.visible=b5(gt,gr.doc,gq);this.editorIsHidden=!gt.wrapper.offsetWidth;this.wrapperHeight=gt.wrapper.clientHeight;this.wrapperWidth=gt.wrapper.clientWidth;this.oldDisplayWidth=dl(gr);this.force=gs;this.dims=fi(gr);this.events=[]}aH.prototype.signal=function(gr,gq){if(fn(gr,gq)){this.events.push(arguments)}};aH.prototype.finish=function(){for(var gq=0;gq<this.events.length;gq++){aD.apply(null,this.events[gq])}};function J(gq){var gr=gq.display;if(!gr.scrollbarsClipped&&gr.scroller.offsetWidth){gr.nativeBarWidth=gr.scroller.offsetWidth-gr.scroller.clientWidth;gr.heightForcer.style.height=cS(gq)+"px";gr.sizer.style.marginBottom=-gr.nativeBarWidth+"px";gr.sizer.style.borderRightWidth=cS(gq)+"px";gr.scrollbarsClipped=true}}function B(gz,gt){var gu=gz.display,gy=gz.doc;if(gt.editorIsHidden){eA(gz);return false}if(!gt.force&&gt.visible.from>=gu.viewFrom&&gt.visible.to<=gu.viewTo&&(gu.updateLineNumbers==null||gu.updateLineNumbers>=gu.viewTo)&&gu.renderedView==gu.view&&db(gz)==0){return false}if(d6(gz)){eA(gz);gt.dims=fi(gz)}var gs=gy.first+gy.size;var gw=Math.max(gt.visible.from-gz.options.viewportMargin,gy.first);var gx=Math.min(gs,gt.visible.to+gz.options.viewportMargin);if(gu.viewFrom<gw&&gw-gu.viewFrom<20){gw=Math.max(gy.first,gu.viewFrom)}if(gu.viewTo>gx&&gu.viewTo-gx<20){gx=Math.min(gs,gu.viewTo)}if(a6){gw=aV(gz.doc,gw);gx=d3(gz.doc,gx)}var gr=gw!=gu.viewFrom||gx!=gu.viewTo||gu.lastWrapHeight!=gt.wrapperHeight||gu.lastWrapWidth!=gt.wrapperWidth;cQ(gz,gw,gx);gu.viewOffset=bL(fk(gz.doc,gu.viewFrom));gz.display.mover.style.top=gu.viewOffset+"px";var gq=db(gz);if(!gr&&gq==0&&!gt.force&&gu.renderedView==gu.view&&(gu.updateLineNumbers==null||gu.updateLineNumbers>=gu.viewTo)){return false}var gv=dO();if(gq>4){gu.lineDiv.style.display="none"}cl(gz,gu.updateLineNumbers,gt.dims);if(gq>4){gu.lineDiv.style.display=""}gu.renderedView=gu.view;if(gv&&dO()!=gv&&gv.offsetHeight){gv.focus()}d2(gu.cursorDiv);d2(gu.selectionDiv);gu.gutters.style.height=gu.sizer.style.minHeight=0;if(gr){gu.lastWrapHeight=gt.wrapperHeight;gu.lastWrapWidth=gt.wrapperWidth;eh(gz,400)}gu.updateLineNumbers=null;return true}function ci(gr,gu){var gq=gu.viewport;for(var gt=true;;gt=false){if(!gt||!gr.options.lineWrapping||gu.oldDisplayWidth==dl(gr)){if(gq&&gq.top!=null){gq={top:Math.min(gr.doc.height+bH(gr.display)-cU(gr),gq.top)}}gu.visible=b5(gr.display,gr.doc,gq);if(gu.visible.from>=gr.display.viewFrom&&gu.visible.to<=gr.display.viewTo){break}}if(!B(gr,gu)){break}a8(gr);var gs=dA(gr);bB(gr);e2(gr,gs);dz(gr,gs)}gu.signal(gr,"update",gr);if(gr.display.viewFrom!=gr.display.reportedViewFrom||gr.display.viewTo!=gr.display.reportedViewTo){gu.signal(gr,"viewportChange",gr,gr.display.viewFrom,gr.display.viewTo);gr.display.reportedViewFrom=gr.display.viewFrom;gr.display.reportedViewTo=gr.display.viewTo}}function dT(gr,gq){var gt=new aH(gr,gq);if(B(gr,gt)){a8(gr);ci(gr,gt);var gs=dA(gr);bB(gr);e2(gr,gs);dz(gr,gs);gt.finish()}}function dz(gq,gr){gq.display.sizer.style.minHeight=gr.docHeight+"px";gq.display.heightForcer.style.top=gr.docHeight+"px";gq.display.gutters.style.height=(gr.docHeight+gq.display.barHeight+cS(gq))+"px"}function a8(gx){var gv=gx.display;var gr=gv.lineDiv.offsetTop;for(var gs=0;gs<gv.view.length;gs++){var gy=gv.view[gs],gz;if(gy.hidden){continue}if(dK&&k<8){var gu=gy.node.offsetTop+gy.node.offsetHeight;gz=gu-gr;gr=gu}else{var gt=gy.node.getBoundingClientRect();gz=gt.bottom-gt.top}var gw=gy.line.height-gz;if(gz<2){gz=aX(gv)}if(gw>0.001||gw<-0.001){gc(gy.line,gz);ca(gy.line);if(gy.rest){for(var gq=0;gq<gy.rest.length;gq++){ca(gy.rest[gq])}}}}}function ca(gq){if(gq.widgets){for(var gr=0;gr<gq.widgets.length;++gr){gq.widgets[gr].height=gq.widgets[gr].node.parentNode.offsetHeight}}}function fi(gq){var gv=gq.display,gt={},gs={};var gu=gv.gutters.clientLeft;for(var gw=gv.gutters.firstChild,gr=0;gw;gw=gw.nextSibling,++gr){gt[gq.options.gutters[gr]]=gw.offsetLeft+gw.clientLeft+gu;gs[gq.options.gutters[gr]]=gw.clientWidth}return{fixedPos:dX(gv),gutterTotalWidth:gv.gutters.offsetWidth,gutterLeft:gt,gutterWidth:gs,wrapperWidth:gv.wrapper.clientWidth}}function cl(gB,gs,gA){var gx=gB.display,gD=gB.options.lineNumbers;var gq=gx.lineDiv,gC=gq.firstChild;function gw(gF){var gE=gF.nextSibling;if(cZ&&b6&&gB.display.currentWheelTarget==gF){gF.style.display="none"}else{gF.parentNode.removeChild(gF)}return gE}var gy=gx.view,gv=gx.viewFrom;for(var gt=0;gt<gy.length;gt++){var gu=gy[gt];if(gu.hidden){}else{if(!gu.node||gu.node.parentNode!=gq){var gr=aE(gB,gu,gv,gA);gq.insertBefore(gr,gC)}else{while(gC!=gu.node){gC=gw(gC)}var gz=gD&&gs!=null&&gs<=gv&&gu.lineNumber;if(gu.changes){if(dh(gu.changes,"gutter")>-1){gz=false}ab(gB,gu,gv,gA)}if(gz){d2(gu.lineNumber);gu.lineNumber.appendChild(document.createTextNode(ev(gB.options,gv)))}gC=gu.node.nextSibling}}gv+=gu.size}while(gC){gC=gw(gC)}}function ab(gq,gs,gu,gv){for(var gr=0;gr<gs.changes.length;gr++){var gt=gs.changes[gr];if(gt=="text"){fq(gq,gs)}else{if(gt=="gutter"){df(gq,gs,gu,gv)}else{if(gt=="class"){dG(gs)}else{if(gt=="widget"){an(gq,gs,gv)}}}}}gs.changes=null}function fM(gq){if(gq.node==gq.text){gq.node=f9("div",null,null,"position: relative");if(gq.text.parentNode){gq.text.parentNode.replaceChild(gq.node,gq.text)}gq.node.appendChild(gq.text);if(dK&&k<8){gq.node.style.zIndex=2}}return gq.node}function ez(gr){var gq=gr.bgClass?gr.bgClass+" "+(gr.line.bgClass||""):gr.line.bgClass;if(gq){gq+=" CodeMirror-linebackground"}if(gr.background){if(gq){gr.background.className=gq}else{gr.background.parentNode.removeChild(gr.background);gr.background=null}}else{if(gq){var gs=fM(gr);gr.background=gs.insertBefore(f9("div",null,gq),gs.firstChild)}}}function dV(gq,gr){var gs=gq.display.externalMeasured;if(gs&&gs.line==gr.line){gq.display.externalMeasured=null;gr.measure=gs.measure;return gs.built}return eV(gq,gr)}function fq(gq,gt){var gr=gt.text.className;var gs=dV(gq,gt);if(gt.text==gt.node){gt.node=gs.pre}gt.text.parentNode.replaceChild(gs.pre,gt.text);gt.text=gs.pre;if(gs.bgClass!=gt.bgClass||gs.textClass!=gt.textClass){gt.bgClass=gs.bgClass;gt.textClass=gs.textClass;dG(gt)}else{if(gr){gt.text.className=gr}}}function dG(gr){ez(gr);if(gr.line.wrapClass){fM(gr).className=gr.line.wrapClass}else{if(gr.node!=gr.text){gr.node.className=""}}var gq=gr.textClass?gr.textClass+" "+(gr.line.textClass||""):gr.line.textClass;gr.text.className=gq||""}function df(gy,gw,gv,gx){if(gw.gutter){gw.node.removeChild(gw.gutter);gw.gutter=null}if(gw.gutterBackground){gw.node.removeChild(gw.gutterBackground);gw.gutterBackground=null}if(gw.line.gutterClass){var gr=fM(gw);gw.gutterBackground=f9("div",null,"CodeMirror-gutter-background "+gw.line.gutterClass,"left: "+(gy.options.fixedGutter?gx.fixedPos:-gx.gutterTotalWidth)+"px; width: "+gx.gutterTotalWidth+"px");gr.insertBefore(gw.gutterBackground,gw.text)}var gt=gw.line.gutterMarkers;if(gy.options.lineNumbers||gt){var gr=fM(gw);var gu=gw.gutter=f9("div",null,"CodeMirror-gutter-wrapper","left: "+(gy.options.fixedGutter?gx.fixedPos:-gx.gutterTotalWidth)+"px");gy.display.input.setUneditable(gu);gr.insertBefore(gu,gw.text);if(gw.line.gutterClass){gu.className+=" "+gw.line.gutterClass}if(gy.options.lineNumbers&&(!gt||!gt["CodeMirror-linenumbers"])){gw.lineNumber=gu.appendChild(f9("div",ev(gy.options,gv),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+gx.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+gy.display.lineNumInnerWidth+"px"))}if(gt){for(var gs=0;gs<gy.options.gutters.length;++gs){var gq=gy.options.gutters[gs],gz=gt.hasOwnProperty(gq)&&gt[gq];if(gz){gu.appendChild(f9("div",[gz],"CodeMirror-gutter-elt","left: "+gx.gutterLeft[gq]+"px; width: "+gx.gutterWidth[gq]+"px"))}}}}}function an(gq,gr,gu){if(gr.alignable){gr.alignable=null}for(var gt=gr.node.firstChild,gs;gt;gt=gs){var gs=gt.nextSibling;if(gt.className=="CodeMirror-linewidget"){gr.node.removeChild(gt)}}fy(gq,gr,gu)}function aE(gq,gs,gt,gu){var gr=dV(gq,gs);gs.text=gs.node=gr.pre;if(gr.bgClass){gs.bgClass=gr.bgClass}if(gr.textClass){gs.textClass=gr.textClass}dG(gs);df(gq,gs,gt,gu);fy(gq,gs,gu);return gs.node}function fy(gq,gs,gt){ge(gq,gs.line,gs,gt,true);if(gs.rest){for(var gr=0;gr<gs.rest.length;gr++){ge(gq,gs.rest[gr],gs,gt,false)}}}function ge(gy,gz,gv,gx,gt){if(!gz.widgets){return}var gq=fM(gv);for(var gs=0,gw=gz.widgets;gs<gw.length;++gs){var gu=gw[gs],gr=f9("div",[gu.node],"CodeMirror-linewidget");if(!gu.handleMouseEvents){gr.setAttribute("cm-ignore-events","true")}bE(gu,gr,gv,gx);gy.display.input.setUneditable(gr);if(gt&&gu.above){gq.insertBefore(gr,gv.gutter||gv.text)}else{gq.appendChild(gr)}ae(gu,"redraw")}}function bE(gt,gs,gq,gu){if(gt.noHScroll){(gq.alignable||(gq.alignable=[])).push(gs);var gr=gu.wrapperWidth;gs.style.left=gu.fixedPos+"px";if(!gt.coverGutter){gr-=gu.gutterTotalWidth;gs.style.paddingLeft=gu.gutterTotalWidth+"px"}gs.style.width=gr+"px"}if(gt.coverGutter){gs.style.zIndex=5;gs.style.position="relative";if(!gt.noHScroll){gs.style.marginLeft=-gu.gutterTotalWidth+"px"}}}var W=H.Pos=function(gq,gr){if(!(this instanceof W)){return new W(gq,gr)}this.line=gq;this.ch=gr};var ce=H.cmpPos=function(gr,gq){return gr.line-gq.line||gr.ch-gq.ch};function ch(gq){return W(gq.line,gq.ch)}function bw(gr,gq){return ce(gr,gq)<0?gq:gr}function aq(gr,gq){return ce(gr,gq)<0?gr:gq}function r(gq){if(!gq.state.focused){gq.display.input.focus();cA(gq)}}var bl=null;function f5(gE,gu,gs,gr,gD){var gC=gE.doc;gE.display.shift=false;if(!gr){gr=gC.sel}var gt=gE.state.pasteIncoming||gD=="paste";var gx=gC.splitLines(gu),gq=null;if(gt&&gr.ranges.length>1){if(bl&&bl.join("\n")==gu){if(gr.ranges.length%bl.length==0){gq=[];for(var gv=0;gv<bl.length;gv++){gq.push(gC.splitLines(bl[gv]))}}}else{if(gx.length==gr.ranges.length){gq=bR(gx,function(gF){return[gF]})}}}for(var gv=gr.ranges.length-1;gv>=0;gv--){var gw=gr.ranges[gv];var gB=gw.from(),gA=gw.to();if(gw.empty()){if(gs&&gs>0){gB=W(gB.line,gB.ch-gs)}else{if(gE.state.overwrite&&!gt){gA=W(gA.line,Math.min(fk(gC,gA.line).text.length,gA.ch+fL(gx).length))}}}var gy=gE.curOp.updateInput;var gz={from:gB,to:gA,text:gq?gq[gv%gq.length]:gx,origin:gD||(gt?"paste":gE.state.cutIncoming?"cut":"+input")};bf(gE.doc,gz);ae(gE,"inputRead",gE,gz)}if(gu&&!gt){f2(gE,gu)}fK(gE);gE.curOp.updateInput=gy;gE.curOp.typing=true;gE.state.pasteIncoming=gE.state.cutIncoming=false}function a9(gs,gq){var gr=gs.clipboardData&&gs.clipboardData.getData("text/plain");if(gr){gs.preventDefault();if(!gq.isReadOnly()&&!gq.options.disableInput){cL(gq,function(){f5(gq,gr,0,null,"paste")})}return true}}function f2(gq,gu){if(!gq.options.electricChars||!gq.options.smartIndent){return}var gv=gq.doc.sel;for(var gt=gv.ranges.length-1;gt>=0;gt--){var gr=gv.ranges[gt];if(gr.head.ch>100||(gt&&gv.ranges[gt-1].head.line==gr.head.line)){continue}var gw=gq.getModeAt(gr.head);var gx=false;if(gw.electricChars){for(var gs=0;gs<gw.electricChars.length;gs++){if(gu.indexOf(gw.electricChars.charAt(gs))>-1){gx=ad(gq,gr.head.line,"smart");break}}}else{if(gw.electricInput){if(gw.electricInput.test(fk(gq.doc,gr.head.line).text.slice(0,gr.head.ch))){gx=ad(gq,gr.head.line,"smart")}}}if(gx){ae(gq,"electricInput",gq,gr.head.line)}}}function dj(gq){var gv=[],gs=[];for(var gt=0;gt<gq.doc.sel.ranges.length;gt++){var gr=gq.doc.sel.ranges[gt].head.line;var gu={anchor:W(gr,0),head:W(gr+1,0)};gs.push(gu);gv.push(gq.getRange(gu.anchor,gu.head))}return{text:gv,ranges:gs}}function fV(gq){gq.setAttribute("autocorrect","off");gq.setAttribute("autocapitalize","off");gq.setAttribute("spellcheck","false")}function Y(gq){this.cm=gq;this.prevInput="";this.pollingFast=false;this.polling=new gp();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null}function aW(){var gq=f9("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");var gr=f9("div",[gq],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(cZ){gq.style.width="1000px"}else{gq.setAttribute("wrap","off")}if(e5){gq.style.border="1px solid black"}fV(gq);return gr}Y.prototype=aM({init:function(gs){var gr=this,gq=this.cm;var gv=this.wrapper=aW();var gt=this.textarea=gv.firstChild;gs.wrapper.insertBefore(gv,gs.wrapper.firstChild);if(e5){gt.style.width="0px"}bW(gt,"input",function(){if(dK&&k>=9&&gr.hasSelection){gr.hasSelection=null}gr.poll()});bW(gt,"paste",function(gw){if(aQ(gq,gw)||a9(gw,gq)){return}gq.state.pasteIncoming=true;gr.fastPoll()});function gu(gx){if(aQ(gq,gx)){return}if(gq.somethingSelected()){bl=gq.getSelections();if(gr.inaccurateSelection){gr.prevInput="";gr.inaccurateSelection=false;gt.value=bl.join("\n");dL(gt)}}else{if(!gq.options.lineWiseCopyCut){return}else{var gw=dj(gq);bl=gw.text;if(gx.type=="cut"){gq.setSelections(gw.ranges,null,Z)}else{gr.prevInput="";gt.value=gw.text.join("\n");dL(gt)}}}if(gx.type=="cut"){gq.state.cutIncoming=true}}bW(gt,"cut",gu);bW(gt,"copy",gu);bW(gs.scroller,"paste",function(gw){if(ba(gs,gw)||aQ(gq,gw)){return}gq.state.pasteIncoming=true;gr.focus()});bW(gs.lineSpace,"selectstart",function(gw){if(!ba(gs,gw)){cF(gw)}});bW(gt,"compositionstart",function(){var gw=gq.getCursor("from");if(gr.composing){gr.composing.range.clear()}gr.composing={start:gw,range:gq.markText(gw,gq.getCursor("to"),{className:"CodeMirror-composing"})}});bW(gt,"compositionend",function(){if(gr.composing){gr.poll();gr.composing.range.clear();gr.composing=null}})},prepareSelection:function(){var gr=this.cm,gv=gr.display,gu=gr.doc;var gq=fN(gr);if(gr.options.moveInputWithCursor){var gw=dU(gr,gu.sel.primary().head,"div");var gs=gv.wrapper.getBoundingClientRect(),gt=gv.lineDiv.getBoundingClientRect();gq.teTop=Math.max(0,Math.min(gv.wrapper.clientHeight-10,gw.top+gt.top-gs.top));gq.teLeft=Math.max(0,Math.min(gv.wrapper.clientWidth-10,gw.left+gt.left-gs.left))}return gq},showSelection:function(gs){var gq=this.cm,gr=gq.display;bQ(gr.cursorDiv,gs.cursors);bQ(gr.selectionDiv,gs.selection);if(gs.teTop!=null){this.wrapper.style.top=gs.teTop+"px";this.wrapper.style.left=gs.teLeft+"px"}},reset:function(gu){if(this.contextMenuPending){return}var gr,gt,gq=this.cm,gw=gq.doc;if(gq.somethingSelected()){this.prevInput="";var gs=gw.sel.primary();gr=c9&&(gs.to().line-gs.from().line>100||(gt=gq.getSelection()).length>1000);var gv=gr?"-":gt||gq.getSelection();this.textarea.value=gv;if(gq.state.focused){dL(this.textarea)}if(dK&&k>=9){this.hasSelection=gv}}else{if(!gu){this.prevInput=this.textarea.value="";if(dK&&k>=9){this.hasSelection=null}}}this.inaccurateSelection=gr},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!ei||dO()!=this.textarea)){try{this.textarea.focus()}catch(gq){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var gq=this;if(gq.pollingFast){return}gq.polling.set(this.cm.options.pollInterval,function(){gq.poll();if(gq.cm.state.focused){gq.slowPoll()}})},fastPoll:function(){var gr=false,gq=this;gq.pollingFast=true;function gs(){var gt=gq.poll();if(!gt&&!gr){gr=true;gq.polling.set(60,gs)}else{gq.pollingFast=false;gq.slowPoll()}}gq.polling.set(20,gs)},poll:function(){var gq=this.cm,gt=this.textarea,gu=this.prevInput;if(this.contextMenuPending||!gq.state.focused||(br(gt)&&!gu&&!this.composing)||gq.isReadOnly()||gq.options.disableInput||gq.state.keySeq){return false}var gw=gt.value;if(gw==gu&&!gq.somethingSelected()){return false}if(dK&&k>=9&&this.hasSelection===gw||b6&&/[\uf700-\uf7ff]/.test(gw)){gq.display.input.reset();return false}if(gq.doc.sel==gq.display.selForContextMenu){var gv=gw.charCodeAt(0);if(gv==8203&&!gu){gu="\u200b"}if(gv==8666){this.reset();return this.cm.execCommand("undo")}}var gx=0,gr=Math.min(gu.length,gw.length);while(gx<gr&&gu.charCodeAt(gx)==gw.charCodeAt(gx)){++gx}var gs=this;cL(gq,function(){f5(gq,gw.slice(gx),gu.length-gx,null,gs.composing?"*compose":null);if(gw.length>1000||gw.indexOf("\n")>-1){gt.value=gs.prevInput=""}else{gs.prevInput=gw}if(gs.composing){gs.composing.range.clear();gs.composing.range=gq.markText(gs.composing.start,gq.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(dK&&k>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(gv){var gA=this,gB=gA.cm,gx=gB.display,gr=gA.textarea;var gz=cm(gB,gv),gq=gx.scroller.scrollTop;if(!gz||d4){return}var gu=gB.options.resetSelectionOnContextMenu;if(gu&&gB.doc.sel.contains(gz)==-1){c1(gB,bT)(gB.doc,eW(gz),Z)}var gw=gr.style.cssText,gE=gA.wrapper.style.cssText;gA.wrapper.style.cssText="position: absolute";var gD=gA.wrapper.getBoundingClientRect();gr.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(gv.clientY-gD.top-5)+"px; left: "+(gv.clientX-gD.left-5)+"px; z-index: 1000; background: "+(dK?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(cZ){var gC=window.scrollY}gx.input.focus();if(cZ){window.scrollTo(null,gC)}gx.input.reset();if(!gB.somethingSelected()){gr.value=gA.prevInput=" "}gA.contextMenuPending=true;gx.selForContextMenu=gB.doc.sel;clearTimeout(gx.detectingSelectAll);function gt(){if(gr.selectionStart!=null){var gF=gB.somethingSelected();var gG="\u200b"+(gF?gr.value:"");gr.value="\u21da";gr.value=gG;gA.prevInput=gF?"":"\u200b";gr.selectionStart=1;gr.selectionEnd=gG.length;gx.selForContextMenu=gB.doc.sel}}function gy(){gA.contextMenuPending=false;gA.wrapper.style.cssText=gE;gr.style.cssText=gw;if(dK&&k<9){gx.scrollbars.setScrollTop(gx.scroller.scrollTop=gq)}if(gr.selectionStart!=null){if(!dK||(dK&&k<9)){gt()}var gF=0,gG=function(){if(gx.selForContextMenu==gB.doc.sel&&gr.selectionStart==0&&gr.selectionEnd>0&&gA.prevInput=="\u200b"){c1(gB,eG.selectAll)(gB)}else{if(gF++<10){gx.detectingSelectAll=setTimeout(gG,500)}else{gx.input.reset()}}};gx.detectingSelectAll=setTimeout(gG,200)}}if(dK&&k>=9){gt()}if(gg){eu(gv);var gs=function(){ef(window,"mouseup",gs);setTimeout(gy,20)};bW(window,"mouseup",gs)}else{setTimeout(gy,50)}},readOnlyChanged:function(gq){if(!gq){this.reset()}},setUneditable:f1,needsContentAttribute:false},Y.prototype);function dv(gq){this.cm=gq;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gp();this.gracePeriod=false}dv.prototype=aM({init:function(gt){var gs=this,gq=gs.cm;var gu=gs.div=gt.lineDiv;fV(gu);bW(gu,"paste",function(gv){if(!aQ(gq,gv)){a9(gv,gq)}});bW(gu,"compositionstart",function(gz){var gy=gz.data;gs.composing={sel:gq.doc.sel,data:gy,startData:gy};if(!gy){return}var gw=gq.doc.sel.primary();var gv=gq.getLine(gw.head.line);var gx=gv.indexOf(gy,Math.max(0,gw.head.ch-gy.length));if(gx>-1&&gx<=gw.head.ch){gs.composing.sel=eW(W(gw.head.line,gx),W(gw.head.line,gx+gy.length))}});bW(gu,"compositionupdate",function(gv){gs.composing.data=gv.data});bW(gu,"compositionend",function(gw){var gv=gs.composing;if(!gv){return}if(gw.data!=gv.startData&&!/\u200b/.test(gw.data)){gv.data=gw.data}setTimeout(function(){if(!gv.handled){gs.applyComposition(gv)}if(gs.composing==gv){gs.composing=null}},50)});bW(gu,"touchstart",function(){gs.forceCompositionEnd()});bW(gu,"input",function(){if(gs.composing){return}if(gq.isReadOnly()||!gs.pollContent()){cL(gs.cm,function(){ah(gq)})}});function gr(gy){if(aQ(gq,gy)){return}if(gq.somethingSelected()){bl=gq.getSelections();if(gy.type=="cut"){gq.replaceSelection("",null,"cut")}}else{if(!gq.options.lineWiseCopyCut){return}else{var gw=dj(gq);bl=gw.text;if(gy.type=="cut"){gq.operation(function(){gq.setSelections(gw.ranges,0,Z);gq.replaceSelection("",null,"cut")})}}}if(gy.clipboardData&&!e5){gy.preventDefault();gy.clipboardData.clearData();gy.clipboardData.setData("text/plain",bl.join("\n"))}else{var gx=aW(),gz=gx.firstChild;gq.display.lineSpace.insertBefore(gx,gq.display.lineSpace.firstChild);gz.value=bl.join("\n");var gv=document.activeElement;dL(gz);setTimeout(function(){gq.display.lineSpace.removeChild(gx);gv.focus()},50)}}bW(gu,"copy",gr);bW(gu,"cut",gr)},prepareSelection:function(){var gq=fN(this.cm,false);gq.focus=this.cm.state.focused;return gq},showSelection:function(gq){if(!gq||!this.cm.display.view.length){return}if(gq.focus){this.showPrimarySelection()}this.showMultipleSelections(gq)},showPrimarySelection:function(){var gu=window.getSelection(),gx=this.cm.doc.sel.primary();var gv=ay(this.cm,gu.anchorNode,gu.anchorOffset);var gz=ay(this.cm,gu.focusNode,gu.focusOffset);if(gv&&!gv.bad&&gz&&!gz.bad&&ce(aq(gv,gz),gx.from())==0&&ce(bw(gv,gz),gx.to())==0){return}var gt=cy(this.cm,gx.from());var gy=cy(this.cm,gx.to());if(!gt&&!gy){return}var gB=this.cm.display.view;var gw=gu.rangeCount&&gu.getRangeAt(0);if(!gt){gt={node:gB[0].measure.map[2],offset:0}}else{if(!gy){var gs=gB[gB.length-1].measure;var gr=gs.maps?gs.maps[gs.maps.length-1]:gs.map;gy={node:gr[gr.length-1],offset:gr[gr.length-2]-gr[gr.length-3]}}}try{var gq=ck(gt.node,gt.offset,gy.offset,gy.node)}catch(gA){}if(gq){if(!cn&&this.cm.state.focused){gu.collapse(gt.node,gt.offset);if(!gq.collapsed){gu.addRange(gq)}}else{gu.removeAllRanges();gu.addRange(gq)}if(gw&&gu.anchorNode==null){gu.addRange(gw)}else{if(cn){this.startGracePeriod()}}}this.rememberSelection()},startGracePeriod:function(){var gq=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){gq.gracePeriod=false;if(gq.selectionChanged()){gq.cm.operation(function(){gq.cm.curOp.selectionChanged=true})}},20)},showMultipleSelections:function(gq){bQ(this.cm.display.cursorDiv,gq.cursors);bQ(this.cm.display.selectionDiv,gq.selection)},rememberSelection:function(){var gq=window.getSelection();this.lastAnchorNode=gq.anchorNode;this.lastAnchorOffset=gq.anchorOffset;this.lastFocusNode=gq.focusNode;this.lastFocusOffset=gq.focusOffset},selectionInEditor:function(){var gr=window.getSelection();if(!gr.rangeCount){return false}var gq=gr.getRangeAt(0).commonAncestorContainer;return gh(this.div,gq)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var gq=this;if(this.selectionInEditor()){this.pollSelection()}else{cL(this.cm,function(){gq.cm.curOp.selectionChanged=true})}function gr(){if(gq.cm.state.focused){gq.pollSelection();gq.polling.set(gq.cm.options.pollInterval,gr)}}this.polling.set(this.cm.options.pollInterval,gr)},selectionChanged:function(){var gq=window.getSelection();return gq.anchorNode!=this.lastAnchorNode||gq.anchorOffset!=this.lastAnchorOffset||gq.focusNode!=this.lastFocusNode||gq.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var gt=window.getSelection(),gq=this.cm;this.rememberSelection();var gr=ay(gq,gt.anchorNode,gt.anchorOffset);var gs=ay(gq,gt.focusNode,gt.focusOffset);if(gr&&gs){cL(gq,function(){bT(gq.doc,eW(gr,gs),Z);if(gr.bad||gs.bad){gq.curOp.selectionChanged=true}})}}},pollContent:function(){var gA=this.cm,gK=gA.display,gI=gA.doc.sel.primary();var gJ=gI.from(),gu=gI.to();if(gJ.line<gK.viewFrom||gu.line>gK.viewTo-1){return false}var gx;if(gJ.line==gK.viewFrom||(gx=dr(gA,gJ.line))==0){var gv=bM(gK.view[0].line);var gz=gK.view[0].node}else{var gv=bM(gK.view[gx].line);var gz=gK.view[gx-1].node.nextSibling}var gH=dr(gA,gu.line);if(gH==gK.view.length-1){var gC=gK.viewTo-1;var gF=gK.lineDiv.lastChild}else{var gC=bM(gK.view[gH+1].line)-1;var gF=gK.view[gH+1].node.previousSibling}var gL=gA.doc.splitLines(f6(gA,gz,gF,gv,gC));var gE=gb(gA.doc,W(gv,0),W(gC,fk(gA.doc,gC).text.length));while(gL.length>1&&gE.length>1){if(fL(gL)==fL(gE)){gL.pop();gE.pop();gC--}else{if(gL[0]==gE[0]){gL.shift();gE.shift();gv++}else{break}}}var gG=0,gs=0;var gB=gL[0],gr=gE[0],gq=Math.min(gB.length,gr.length);while(gG<gq&&gB.charCodeAt(gG)==gr.charCodeAt(gG)){++gG}var gy=fL(gL),gM=fL(gE);var gt=Math.min(gy.length-(gL.length==1?gG:0),gM.length-(gE.length==1?gG:0));while(gs<gt&&gy.charCodeAt(gy.length-gs-1)==gM.charCodeAt(gM.length-gs-1)){++gs}gL[gL.length-1]=gy.slice(0,gy.length-gs);gL[0]=gL[0].slice(gG);var gw=W(gv,gG);var gD=W(gC,gE.length?fL(gE).length-gs:0);if(gL.length>1||gL[0]||ce(gw,gD)){a0(gA.doc,gL,gw,gD,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(gq){if(this.cm.isReadOnly()){c1(this.cm,ah)(this.cm)}else{if(gq.data&&gq.data!=gq.startData){c1(this.cm,f5)(this.cm,gq.data,0,gq.sel)}}},setUneditable:function(gq){gq.contentEditable="false"},onKeyPress:function(gq){gq.preventDefault();if(!this.cm.isReadOnly()){c1(this.cm,f5)(this.cm,String.fromCharCode(gq.charCode==null?gq.keyCode:gq.charCode),0)}},readOnlyChanged:function(gq){this.div.contentEditable=String(gq!="nocursor")},onContextMenu:f1,resetPosition:f1,needsContentAttribute:true},dv.prototype);function cy(gw,gu){var gv=fg(gw,gu.line);if(!gv||gv.hidden){return null}var gy=fk(gw.doc,gu.line);var gr=cs(gv,gy,gu.line);var gs=a(gy),gt="left";if(gs){var gq=aF(gs,gu.ch);gt=gq%2?"right":"left"}var gx=aK(gr.map,gu.ch,gt);gx.offset=gx.collapse=="right"?gx.end:gx.start;return gx}function ew(gr,gq){if(gq){gr.bad=true}return gr}function ay(gq,gt,gv){var gu;if(gt==gq.display.lineDiv){gu=gq.display.lineDiv.childNodes[gv];if(!gu){return ew(gq.clipPos(W(gq.display.viewTo-1)),true)}gt=null;gv=0}else{for(gu=gt;;gu=gu.parentNode){if(!gu||gu==gq.display.lineDiv){return null}if(gu.parentNode&&gu.parentNode==gq.display.lineDiv){break}}}for(var gs=0;gs<gq.display.view.length;gs++){var gr=gq.display.view[gs];if(gr.node==gu){return aa(gr,gt,gv)}}}function aa(gy,gu,gw){var gs=gy.text.firstChild,gt=false;if(!gu||!gh(gs,gu)){return ew(W(bM(gy.line),0),true)}if(gu==gs){gt=true;gu=gs.childNodes[gw];gw=0;if(!gu){var gE=gy.rest?fL(gy.rest):gy.line;return ew(W(bM(gE),gE.text.length),gt)}}var gv=gu.nodeType==3?gu:null,gC=gu;if(!gv&&gu.childNodes.length==1&&gu.firstChild.nodeType==3){gv=gu.firstChild;if(gw){gw=gv.nodeValue.length}}while(gC.parentNode!=gs){gC=gC.parentNode}var gr=gy.measure,gA=gr.maps;function gx(gH,gM,gJ){for(var gL=-1;gL<(gA?gA.length:0);gL++){var gG=gL<0?gr.map:gA[gL];for(var gK=0;gK<gG.length;gK+=3){var gI=gG[gK+2];if(gI==gH||gI==gM){var gN=bM(gL<0?gy.line:gy.rest[gL]);var gF=gG[gK]+gJ;if(gJ<0||gI!=gH){gF=gG[gK+(gJ?1:0)]}return W(gN,gF)}}}}var gD=gx(gv,gC,gw);if(gD){return ew(gD,gt)}for(var gq=gC.nextSibling,gz=gv?gv.nodeValue.length-gw:0;gq;gq=gq.nextSibling){gD=gx(gq,gq.firstChild,0);if(gD){return ew(W(gD.line,gD.ch-gz),gt)}else{gz+=gq.textContent.length}}for(var gB=gC.previousSibling,gz=gw;gB;gB=gB.previousSibling){gD=gx(gB,gB.firstChild,-1);if(gD){return ew(W(gD.line,gD.ch+gz),gt)}else{gz+=gq.textContent.length}}}function f6(gy,gw,gx,gt,gr){var gz="",gs=false,gq=gy.doc.lineSeparator();function gu(gA){return function(gB){return gB.id==gA}}function gv(gE){if(gE.nodeType==1){var gB=gE.getAttribute("cm-text");if(gB!=null){if(gB==""){gB=gE.textContent.replace(/\u200b/g,"")}gz+=gB;return}var gD=gE.getAttribute("cm-marker"),gA;if(gD){var gF=gy.findMarks(W(gt,0),W(gr+1,0),gu(+gD));if(gF.length&&(gA=gF[0].find())){gz+=gb(gy.doc,gA.from,gA.to).join(gq)}return}if(gE.getAttribute("contenteditable")=="false"){return}for(var gC=0;gC<gE.childNodes.length;gC++){gv(gE.childNodes[gC])}if(/^(pre|div|p)$/i.test(gE.nodeName)){gs=true}}else{if(gE.nodeType==3){var gG=gE.nodeValue;if(!gG){return}if(gs){gz+=gq;gs=false}gz+=gG}}}for(;;){gv(gw);if(gw==gx){break}gw=gw.nextSibling}return gz}H.inputStyles={textarea:Y,contenteditable:dv};function ga(gq,gr){this.ranges=gq;this.primIndex=gr}ga.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(gq){if(gq==this){return true}if(gq.primIndex!=this.primIndex||gq.ranges.length!=this.ranges.length){return false}for(var gs=0;gs<this.ranges.length;gs++){var gr=this.ranges[gs],gt=gq.ranges[gs];if(ce(gr.anchor,gt.anchor)!=0||ce(gr.head,gt.head)!=0){return false}}return true},deepCopy:function(){for(var gq=[],gr=0;gr<this.ranges.length;gr++){gq[gr]=new dY(ch(this.ranges[gr].anchor),ch(this.ranges[gr].head))}return new ga(gq,this.primIndex)},somethingSelected:function(){for(var gq=0;gq<this.ranges.length;gq++){if(!this.ranges[gq].empty()){return true}}return false},contains:function(gt,gq){if(!gq){gq=gt}for(var gs=0;gs<this.ranges.length;gs++){var gr=this.ranges[gs];if(ce(gq,gr.from())>=0&&ce(gt,gr.to())<=0){return gs}}return -1}};function dY(gq,gr){this.anchor=gq;this.head=gr}dY.prototype={from:function(){return aq(this.anchor,this.head)},to:function(){return bw(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cv(gq,gx){var gs=gq[gx];gq.sort(function(gA,gz){return ce(gA.from(),gz.from())});gx=dh(gq,gs);for(var gu=1;gu<gq.length;gu++){var gy=gq[gu],gr=gq[gu-1];if(ce(gr.to(),gy.from())>=0){var gv=aq(gr.from(),gy.from()),gw=bw(gr.to(),gy.to());var gt=gr.empty()?gy.from()==gy.head:gr.from()==gr.head;if(gu<=gx){--gx}gq.splice(--gu,2,new dY(gt?gw:gv,gt?gv:gw))}}return new ga(gq,gx)}function eW(gq,gr){return new ga([new dY(gq,gr||gq)],0)}function c4(gq,gr){return Math.max(gq.first,Math.min(gr,gq.first+gq.size-1))}function fP(gr,gs){if(gs.line<gr.first){return W(gr.first,0)}var gq=gr.first+gr.size-1;if(gs.line>gq){return W(gq,fk(gr,gq).text.length)}return fx(gs,fk(gr,gs.line).text.length)}function fx(gs,gr){var gq=gs.ch;if(gq==null||gq>gr){return W(gs.line,gr)}else{if(gq<0){return W(gs.line,0)}else{return gs}}}function b8(gr,gq){return gq>=gr.first&&gq<gr.first+gr.size}function d0(gs,gt){for(var gq=[],gr=0;gr<gt.length;gr++){gq[gr]=fP(gs,gt[gr])}return gq}function fA(gv,gr,gu,gq){if(gv.cm&&gv.cm.display.shift||gv.extend){var gt=gr.anchor;if(gq){var gs=ce(gu,gt)<0;if(gs!=(ce(gq,gt)<0)){gt=gu;gu=gq}else{if(gs!=(ce(gu,gq)<0)){gu=gq}}}return new dY(gt,gu)}else{return new dY(gq||gu,gu)}}function f3(gt,gs,gq,gr){bT(gt,new ga([fA(gt,gt.sel.primary(),gs,gq)],0),gr)}function av(gv,gu,gs){for(var gr=[],gt=0;gt<gv.sel.ranges.length;gt++){gr[gt]=fA(gv,gv.sel.ranges[gt],gu[gt],null)}var gq=cv(gr,gv.sel.primIndex);bT(gv,gq,gs)}function e(gu,gt,gr,gs){var gq=gu.sel.ranges.slice(0);gq[gt]=gr;bT(gu,cv(gq,gu.sel.primIndex),gs)}function F(gt,gr,gs,gq){bT(gt,eW(gr,gs),gq)}function c(gt,gr,gq){var gs={ranges:gr.ranges,update:function(gu){this.ranges=[];for(var gv=0;gv<gu.length;gv++){this.ranges[gv]=new dY(fP(gt,gu[gv].anchor),fP(gt,gu[gv].head))}},origin:gq&&gq.origin};aD(gt,"beforeSelectionChange",gt,gs);if(gt.cm){aD(gt.cm,"beforeSelectionChange",gt.cm,gs)}if(gs.ranges!=gr.ranges){return cv(gs.ranges,gs.ranges.length-1)}else{return gr}}function fc(gu,gt,gr){var gq=gu.history.done,gs=fL(gq);if(gs&&gs.ranges){gq[gq.length-1]=gt;es(gu,gt,gr)}else{bT(gu,gt,gr)}}function bT(gs,gr,gq){es(gs,gr,gq);gi(gs,gs.sel,gs.cm?gs.cm.curOp.id:NaN,gq)}function es(gt,gs,gr){if(fn(gt,"beforeSelectionChange")||gt.cm&&fn(gt.cm,"beforeSelectionChange")){gs=c(gt,gs,gr)}var gq=gr&&gr.bias||(ce(gs.primary().head,gt.sel.primary().head)<0?-1:1);c8(gt,n(gt,gs,gq,true));if(!(gr&&gr.scroll===false)&&gt.cm){fK(gt.cm)}}function c8(gr,gq){if(gq.equals(gr.sel)){return}gr.sel=gq;if(gr.cm){gr.cm.curOp.updateInput=gr.cm.curOp.selectionChanged=true;V(gr.cm)}ae(gr,"cursorActivity",gr)}function eB(gq){c8(gq,n(gq,gq.sel,null,false),Z)}function n(gz,gq,gw,gx){var gt;for(var gu=0;gu<gq.ranges.length;gu++){var gv=gq.ranges[gu];var gr=gq.ranges.length==gz.sel.ranges.length&&gz.sel.ranges[gu];var gy=bU(gz,gv.anchor,gr&&gr.anchor,gw,gx);var gs=bU(gz,gv.head,gr&&gr.head,gw,gx);if(gt||gy!=gv.anchor||gs!=gv.head){if(!gt){gt=gq.ranges.slice(0,gu)}gt[gu]=new dY(gy,gs)}}return gt?cv(gt,gq.primIndex):gq}function eM(gA,gy,gt,gs,gw){var gB=fk(gA,gy.line);if(gB.markedSpans){for(var gu=0;gu<gB.markedSpans.length;++gu){var gq=gB.markedSpans[gu],gr=gq.marker;if((gq.from==null||(gr.inclusiveLeft?gq.from<=gy.ch:gq.from<gy.ch))&&(gq.to==null||(gr.inclusiveRight?gq.to>=gy.ch:gq.to>gy.ch))){if(gw){aD(gr,"beforeCursorEnter");if(gr.explicitlyCleared){if(!gB.markedSpans){break}else{--gu;continue}}}if(!gr.atomic){continue}if(gt){var gx=gr.find(gs<0?1:-1),gz;if(gs<0?gr.inclusiveRight:gr.inclusiveLeft){gx=gm(gA,gx,-gs,gx&&gx.line==gy.line?gB:null)}if(gx&&gx.line==gy.line&&(gz=ce(gx,gt))&&(gs<0?gz<0:gz>0)){return eM(gA,gx,gy,gs,gw)}}var gv=gr.find(gs<0?-1:1);if(gs<0?gr.inclusiveLeft:gr.inclusiveRight){gv=gm(gA,gv,gs,gv.line==gy.line?gB:null)}return gv?eM(gA,gv,gy,gs,gw):null}}}return gy}function bU(gv,gw,gt,gr,gq){var gs=gr||1;var gu=eM(gv,gw,gt,gs,gq)||(!gq&&eM(gv,gw,gt,gs,true))||eM(gv,gw,gt,-gs,gq)||(!gq&&eM(gv,gw,gt,-gs,true));if(!gu){gv.cantEdit=true;return W(gv.first,0)}return gu}function gm(gs,gt,gr,gq){if(gr<0&&gt.ch==0){if(gt.line>gs.first){return fP(gs,W(gt.line-1))}else{return null}}else{if(gr>0&&gt.ch==(gq||fk(gs,gt.line)).text.length){if(gt.line<gs.first+gs.size-1){return W(gt.line+1,0)}else{return null}}else{return new W(gt.line,gt.ch+gr)}}}function bB(gq){gq.display.input.showSelection(gq.display.input.prepareSelection())}function fN(gx,gq){var gw=gx.doc,gy={};var gv=gy.cursors=document.createDocumentFragment();var gr=gy.selection=document.createDocumentFragment();for(var gt=0;gt<gw.sel.ranges.length;gt++){if(gq===false&&gt==gw.sel.primIndex){continue}var gu=gw.sel.ranges[gt];if(gu.from().line>=gx.display.viewTo||gu.to().line<gx.display.viewFrom){continue}var gs=gu.empty();if(gs||gx.options.showCursorWhenSelecting){A(gx,gu.head,gv)}if(!gs){bC(gx,gu,gr)}}return gy}function A(gq,gt,gs){var gv=dU(gq,gt,"div",null,null,!gq.options.singleCursorHeightPerLine);var gu=gs.appendChild(f9("div","\u00a0","CodeMirror-cursor"));gu.style.left=gv.left+"px";gu.style.top=gv.top+"px";gu.style.height=Math.max(0,gv.bottom-gv.top)*gq.options.cursorHeight+"px";if(gv.other){var gr=gs.appendChild(f9("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gr.style.display="";gr.style.left=gv.other.left+"px";gr.style.top=gv.other.top+"px";gr.style.height=(gv.other.bottom-gv.other.top)*0.85+"px"}}function bC(gu,gA,gv){var gD=gu.display,gH=gu.doc;var gq=document.createDocumentFragment();var gz=e9(gu.display),gt=gz.left;var gE=Math.max(gD.sizerWidth,dl(gu)-gD.sizer.offsetLeft)-gz.right;function gB(gL,gK,gJ,gI){if(gK<0){gK=0}gK=Math.round(gK);gI=Math.round(gI);gq.appendChild(f9("div",null,"CodeMirror-selected","position: absolute; left: "+gL+"px; top: "+gK+"px; width: "+(gJ==null?gE-gL:gJ)+"px; height: "+(gI-gK)+"px"))}function gr(gJ,gL,gO){var gK=fk(gH,gJ);var gM=gK.text.length;var gP,gI;function gN(gR,gQ){return cI(gu,W(gJ,gR),"div",gK,gQ)}d5(a(gK),gL||0,gO==null?gM:gO,function(gX,gW,gQ){var gT=gN(gX,"left"),gU,gV,gS;if(gX==gW){gU=gT;gV=gS=gT.left}else{gU=gN(gW-1,"right");if(gQ=="rtl"){var gR=gT;gT=gU;gU=gR}gV=gT.left;gS=gU.right}if(gL==null&&gX==0){gV=gt}if(gU.top-gT.top>3){gB(gV,gT.top,null,gT.bottom);gV=gt;if(gT.bottom<gU.top){gB(gV,gT.bottom,null,gU.top)}}if(gO==null&&gW==gM){gS=gE}if(!gP||gT.top<gP.top||gT.top==gP.top&&gT.left<gP.left){gP=gT}if(!gI||gU.bottom>gI.bottom||gU.bottom==gI.bottom&&gU.right>gI.right){gI=gU}if(gV<gt+1){gV=gt}gB(gV,gU.top,gS-gV,gU.bottom)});return{start:gP,end:gI}}var gG=gA.from(),gF=gA.to();if(gG.line==gF.line){gr(gG.line,gG.ch,gF.ch)}else{var gs=fk(gH,gG.line),gx=fk(gH,gF.line);var gw=x(gs)==x(gx);var gy=gr(gG.line,gG.ch,gw?gs.text.length+1:null).end;var gC=gr(gF.line,gw?0:null,gF.ch).start;if(gw){if(gy.top<gC.top-2){gB(gy.right,gy.top,null,gy.bottom);gB(gt,gC.top,gC.left,gC.bottom)}else{gB(gy.right,gy.top,gC.left-gy.right,gy.bottom)}}if(gy.bottom<gC.top){gB(gt,gy.bottom,null,gC.top)}}gv.appendChild(gq)}function o(gq){if(!gq.state.focused){return}var gs=gq.display;clearInterval(gs.blinker);var gr=true;gs.cursorDiv.style.visibility="";if(gq.options.cursorBlinkRate>0){gs.blinker=setInterval(function(){gs.cursorDiv.style.visibility=(gr=!gr)?"":"hidden"},gq.options.cursorBlinkRate)}else{if(gq.options.cursorBlinkRate<0){gs.cursorDiv.style.visibility="hidden"}}}function eh(gq,gr){if(gq.doc.mode.startState&&gq.doc.frontier<gq.display.viewTo){gq.state.highlight.set(gr,cu(cO,gq))}}function cO(gq){var gu=gq.doc;if(gu.frontier<gu.first){gu.frontier=gu.first}if(gu.frontier>=gq.display.viewTo){return}var gs=+new Date+gq.options.workTime;var gt=b2(gu.mode,dC(gq,gu.frontier));var gr=[];gu.iter(gu.frontier,Math.min(gu.first+gu.size,gq.display.viewTo+500),function(gv){if(gu.frontier>=gq.display.viewFrom){var gy=gv.styles,gC=gv.text.length>gq.options.maxHighlightLength;var gA=fE(gq,gv,gC?b2(gu.mode,gt):gt,true);gv.styles=gA.styles;var gx=gv.styleClasses,gz=gA.classes;if(gz){gv.styleClasses=gz}else{if(gx){gv.styleClasses=null}}var gB=!gy||gy.length!=gv.styles.length||gx!=gz&&(!gx||!gz||gx.bgClass!=gz.bgClass||gx.textClass!=gz.textClass);for(var gw=0;!gB&&gw<gy.length;++gw){gB=gy[gw]!=gv.styles[gw]}if(gB){gr.push(gu.frontier)}gv.stateAfter=gC?gt:b2(gu.mode,gt)}else{if(gv.text.length<=gq.options.maxHighlightLength){dx(gq,gv.text,gt)}gv.stateAfter=gu.frontier%5==0?b2(gu.mode,gt):null}++gu.frontier;if(+new Date>gs){eh(gq,gq.options.workDelay);return true}});if(gr.length){cL(gq,function(){for(var gv=0;gv<gr.length;gv++){R(gq,gr[gv],"text")}})}}function cx(gw,gq,gt){var gr,gu,gv=gw.doc;var gs=gt?-1:gq-(gw.doc.mode.innerMode?1000:100);for(var gz=gq;gz>gs;--gz){if(gz<=gv.first){return gv.first}var gy=fk(gv,gz-1);if(gy.stateAfter&&(!gt||gz<=gv.frontier)){return gz}var gx=bS(gy.text,null,gw.options.tabSize);if(gu==null||gr>gx){gu=gz-1;gr=gx}}return gu}function dC(gq,gw,gr){var gu=gq.doc,gt=gq.display;if(!gu.mode.startState){return true}var gv=cx(gq,gw,gr),gs=gv>gu.first&&fk(gu,gv-1).stateAfter;if(!gs){gs=bZ(gu.mode)}else{gs=b2(gu.mode,gs)}gu.iter(gv,gw,function(gx){dx(gq,gx.text,gs);var gy=gv==gw-1||gv%5==0||gv>=gt.viewFrom&&gv<gt.viewTo;gx.stateAfter=gy?b2(gu.mode,gs):null;++gv});if(gr){gu.frontier=gv}return gs}function fd(gq){return gq.lineSpace.offsetTop}function bH(gq){return gq.mover.offsetHeight-gq.lineSpace.offsetHeight}function e9(gt){if(gt.cachedPaddingH){return gt.cachedPaddingH}var gs=bQ(gt.measure,f9("pre","x"));var gq=window.getComputedStyle?window.getComputedStyle(gs):gs.currentStyle;var gr={left:parseInt(gq.paddingLeft),right:parseInt(gq.paddingRight)};if(!isNaN(gr.left)&&!isNaN(gr.right)){gt.cachedPaddingH=gr}return gr}function cS(gq){return dJ-gq.display.nativeBarWidth}function dl(gq){return gq.display.scroller.clientWidth-cS(gq)-gq.display.barWidth}function cU(gq){return gq.display.scroller.clientHeight-cS(gq)-gq.display.barHeight}function cg(gx,gt,gw){var gs=gx.options.lineWrapping;var gu=gs&&dl(gx);if(!gt.measure.heights||gs&&gt.measure.width!=gu){var gv=gt.measure.heights=[];if(gs){gt.measure.width=gu;var gz=gt.text.firstChild.getClientRects();for(var gq=0;gq<gz.length-1;gq++){var gy=gz[gq],gr=gz[gq+1];if(Math.abs(gy.bottom-gr.bottom)>2){gv.push((gy.bottom+gr.top)/2-gw.top)}}}gv.push(gw.bottom-gw.top)}}function cs(gs,gq,gt){if(gs.line==gq){return{map:gs.measure.map,cache:gs.measure.cache}}for(var gr=0;gr<gs.rest.length;gr++){if(gs.rest[gr]==gq){return{map:gs.measure.maps[gr],cache:gs.measure.caches[gr]}}}for(var gr=0;gr<gs.rest.length;gr++){if(bM(gs.rest[gr])>gt){return{map:gs.measure.maps[gr],cache:gs.measure.caches[gr],before:true}}}}function c0(gq,gs){gs=x(gs);var gu=bM(gs);var gr=gq.display.externalMeasured=new bu(gq.doc,gs,gu);gr.lineN=gu;var gt=gr.built=eV(gq,gr);gr.text=gt.pre;bQ(gq.display.lineMeasure,gt.pre);return gr}function ej(gq,gr,gt,gs){return C(gq,a3(gq,gr),gt,gs)}function fg(gq,gs){if(gs>=gq.display.viewFrom&&gs<gq.display.viewTo){return gq.display.view[dr(gq,gs)]}var gr=gq.display.externalMeasured;if(gr&&gs>=gr.lineN&&gs<gr.lineN+gr.size){return gr}}function a3(gq,gs){var gt=bM(gs);var gr=fg(gq,gt);if(gr&&!gr.text){gr=null}else{if(gr&&gr.changes){ab(gq,gr,gt,fi(gq));gq.curOp.forceUpdate=true}}if(!gr){gr=c0(gq,gs)}var gu=cs(gr,gs,gt);return{line:gs,view:gr,rect:null,map:gu.map,cache:gu.cache,before:gu.before,hasHeights:false}}function C(gq,gw,gu,gr,gt){if(gw.before){gu=-1}var gs=gu+(gr||""),gv;if(gw.cache.hasOwnProperty(gs)){gv=gw.cache[gs]}else{if(!gw.rect){gw.rect=gw.view.text.getBoundingClientRect()}if(!gw.hasHeights){cg(gq,gw.view,gw.rect);gw.hasHeights=true}gv=j(gq,gw,gu,gr);if(!gv.bogus){gw.cache[gs]=gv}}return{left:gv.left,right:gv.right,top:gt?gv.rtop:gv.top,bottom:gt?gv.rbottom:gv.bottom}}var eE={left:0,right:0,top:0,bottom:0};function aK(gr,gq,gx){var gt,gs,gv,gy;for(var gw=0;gw<gr.length;gw+=3){var gu=gr[gw],gz=gr[gw+1];if(gq<gu){gs=0;gv=1;gy="left"}else{if(gq<gz){gs=gq-gu;gv=gs+1}else{if(gw==gr.length-3||gq==gz&&gr[gw+3]>gq){gv=gz-gu;gs=gv-1;if(gq>=gz){gy="right"}}}}if(gs!=null){gt=gr[gw+2];if(gu==gz&&gx==(gt.insertLeft?"left":"right")){gy=gx}if(gx=="left"&&gs==0){while(gw&&gr[gw-2]==gr[gw-3]&&gr[gw-1].insertLeft){gt=gr[(gw-=3)+2];gy="left"}}if(gx=="right"&&gs==gz-gu){while(gw<gr.length-3&&gr[gw+3]==gr[gw+4]&&!gr[gw+5].insertLeft){gt=gr[(gw+=3)+2];gy="right"}}break}}return{node:gt,start:gs,end:gv,collapse:gy,coverStart:gu,coverEnd:gz}}function j(gx,gH,gA,gv){var gy=aK(gH.map,gA,gv);var gF=gy.node,gu=gy.start,gt=gy.end,gq=gy.collapse;var gr;if(gF.nodeType==3){for(var gG=0;gG<4;gG++){while(gu&&fu(gH.line.text.charAt(gy.coverStart+gu))){--gu}while(gy.coverStart+gt<gy.coverEnd&&fu(gH.line.text.charAt(gy.coverStart+gt))){++gt}if(dK&&k<9&&gu==0&&gt==gy.coverEnd-gy.coverStart){gr=gF.parentNode.getBoundingClientRect()}else{if(dK&&gx.options.lineWrapping){var gs=ck(gF,gu,gt).getClientRects();if(gs.length){gr=gs[gv=="right"?gs.length-1:0]}else{gr=eE}}else{gr=ck(gF,gu,gt).getBoundingClientRect()||eE}}if(gr.left||gr.right||gu==0){break}gt=gu;gu=gu-1;gq="right"}if(dK&&k<11){gr=eR(gx.display.measure,gr)}}else{if(gu>0){gq=gv="right"}var gs;if(gx.options.lineWrapping&&(gs=gF.getClientRects()).length>1){gr=gs[gv=="right"?gs.length-1:0]}else{gr=gF.getBoundingClientRect()}}if(dK&&k<9&&!gu&&(!gr||!gr.left&&!gr.right)){var gw=gF.parentNode.getClientRects()[0];if(gw){gr={left:gw.left,right:gw.left+dD(gx.display),top:gw.top,bottom:gw.bottom}}else{gr=eE}}var gD=gr.top-gH.rect.top,gB=gr.bottom-gH.rect.top;var gJ=(gD+gB)/2;var gI=gH.view.measure.heights;for(var gG=0;gG<gI.length-1;gG++){if(gJ<gI[gG]){break}}var gE=gG?gI[gG-1]:0,gC=gI[gG];var gz={left:(gq=="right"?gr.right:gr.left)-gH.rect.left,right:(gq=="left"?gr.left:gr.right)-gH.rect.left,top:gE,bottom:gC};if(!gr.left&&!gr.right){gz.bogus=true}if(!gx.options.singleCursorHeightPerLine){gz.rtop=gD;gz.rbottom=gB}return gz}function eR(gs,gt){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aJ(gs)){return gt}var gr=screen.logicalXDPI/screen.deviceXDPI;var gq=screen.logicalYDPI/screen.deviceYDPI;return{left:gt.left*gr,right:gt.right*gr,top:gt.top*gq,bottom:gt.bottom*gq}}function at(gr){if(gr.measure){gr.measure.cache={};gr.measure.heights=null;if(gr.rest){for(var gq=0;gq<gr.rest.length;gq++){gr.measure.caches[gq]={}}}}}function aN(gq){gq.display.externalMeasure=null;d2(gq.display.lineMeasure);for(var gr=0;gr<gq.display.view.length;gr++){at(gq.display.view[gr])}}function aj(gq){aN(gq);gq.display.cachedCharWidth=gq.display.cachedTextHeight=gq.display.cachedPaddingH=null;if(!gq.options.lineWrapping){gq.display.maxLineChanged=true}gq.display.lineNumChars=null}function ct(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cr(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eU(gw,gt,gv,gr){if(gt.widgets){for(var gs=0;gs<gt.widgets.length;++gs){if(gt.widgets[gs].above){var gy=cX(gt.widgets[gs]);gv.top+=gy;gv.bottom+=gy}}}if(gr=="line"){return gv}if(!gr){gr="local"}var gu=bL(gt);if(gr=="local"){gu+=fd(gw.display)}else{gu-=gw.display.viewOffset}if(gr=="page"||gr=="window"){var gq=gw.display.lineSpace.getBoundingClientRect();gu+=gq.top+(gr=="window"?0:cr());var gx=gq.left+(gr=="window"?0:ct());gv.left+=gx;gv.right+=gx}gv.top+=gu;gv.bottom+=gu;return gv}function gl(gr,gu,gs){if(gs=="div"){return gu}var gw=gu.left,gv=gu.top;if(gs=="page"){gw-=ct();gv-=cr()}else{if(gs=="local"||!gs){var gt=gr.display.sizer.getBoundingClientRect();gw+=gt.left;gv+=gt.top}}var gq=gr.display.lineSpace.getBoundingClientRect();return{left:gw-gq.left,top:gv-gq.top}}function cI(gq,gu,gt,gs,gr){if(!gs){gs=fk(gq.doc,gu.line)}return eU(gq,gs,ej(gq,gs,gu.ch,gr),gt)}function dU(gz,gy,gs,gw,gB,gx){gw=gw||fk(gz.doc,gy.line);if(!gB){gB=a3(gz,gw)}function gu(gE,gD){var gC=C(gz,gB,gE,gD?"right":"left",gx);if(gD){gC.left=gC.right}else{gC.right=gC.left}return eU(gz,gw,gC,gs)}function gA(gF,gC){var gD=gv[gC],gE=gD.level%2;if(gF==dy(gD)&&gC&&gD.level<gv[gC-1].level){gD=gv[--gC];gF=gk(gD)-(gD.level%2?0:1);gE=true}else{if(gF==gk(gD)&&gC<gv.length-1&&gD.level<gv[gC+1].level){gD=gv[++gC];gF=dy(gD)-gD.level%2;gE=false}}if(gE&&gF==gD.to&&gF>gD.from){return gu(gF-1)}return gu(gF,gE)}var gv=a(gw),gq=gy.ch;if(!gv){return gu(gq)}var gr=aF(gv,gq);var gt=gA(gq,gr);if(e6!=null){gt.other=gA(gq,e6)}return gt}function dH(gq,gu){var gt=0,gu=fP(gq.doc,gu);if(!gq.options.lineWrapping){gt=dD(gq.display)*gu.ch}var gr=fk(gq.doc,gu.line);var gs=bL(gr)+fd(gq.display);return{left:gt,right:gt,top:gs,bottom:gs+gr.height}}function f8(gq,gr,gs,gu){var gt=W(gq,gr);gt.xRel=gu;if(gs){gt.outside=true}return gt}function fU(gx,gu,gt){var gw=gx.doc;gt+=gx.display.viewOffset;if(gt<0){return f8(gw.first,0,true,-1)}var gs=bF(gw,gt),gy=gw.first+gw.size-1;if(gs>gy){return f8(gw.first+gw.size-1,fk(gw,gy).text.length,true,1)}if(gu<0){gu=0}var gr=fk(gw,gs);for(;;){var gz=cY(gx,gr,gs,gu,gt);var gv=ex(gr);var gq=gv&&gv.find(0,true);if(gv&&(gz.ch>gq.from.ch||gz.ch==gq.from.ch&&gz.xRel>0)){gs=bM(gr=gq.to.line)}else{return gz}}}function cY(gA,gs,gD,gC,gB){var gz=gB-bL(gs);var gw=false,gJ=2*gA.display.wrapper.clientWidth;var gG=a3(gA,gs);function gN(gP){var gQ=dU(gA,W(gD,gP),"line",gs,gG);gw=true;if(gz>gQ.bottom){return gQ.left-gJ}else{if(gz<gQ.top){return gQ.left+gJ}else{gw=false}}return gQ.left}var gF=a(gs),gI=gs.text.length;var gK=cD(gs),gt=cR(gs);var gH=gN(gK),gq=gw,gr=gN(gt),gv=gw;if(gC>gr){return f8(gD,gt,gv,1)}for(;;){if(gF?gt==gK||gt==u(gs,gK,1):gt-gK<=1){var gE=gC<gH||gC-gH<=gr-gC?gK:gt;var gM=gC-(gE==gK?gH:gr);while(fu(gs.text.charAt(gE))){++gE}var gy=f8(gD,gE,gE==gK?gq:gv,gM<-1?-1:gM>1?1:0);return gy}var gx=Math.ceil(gI/2),gO=gK+gx;if(gF){gO=gK;for(var gL=0;gL<gx;++gL){gO=u(gs,gO,1)}}var gu=gN(gO);if(gu>gC){gt=gO;gr=gu;if(gv=gw){gr+=1000}gI=gx}else{gK=gO;gH=gu;gq=gw;gI-=gx}}}var aG;function aX(gs){if(gs.cachedTextHeight!=null){return gs.cachedTextHeight}if(aG==null){aG=f9("pre");for(var gr=0;gr<49;++gr){aG.appendChild(document.createTextNode("x"));aG.appendChild(f9("br"))}aG.appendChild(document.createTextNode("x"))}bQ(gs.measure,aG);var gq=aG.offsetHeight/50;if(gq>3){gs.cachedTextHeight=gq}d2(gs.measure);return gq||1}function dD(gu){if(gu.cachedCharWidth!=null){return gu.cachedCharWidth}var gq=f9("span","xxxxxxxxxx");var gt=f9("pre",[gq]);bQ(gu.measure,gt);var gs=gq.getBoundingClientRect(),gr=(gs.right-gs.left)/10;if(gr>2){gu.cachedCharWidth=gr}return gr||10}var bo=null;var d9=0;function cH(gq){gq.curOp={cm:gq,viewChanged:false,startHeight:gq.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++d9};if(bo){bo.ops.push(gq.curOp)}else{gq.curOp.ownsGroup=bo={ops:[gq.curOp],delayedCallbacks:[]}}}function cT(gt){var gs=gt.delayedCallbacks,gr=0;do{for(;gr<gs.length;gr++){gs[gr].call(null)}for(var gq=0;gq<gt.ops.length;gq++){var gu=gt.ops[gq];if(gu.cursorActivityHandlers){while(gu.cursorActivityCalled<gu.cursorActivityHandlers.length){gu.cursorActivityHandlers[gu.cursorActivityCalled++].call(null,gu.cm)}}}}while(gr<gs.length)}function al(gq){var gt=gq.curOp,gs=gt.ownsGroup;if(!gs){return}try{cT(gs)}finally{bo=null;for(var gr=0;gr<gs.ops.length;gr++){gs.ops[gr].cm.curOp=null}cJ(gs)}}function cJ(gs){var gr=gs.ops;for(var gq=0;gq<gr.length;gq++){b4(gr[gq])}for(var gq=0;gq<gr.length;gq++){ap(gr[gq])}for(var gq=0;gq<gr.length;gq++){b1(gr[gq])}for(var gq=0;gq<gr.length;gq++){ao(gr[gq])}for(var gq=0;gq<gr.length;gq++){e4(gr[gq])}}function b4(gs){var gq=gs.cm,gr=gq.display;J(gq);if(gs.updateMaxLine){h(gq)}gs.mustUpdate=gs.viewChanged||gs.forceUpdate||gs.scrollTop!=null||gs.scrollToPos&&(gs.scrollToPos.from.line<gr.viewFrom||gs.scrollToPos.to.line>=gr.viewTo)||gr.maxLineChanged&&gq.options.lineWrapping;gs.update=gs.mustUpdate&&new aH(gq,gs.mustUpdate&&{top:gs.scrollTop,ensure:gs.scrollToPos},gs.forceUpdate)}function ap(gq){gq.updatedDisplay=gq.mustUpdate&&B(gq.cm,gq.update)}function b1(gs){var gq=gs.cm,gr=gq.display;if(gs.updatedDisplay){a8(gq)}gs.barMeasure=dA(gq);if(gr.maxLineChanged&&!gq.options.lineWrapping){gs.adjustWidthTo=ej(gq,gr.maxLine,gr.maxLine.text.length).left+3;gq.display.sizerWidth=gs.adjustWidthTo;gs.barMeasure.scrollWidth=Math.max(gr.scroller.clientWidth,gr.sizer.offsetLeft+gs.adjustWidthTo+cS(gq)+gq.display.barWidth);gs.maxScrollLeft=Math.max(0,gr.sizer.offsetLeft+gs.adjustWidthTo-dl(gq))}if(gs.updatedDisplay||gs.selectionChanged){gs.preparedSelection=gr.input.prepareSelection()}}function ao(gr){var gq=gr.cm;if(gr.adjustWidthTo!=null){gq.display.sizer.style.minWidth=gr.adjustWidthTo+"px";if(gr.maxScrollLeft<gq.doc.scrollLeft){bD(gq,Math.min(gq.display.scroller.scrollLeft,gr.maxScrollLeft),true)}gq.display.maxLineChanged=false}if(gr.preparedSelection){gq.display.input.showSelection(gr.preparedSelection)}if(gr.updatedDisplay||gr.startHeight!=gq.doc.height){e2(gq,gr.barMeasure)}if(gr.updatedDisplay){dz(gq,gr.barMeasure)}if(gr.selectionChanged){o(gq)}if(gq.state.focused&&gr.updateInput){gq.display.input.reset(gr.typing)}if(gr.focus&&gr.focus==dO()&&(!document.hasFocus||document.hasFocus())){r(gr.cm)}}function e4(gx){var gq=gx.cm,gv=gq.display,gu=gq.doc;if(gx.updatedDisplay){ci(gq,gx.update)}if(gv.wheelStartX!=null&&(gx.scrollTop!=null||gx.scrollLeft!=null||gx.scrollToPos)){gv.wheelStartX=gv.wheelStartY=null}if(gx.scrollTop!=null&&(gv.scroller.scrollTop!=gx.scrollTop||gx.forceScroll)){gu.scrollTop=Math.max(0,Math.min(gv.scroller.scrollHeight-gv.scroller.clientHeight,gx.scrollTop));gv.scrollbars.setScrollTop(gu.scrollTop);gv.scroller.scrollTop=gu.scrollTop}if(gx.scrollLeft!=null&&(gv.scroller.scrollLeft!=gx.scrollLeft||gx.forceScroll)){gu.scrollLeft=Math.max(0,Math.min(gv.scroller.scrollWidth-gv.scroller.clientWidth,gx.scrollLeft));gv.scrollbars.setScrollLeft(gu.scrollLeft);gv.scroller.scrollLeft=gu.scrollLeft;eH(gq)}if(gx.scrollToPos){var gt=D(gq,fP(gu,gx.scrollToPos.from),fP(gu,gx.scrollToPos.to),gx.scrollToPos.margin);if(gx.scrollToPos.isCursor&&gq.state.focused){d7(gq,gt)}}var gs=gx.maybeHiddenMarkers,gw=gx.maybeUnhiddenMarkers;if(gs){for(var gr=0;gr<gs.length;++gr){if(!gs[gr].lines.length){aD(gs[gr],"hide")}}}if(gw){for(var gr=0;gr<gw.length;++gr){if(gw[gr].lines.length){aD(gw[gr],"unhide")}}}if(gv.wrapper.offsetHeight){gu.scrollTop=gq.display.scroller.scrollTop}if(gx.changeObjs){aD(gq,"changes",gq,gx.changeObjs)}if(gx.update){gx.update.finish()}}function cL(gq,gr){if(gq.curOp){return gr()}cH(gq);try{return gr()}finally{al(gq)}}function c1(gq,gr){return function(){if(gq.curOp){return gr.apply(gq,arguments)}cH(gq);try{return gr.apply(gq,arguments)}finally{al(gq)}}}function c7(gq){return function(){if(this.curOp){return gq.apply(this,arguments)}cH(this);try{return gq.apply(this,arguments)}finally{al(this)}}}function cC(gq){return function(){var gr=this.cm;if(!gr||gr.curOp){return gq.apply(this,arguments)}cH(gr);try{return gq.apply(this,arguments)}finally{al(gr)}}}function bu(gs,gq,gr){this.line=gq;this.rest=g(gq);this.size=this.rest?bM(fL(this.rest))-gr+1:1;this.node=this.text=null;this.hidden=fB(gs,gq)}function eZ(gq,gw,gv){var gu=[],gs;for(var gt=gw;gt<gv;gt=gs){var gr=new bu(gq.doc,fk(gq.doc,gt),gt);gs=gt+gr.size;gu.push(gr)}return gu}function ah(gx,gv,gw,gy){if(gv==null){gv=gx.doc.first}if(gw==null){gw=gx.doc.first+gx.doc.size}if(!gy){gy=0}var gs=gx.display;if(gy&&gw<gs.viewTo&&(gs.updateLineNumbers==null||gs.updateLineNumbers>gv)){gs.updateLineNumbers=gv}gx.curOp.viewChanged=true;if(gv>=gs.viewTo){if(a6&&aV(gx.doc,gv)<gs.viewTo){eA(gx)}}else{if(gw<=gs.viewFrom){if(a6&&d3(gx.doc,gw+gy)>gs.viewFrom){eA(gx)}else{gs.viewFrom+=gy;gs.viewTo+=gy}}else{if(gv<=gs.viewFrom&&gw>=gs.viewTo){eA(gx)}else{if(gv<=gs.viewFrom){var gu=de(gx,gw,gw+gy,1);if(gu){gs.view=gs.view.slice(gu.index);gs.viewFrom=gu.lineN;gs.viewTo+=gy}else{eA(gx)}}else{if(gw>=gs.viewTo){var gu=de(gx,gv,gv,-1);if(gu){gs.view=gs.view.slice(0,gu.index);gs.viewTo=gu.lineN}else{eA(gx)}}else{var gt=de(gx,gv,gv,-1);var gr=de(gx,gw,gw+gy,1);if(gt&&gr){gs.view=gs.view.slice(0,gt.index).concat(eZ(gx,gt.lineN,gr.lineN)).concat(gs.view.slice(gr.index));gs.viewTo+=gy}else{eA(gx)}}}}}}var gq=gs.externalMeasured;if(gq){if(gw<gq.lineN){gq.lineN+=gy}else{if(gv<gq.lineN+gq.size){gs.externalMeasured=null}}}}function R(gr,gs,gv){gr.curOp.viewChanged=true;var gw=gr.display,gu=gr.display.externalMeasured;if(gu&&gs>=gu.lineN&&gs<gu.lineN+gu.size){gw.externalMeasured=null}if(gs<gw.viewFrom||gs>=gw.viewTo){return}var gt=gw.view[dr(gr,gs)];if(gt.node==null){return}var gq=gt.changes||(gt.changes=[]);if(dh(gq,gv)==-1){gq.push(gv)}}function eA(gq){gq.display.viewFrom=gq.display.viewTo=gq.doc.first;gq.display.view=[];gq.display.viewOffset=0}function dr(gq,gt){if(gt>=gq.display.viewTo){return null}gt-=gq.display.viewFrom;if(gt<0){return null}var gr=gq.display.view;for(var gs=0;gs<gr.length;gs++){gt-=gr[gs].size;if(gt<0){return gs}}}function de(gy,gs,gu,gr){var gv=dr(gy,gs),gx,gw=gy.display.view;if(!a6||gu==gy.doc.first+gy.doc.size){return{index:gv,lineN:gu}}for(var gt=0,gq=gy.display.viewFrom;gt<gv;gt++){gq+=gw[gt].size}if(gq!=gs){if(gr>0){if(gv==gw.length-1){return null}gx=(gq+gw[gv].size)-gs;gv++}else{gx=gq-gs}gs+=gx;gu+=gx}while(aV(gy.doc,gu)!=gu){if(gv==(gr<0?0:gw.length-1)){return null}gu+=gr*gw[gv-(gr<0?1:0)].size;gv+=gr}return{index:gv,lineN:gu}}function cQ(gq,gu,gt){var gs=gq.display,gr=gs.view;if(gr.length==0||gu>=gs.viewTo||gt<=gs.viewFrom){gs.view=eZ(gq,gu,gt);gs.viewFrom=gu}else{if(gs.viewFrom>gu){gs.view=eZ(gq,gu,gs.viewFrom).concat(gs.view)}else{if(gs.viewFrom<gu){gs.view=gs.view.slice(dr(gq,gu))}}gs.viewFrom=gu;if(gs.viewTo<gt){gs.view=gs.view.concat(eZ(gq,gs.viewTo,gt))}else{if(gs.viewTo>gt){gs.view=gs.view.slice(0,dr(gq,gt))}}}gs.viewTo=gt}function db(gq){var gr=gq.display.view,gu=0;for(var gt=0;gt<gr.length;gt++){var gs=gr[gt];if(!gs.hidden&&(!gs.node||gs.changes)){++gu}}return gu}function fW(gr){var gv=gr.display;bW(gv.scroller,"mousedown",c1(gr,ey));if(dK&&k<11){bW(gv.scroller,"dblclick",c1(gr,function(gz){if(aQ(gr,gz)){return}var gA=cm(gr,gz);if(!gA||l(gr,gz)||ba(gr.display,gz)){return}cF(gz);var gy=gr.findWordAt(gA);f3(gr.doc,gy.anchor,gy.head)}))}else{bW(gv.scroller,"dblclick",function(gy){aQ(gr,gy)||cF(gy)})}if(!gg){bW(gv.scroller,"contextmenu",function(gy){ax(gr,gy)})}var gx,gq={end:0};function gw(){if(gv.activeTouch){gx=setTimeout(function(){gv.activeTouch=null},1000);gq=gv.activeTouch;gq.end=+new Date}}function gt(gy){if(gy.touches.length!=1){return false}var gz=gy.touches[0];return gz.radiusX<=1&&gz.radiusY<=1}function gs(gB,gy){if(gy.left==null){return true}var gA=gy.left-gB.left,gz=gy.top-gB.top;return gA*gA+gz*gz>20*20}bW(gv.scroller,"touchstart",function(gz){if(!aQ(gr,gz)&&!gt(gz)){clearTimeout(gx);var gy=+new Date;gv.activeTouch={start:gy,moved:false,prev:gy-gq.end<=300?gq:null};if(gz.touches.length==1){gv.activeTouch.left=gz.touches[0].pageX;gv.activeTouch.top=gz.touches[0].pageY}}});bW(gv.scroller,"touchmove",function(){if(gv.activeTouch){gv.activeTouch.moved=true}});bW(gv.scroller,"touchend",function(gz){var gB=gv.activeTouch;if(gB&&!ba(gv,gz)&&gB.left!=null&&!gB.moved&&new Date-gB.start<300){var gA=gr.coordsChar(gv.activeTouch,"page"),gy;if(!gB.prev||gs(gB,gB.prev)){gy=new dY(gA,gA)}else{if(!gB.prev.prev||gs(gB,gB.prev.prev)){gy=gr.findWordAt(gA)}else{gy=new dY(W(gA.line,0),fP(gr.doc,W(gA.line+1,0)))}}gr.setSelection(gy.anchor,gy.head);gr.focus();cF(gz)}gw()});bW(gv.scroller,"touchcancel",gw);bW(gv.scroller,"scroll",function(){if(gv.scroller.clientHeight){N(gr,gv.scroller.scrollTop);bD(gr,gv.scroller.scrollLeft,true);aD(gr,"scroll",gr)}});bW(gv.scroller,"mousewheel",function(gy){b(gr,gy)});bW(gv.scroller,"DOMMouseScroll",function(gy){b(gr,gy)});bW(gv.wrapper,"scroll",function(){gv.wrapper.scrollTop=gv.wrapper.scrollLeft=0});gv.dragFunctions={enter:function(gy){if(!aQ(gr,gy)){eu(gy)}},over:function(gy){if(!aQ(gr,gy)){gn(gr,gy);eu(gy)}},start:function(gy){Q(gr,gy)},drop:c1(gr,bj),leave:function(gy){if(!aQ(gr,gy)){da(gr)}}};var gu=gv.input.getField();bW(gu,"keyup",function(gy){bh.call(gr,gy)});bW(gu,"keydown",c1(gr,p));bW(gu,"keypress",c1(gr,cw));bW(gu,"focus",cu(cA,gr));bW(gu,"blur",cu(aU,gr))}function f7(gr,gu,gs){var gv=gs&&gs!=H.Init;if(!gu!=!gv){var gt=gr.display.dragFunctions;var gq=gu?bW:ef;gq(gr.display.scroller,"dragstart",gt.start);gq(gr.display.scroller,"dragenter",gt.enter);gq(gr.display.scroller,"dragover",gt.over);gq(gr.display.scroller,"dragleave",gt.leave);gq(gr.display.scroller,"drop",gt.drop)}}function aS(gq){var gr=gq.display;if(gr.lastWrapHeight==gr.wrapper.clientHeight&&gr.lastWrapWidth==gr.wrapper.clientWidth){return}gr.cachedCharWidth=gr.cachedTextHeight=gr.cachedPaddingH=null;gr.scrollbarsClipped=false;gq.setSize()}function ba(gr,gq){for(var gs=L(gq);gs!=gr.wrapper;gs=gs.parentNode){if(!gs||(gs.nodeType==1&&gs.getAttribute("cm-ignore-events")=="true")||(gs.parentNode==gr.sizer&&gs!=gr.mover)){return true}}}function cm(gz,gu,gr,gs){var gv=gz.display;if(!gr&&L(gu).getAttribute("cm-not-content")=="true"){return null}var gy,gw,gq=gv.lineSpace.getBoundingClientRect();try{gy=gu.clientX-gq.left;gw=gu.clientY-gq.top}catch(gu){return null}var gx=fU(gz,gy,gw),gA;if(gs&&gx.xRel==1&&(gA=fk(gz.doc,gx.line).text).length==gx.ch){var gt=bS(gA,gA.length,gz.options.tabSize)-gA.length;gx=W(gx.line,Math.max(0,Math.round((gy-e9(gz.display).left)/dD(gz.display))-gt))}return gx}function ey(gs){var gq=this,gr=gq.display;if(aQ(gq,gs)||gr.activeTouch&&gr.input.supportsTouch()){return}gr.shift=gs.shiftKey;if(ba(gr,gs)){if(!cZ){gr.scroller.draggable=false;setTimeout(function(){gr.scroller.draggable=true},100)}return}if(l(gq,gs)){return}var gt=cm(gq,gs);window.focus();switch(fT(gs)){case 1:if(gq.state.selectingText){gq.state.selectingText(gs)}else{if(gt){aw(gq,gs,gt)}else{if(L(gs)==gr.scroller){cF(gs)}}}break;case 2:if(cZ){gq.state.lastMiddleDown=+new Date}if(gt){f3(gq.doc,gt)}setTimeout(function(){gr.input.focus()},20);cF(gs);break;case 3:if(gg){ax(gq,gs)}else{ak(gq)}break}}var dn,dd;function aw(gr,gw,gx){if(dK){setTimeout(cu(r,gr),0)}else{gr.curOp.focus=dO()}var gs=+new Date,gu;if(dd&&dd.time>gs-400&&ce(dd.pos,gx)==0){gu="triple"}else{if(dn&&dn.time>gs-400&&ce(dn.pos,gx)==0){gu="double";dd={time:gs,pos:gx}}else{gu="single";dn={time:gs,pos:gx}}}var gv=gr.doc.sel,gq=b6?gw.metaKey:gw.ctrlKey,gt;if(gr.options.dragDrop&&eP&&!gr.isReadOnly()&&gu=="single"&&(gt=gv.contains(gx))>-1&&(ce((gt=gv.ranges[gt]).from(),gx)<0||gx.xRel>0)&&(ce(gt.to(),gx)>0||gx.xRel<0)){a2(gr,gw,gx,gq)}else{m(gr,gw,gx,gu,gq)}}function a2(gs,gv,gw,gr){var gu=gs.display,gt=+new Date;var gq=c1(gs,function(gx){if(cZ){gu.scroller.draggable=false}gs.state.draggingText=false;ef(document,"mouseup",gq);ef(gu.scroller,"drop",gq);if(Math.abs(gv.clientX-gx.clientX)+Math.abs(gv.clientY-gx.clientY)<10){cF(gx);if(!gr&&+new Date-200<gt){f3(gs.doc,gw)}if(cZ||dK&&k==9){setTimeout(function(){document.body.focus();gu.input.focus()},20)}else{gu.input.focus()}}});if(cZ){gu.scroller.draggable=true}gs.state.draggingText=gq;if(gu.scroller.dragDrop){gu.scroller.dragDrop()}bW(document,"mouseup",gq);bW(gu.scroller,"drop",gq)}function m(gu,gI,gt,gr,gw){var gF=gu.display,gK=gu.doc;cF(gI);var gs,gJ,gv=gK.sel,gq=gv.ranges;if(gw&&!gI.shiftKey){gJ=gK.sel.contains(gt);if(gJ>-1){gs=gq[gJ]}else{gs=new dY(gt,gt)}}else{gs=gK.sel.primary();gJ=gK.sel.primIndex}if(fO?gI.shiftKey&&gI.metaKey:gI.altKey){gr="rect";if(!gw){gs=new dY(gt,gt)}gt=cm(gu,gI,true,true);gJ=-1}else{if(gr=="double"){var gG=gu.findWordAt(gt);if(gu.display.shift||gK.extend){gs=fA(gK,gs,gG.anchor,gG.head)}else{gs=gG}}else{if(gr=="triple"){var gz=new dY(W(gt.line,0),fP(gK,W(gt.line+1,0)));if(gu.display.shift||gK.extend){gs=fA(gK,gs,gz.anchor,gz.head)}else{gs=gz}}else{gs=fA(gK,gs,gt)}}}if(!gw){gJ=0;bT(gK,new ga([gs],0),M);gv=gK.sel}else{if(gJ==-1){gJ=gq.length;bT(gK,cv(gq.concat([gs]),gJ),{scroll:false,origin:"*mouse"})}else{if(gq.length>1&&gq[gJ].empty()&&gr=="single"&&!gI.shiftKey){bT(gK,cv(gq.slice(0,gJ).concat(gq.slice(gJ+1)),0),{scroll:false,origin:"*mouse"});gv=gK.sel}else{e(gK,gJ,gs,M)}}}var gE=gt;function gD(gV){if(ce(gE,gV)==0){return}gE=gV;if(gr=="rect"){var gM=[],gS=gu.options.tabSize;var gL=bS(fk(gK,gt.line).text,gt.ch,gS);var gY=bS(fk(gK,gV.line).text,gV.ch,gS);var gN=Math.min(gL,gY),gW=Math.max(gL,gY);for(var gZ=Math.min(gt.line,gV.line),gP=Math.min(gu.lastLine(),Math.max(gt.line,gV.line));gZ<=gP;gZ++){var gX=fk(gK,gZ).text,gO=et(gX,gN,gS);if(gN==gW){gM.push(new dY(W(gZ,gO),W(gZ,gO)))}else{if(gX.length>gO){gM.push(new dY(W(gZ,gO),W(gZ,et(gX,gW,gS))))}}}if(!gM.length){gM.push(new dY(gt,gt))}bT(gK,cv(gv.ranges.slice(0,gJ).concat(gM),gJ),{origin:"*mouse",scroll:false});gu.scrollIntoView(gV)}else{var gT=gs;var gQ=gT.anchor,gU=gV;if(gr!="single"){if(gr=="double"){var gR=gu.findWordAt(gV)}else{var gR=new dY(W(gV.line,0),fP(gK,W(gV.line+1,0)))}if(ce(gR.anchor,gQ)>0){gU=gR.head;gQ=aq(gT.from(),gR.anchor)}else{gU=gR.anchor;gQ=bw(gT.to(),gR.head)}}var gM=gv.ranges.slice(0);gM[gJ]=new dY(fP(gK,gQ),gU);bT(gK,cv(gM,gJ),M)}}var gB=gF.wrapper.getBoundingClientRect();var gx=0;function gH(gN){var gL=++gx;var gP=cm(gu,gN,true,gr=="rect");if(!gP){return}if(ce(gP,gE)!=0){gu.curOp.focus=dO();gD(gP);var gO=b5(gF,gK);if(gP.line>=gO.to||gP.line<gO.from){setTimeout(c1(gu,function(){if(gx==gL){gH(gN)}}),150)}}else{var gM=gN.clientY<gB.top?-20:gN.clientY>gB.bottom?20:0;if(gM){setTimeout(c1(gu,function(){if(gx!=gL){return}gF.scroller.scrollTop+=gM;gH(gN)}),50)}}}function gA(gL){gu.state.selectingText=false;gx=Infinity;cF(gL);gF.input.focus();ef(document,"mousemove",gC);ef(document,"mouseup",gy);gK.history.lastSelOrigin=null}var gC=c1(gu,function(gL){if(!fT(gL)){gA(gL)}else{gH(gL)}});var gy=c1(gu,gA);gu.state.selectingText=gy;bW(document,"mousemove",gC);bW(document,"mouseup",gy)}function go(gA,gw,gy,gz){try{var gr=gw.clientX,gq=gw.clientY}catch(gw){return false}if(gr>=Math.floor(gA.display.gutters.getBoundingClientRect().right)){return false}if(gz){cF(gw)}var gx=gA.display;var gv=gx.lineDiv.getBoundingClientRect();if(gq>gv.bottom||!fn(gA,gy)){return bK(gw)}gq-=gv.top-gx.viewOffset;for(var gt=0;gt<gA.options.gutters.length;++gt){var gu=gx.gutters.childNodes[gt];if(gu&&gu.getBoundingClientRect().right>=gr){var gB=bF(gA.doc,gq);var gs=gA.options.gutters[gt];aD(gA,gy,gA,gB,gs,gw);return bK(gw)}}}function l(gq,gr){return go(gq,gr,"gutterClick",true)}var ag=0;function bj(gw){var gy=this;da(gy);if(aQ(gy,gw)||ba(gy.display,gw)){return}cF(gw);if(dK){ag=+new Date}var gx=cm(gy,gw,true),gq=gw.dataTransfer.files;if(!gx||gy.isReadOnly()){return}if(gq&&gq.length&&window.FileReader&&window.File){var gs=gq.length,gz=Array(gs),gr=0;var gu=function(gC,gB){if(gy.options.allowDropFileTypes&&dh(gy.options.allowDropFileTypes,gC.type)==-1){return}var gA=new FileReader;gA.onload=c1(gy,function(){var gD=gA.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(gD)){gD=""}gz[gB]=gD;if(++gr==gs){gx=fP(gy.doc,gx);var gE={from:gx,to:gx,text:gy.doc.splitLines(gz.join(gy.doc.lineSeparator())),origin:"paste"};bf(gy.doc,gE);fc(gy.doc,eW(gx,cW(gE)))}});gA.readAsText(gC)};for(var gv=0;gv<gs;++gv){gu(gq[gv],gv)}}else{if(gy.state.draggingText&&gy.doc.sel.contains(gx)>-1){gy.state.draggingText(gw);setTimeout(function(){gy.display.input.focus()},20);return}try{var gz=gw.dataTransfer.getData("Text");if(gz){if(gy.state.draggingText&&!(b6?gw.altKey:gw.ctrlKey)){var gt=gy.listSelections()}es(gy.doc,eW(gx,gx));if(gt){for(var gv=0;gv<gt.length;++gv){a0(gy.doc,"",gt[gv].anchor,gt[gv].head,"drag")}}gy.replaceSelection(gz,"around","paste");gy.display.input.focus()}}catch(gw){}}}function Q(gq,gs){if(dK&&(!gq.state.draggingText||+new Date-ag<100)){eu(gs);return}if(aQ(gq,gs)||ba(gq.display,gs)){return}gs.dataTransfer.setData("Text",gq.getSelection());if(gs.dataTransfer.setDragImage&&!aB){var gr=f9("img",null,null,"position: fixed; left: 0; top: 0;");gr.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(d4){gr.width=gr.height=1;gq.display.wrapper.appendChild(gr);gr._top=gr.offsetTop}gs.dataTransfer.setDragImage(gr,0,0);if(d4){gr.parentNode.removeChild(gr)}}}function gn(gq,gr){var gt=cm(gq,gr);if(!gt){return}var gs=document.createDocumentFragment();A(gq,gt,gs);if(!gq.display.dragCursor){gq.display.dragCursor=f9("div",null,"CodeMirror-cursors CodeMirror-dragcursors");gq.display.lineSpace.insertBefore(gq.display.dragCursor,gq.display.cursorDiv)}bQ(gq.display.dragCursor,gs)}function da(gq){if(gq.display.dragCursor){gq.display.lineSpace.removeChild(gq.display.dragCursor);gq.display.dragCursor=null}}function N(gq,gr){if(Math.abs(gq.doc.scrollTop-gr)<2){return}gq.doc.scrollTop=gr;if(!cn){dT(gq,{top:gr})}if(gq.display.scroller.scrollTop!=gr){gq.display.scroller.scrollTop=gr}gq.display.scrollbars.setScrollTop(gr);if(cn){dT(gq)}eh(gq,100)}function bD(gq,gs,gr){if(gr?gs==gq.doc.scrollLeft:Math.abs(gq.doc.scrollLeft-gs)<2){return}gs=Math.min(gs,gq.display.scroller.scrollWidth-gq.display.scroller.clientWidth);gq.doc.scrollLeft=gs;eH(gq);if(gq.display.scroller.scrollLeft!=gs){gq.display.scroller.scrollLeft=gs}gq.display.scrollbars.setScrollLeft(gs)}var fr=0,cf=null;if(dK){cf=-0.53}else{if(cn){cf=15}else{if(dc){cf=-0.7}else{if(aB){cf=-1/3}}}}var cP=function(gs){var gr=gs.wheelDeltaX,gq=gs.wheelDeltaY;if(gr==null&&gs.detail&&gs.axis==gs.HORIZONTAL_AXIS){gr=gs.detail}if(gq==null&&gs.detail&&gs.axis==gs.VERTICAL_AXIS){gq=gs.detail}else{if(gq==null){gq=gs.wheelDelta}}return{x:gr,y:gq}};H.wheelEventPixels=function(gq){var gr=cP(gq);gr.x*=cf;gr.y*=cf;return gr};function b(gA,gu){var gC=cP(gu),gE=gC.x,gD=gC.y;var gw=gA.display,gz=gw.scroller;var gt=gz.scrollWidth>gz.clientWidth;var gs=gz.scrollHeight>gz.clientHeight;if(!(gE&&gt||gD&&gs)){return}if(gD&&b6&&cZ){outer:for(var gB=gu.target,gy=gw.view;gB!=gz;gB=gB.parentNode){for(var gr=0;gr<gy.length;gr++){if(gy[gr].node==gB){gA.display.currentWheelTarget=gB;break outer}}}}if(gE&&!cn&&!d4&&cf!=null){if(gD&&gs){N(gA,Math.max(0,Math.min(gz.scrollTop+gD*cf,gz.scrollHeight-gz.clientHeight)))}bD(gA,Math.max(0,Math.min(gz.scrollLeft+gE*cf,gz.scrollWidth-gz.clientWidth)));if(!gD||(gD&&gs)){cF(gu)}gw.wheelStartX=null;return}if(gD&&cf!=null){var gq=gD*cf;var gx=gA.doc.scrollTop,gv=gx+gw.wrapper.clientHeight;if(gq<0){gx=Math.max(0,gx+gq-50)}else{gv=Math.min(gA.doc.height,gv+gq+50)}dT(gA,{top:gx,bottom:gv})}if(fr<20){if(gw.wheelStartX==null){gw.wheelStartX=gz.scrollLeft;gw.wheelStartY=gz.scrollTop;gw.wheelDX=gE;gw.wheelDY=gD;setTimeout(function(){if(gw.wheelStartX==null){return}var gF=gz.scrollLeft-gw.wheelStartX;var gH=gz.scrollTop-gw.wheelStartY;var gG=(gH&&gw.wheelDY&&gH/gw.wheelDY)||(gF&&gw.wheelDX&&gF/gw.wheelDX);gw.wheelStartX=gw.wheelStartY=null;if(!gG){return}cf=(cf*fr+gG)/(fr+1);++fr},200)}else{gw.wheelDX+=gE;gw.wheelDY+=gD}}}function fX(gr,gu,gq){if(typeof gu=="string"){gu=eG[gu];if(!gu){return false}}gr.display.input.ensurePolled();var gt=gr.display.shift,gs=false;try{if(gr.isReadOnly()){gr.state.suppressEdits=true}if(gq){gr.display.shift=false}gs=gu(gr)!=b9}finally{gr.display.shift=gt;gr.state.suppressEdits=false}return gs}function eb(gr,gs,gu){for(var gt=0;gt<gr.state.keyMaps.length;gt++){var gq=i(gs,gr.state.keyMaps[gt],gu,gr);if(gq){return gq}}return(gr.options.extraKeys&&i(gs,gr.options.extraKeys,gu,gr))||i(gs,gr.options.keyMap,gu,gr)}var dM=new gp;function bc(gr,gt,gv,gu){var gs=gr.state.keySeq;if(gs){if(eF(gt)){return"handled"}dM.set(50,function(){if(gr.state.keySeq==gs){gr.state.keySeq=null;gr.display.input.reset()}});gt=gs+" "+gt}var gq=eb(gr,gt,gu);if(gq=="multi"){gr.state.keySeq=gt}if(gq=="handled"){ae(gr,"keyHandled",gr,gt,gv)}if(gq=="handled"||gq=="multi"){cF(gv);o(gr)}if(gs&&!gq&&/\'$/.test(gt)){cF(gv);return true}return !!gq}function fo(gq,gs){var gr=fw(gs,true);if(!gr){return false}if(gs.shiftKey&&!gq.state.keySeq){return bc(gq,"Shift-"+gr,gs,function(gt){return fX(gq,gt,true)})||bc(gq,gr,gs,function(gt){if(typeof gt=="string"?/^go[A-Z]/.test(gt):gt.motion){return fX(gq,gt)}})}else{return bc(gq,gr,gs,function(gt){return fX(gq,gt)})}}function el(gq,gs,gr){return bc(gq,"'"+gr+"'",gs,function(gt){return fX(gq,gt,true)})}var dm=null;function p(gt){var gq=this;gq.curOp.focus=dO();if(aQ(gq,gt)){return}if(dK&&k<11&&gt.keyCode==27){gt.returnValue=false}var gr=gt.keyCode;gq.display.shift=gr==16||gt.shiftKey;var gs=fo(gq,gt);if(d4){dm=gs?gr:null;if(!gs&&gr==88&&!c9&&(b6?gt.metaKey:gt.ctrlKey)){gq.replaceSelection("",null,"cut")}}if(gr==18&&!/\bCodeMirror-crosshair\b/.test(gq.display.lineDiv.className)){au(gq)}}function au(gr){var gs=gr.display.lineDiv;fF(gs,"CodeMirror-crosshair");function gq(gt){if(gt.keyCode==18||!gt.altKey){f(gs,"CodeMirror-crosshair");ef(document,"keyup",gq);ef(document,"mouseover",gq)}}bW(document,"keyup",gq);bW(document,"mouseover",gq)}function bh(gq){if(gq.keyCode==16){this.doc.sel.shift=false}aQ(this,gq)}function cw(gu){var gq=this;if(ba(gq.display,gu)||aQ(gq,gu)||gu.ctrlKey&&!gu.altKey||b6&&gu.metaKey){return}var gt=gu.keyCode,gr=gu.charCode;if(d4&&gt==dm){dm=null;cF(gu);return}if((d4&&(!gu.which||gu.which<10))&&fo(gq,gu)){return}var gs=String.fromCharCode(gr==null?gt:gr);if(el(gq,gu,gs)){return}gq.display.input.onKeyPress(gu)}function ak(gq){gq.state.delayingBlurEvent=true;setTimeout(function(){if(gq.state.delayingBlurEvent){gq.state.delayingBlurEvent=false;aU(gq)}},100)}function cA(gq){if(gq.state.delayingBlurEvent){gq.state.delayingBlurEvent=false}if(gq.options.readOnly=="nocursor"){return}if(!gq.state.focused){aD(gq,"focus",gq);gq.state.focused=true;fF(gq.display.wrapper,"CodeMirror-focused");if(!gq.curOp&&gq.display.selForContextMenu!=gq.doc.sel){gq.display.input.reset();if(cZ){setTimeout(function(){gq.display.input.reset(true)},20)}}gq.display.input.receivedFocus()}o(gq)}function aU(gq){if(gq.state.delayingBlurEvent){return}if(gq.state.focused){aD(gq,"blur",gq);gq.state.focused=false;f(gq.display.wrapper,"CodeMirror-focused")}clearInterval(gq.display.blinker);setTimeout(function(){if(!gq.state.focused){gq.display.shift=false}},150)}function ax(gq,gr){if(ba(gq.display,gr)||dg(gq,gr)){return}if(aQ(gq,gr,"contextmenu")){return}gq.display.input.onContextMenu(gr)}function dg(gq,gr){if(!fn(gq,"gutterContextMenu")){return false}return go(gq,gr,"gutterContextMenu",false)}var cW=H.changeEnd=function(gq){if(!gq.text){return gq.to}return W(gq.from.line+gq.text.length-1,fL(gq.text).length+(gq.text.length==1?gq.from.ch:0))};function bY(gt,gs){if(ce(gt,gs.from)<0){return gt}if(ce(gt,gs.to)<=0){return cW(gs)}var gq=gt.line+gs.text.length-(gs.to.line-gs.from.line)-1,gr=gt.ch;if(gt.line==gs.to.line){gr+=cW(gs).ch-gs.to.ch}return W(gq,gr)}function fp(gt,gu){var gr=[];for(var gs=0;gs<gt.sel.ranges.length;gs++){var gq=gt.sel.ranges[gs];gr.push(new dY(bY(gq.anchor,gu),bY(gq.head,gu)))}return cv(gr,gt.sel.primIndex)}function bt(gs,gr,gq){if(gs.line==gr.line){return W(gq.line,gs.ch-gr.ch+gq.ch)}else{return W(gq.line+(gs.line-gr.line),gs.ch)}}function af(gA,gx,gr){var gs=[];var gq=W(gA.first,0),gB=gq;for(var gu=0;gu<gx.length;gu++){var gw=gx[gu];var gz=bt(gw.from,gq,gB);var gy=bt(cW(gw),gq,gB);gq=gw.to;gB=gy;if(gr=="around"){var gv=gA.sel.ranges[gu],gt=ce(gv.head,gv.anchor)<0;gs[gu]=new dY(gt?gy:gz,gt?gz:gy)}else{gs[gu]=new dY(gz,gz)}}return new ga(gs,gA.sel.primIndex)}function dR(gr,gt,gs){var gq={canceled:false,from:gt.from,to:gt.to,text:gt.text,origin:gt.origin,cancel:function(){this.canceled=true}};if(gs){gq.update=function(gx,gw,gv,gu){if(gx){this.from=fP(gr,gx)}if(gw){this.to=fP(gr,gw)}if(gv){this.text=gv}if(gu!==undefined){this.origin=gu}}}aD(gr,"beforeChange",gr,gq);if(gr.cm){aD(gr.cm,"beforeChange",gr.cm,gq)}if(gq.canceled){return null}return{from:gq.from,to:gq.to,text:gq.text,origin:gq.origin}}function bf(gt,gu,gs){if(gt.cm){if(!gt.cm.curOp){return c1(gt.cm,bf)(gt,gu,gs)}if(gt.cm.state.suppressEdits){return}}if(fn(gt,"beforeChange")||gt.cm&&fn(gt.cm,"beforeChange")){gu=dR(gt,gu,true);if(!gu){return}}var gr=gj&&!gs&&cG(gt,gu.from,gu.to);if(gr){for(var gq=gr.length-1;gq>=0;--gq){K(gt,{from:gr[gq].from,to:gr[gq].to,text:gq?[""]:gu.text})}}else{K(gt,gu)}}function K(gs,gt){if(gt.text.length==1&&gt.text[0]==""&&ce(gt.from,gt.to)==0){return}var gr=fp(gs,gt);fS(gs,gt,gr,gs.cm?gs.cm.curOp.id:NaN);eg(gs,gt,gr,em(gs,gt));var gq=[];d8(gs,function(gv,gu){if(!gu&&dh(gq,gv.history)==-1){dE(gv.history,gt);gq.push(gv.history)}eg(gv,gt,null,em(gv,gt))})}function b7(gB,gz,gD){if(gB.cm&&gB.cm.state.suppressEdits){return}var gy=gB.history,gs,gu=gB.sel;var gq=gz=="undo"?gy.done:gy.undone,gC=gz=="undo"?gy.undone:gy.done;for(var gv=0;gv<gq.length;gv++){gs=gq[gv];if(gD?gs.ranges&&!gs.equals(gB.sel):!gs.ranges){break}}if(gv==gq.length){return}gy.lastOrigin=gy.lastSelOrigin=null;for(;;){gs=gq.pop();if(gs.ranges){cM(gs,gC);if(gD&&!gs.equals(gB.sel)){bT(gB,gs,{clearRedo:false});return}gu=gs}else{break}}var gx=[];cM(gu,gC);gC.push({changes:gx,generation:gy.generation});gy.generation=gs.generation||++gy.maxGeneration;var gt=fn(gB,"beforeChange")||gB.cm&&fn(gB.cm,"beforeChange");for(var gv=gs.changes.length-1;gv>=0;--gv){var gA=gs.changes[gv];gA.origin=gz;if(gt&&!dR(gB,gA,false)){gq.length=0;return}gx.push(du(gB,gA));var gr=gv?fp(gB,gA):fL(gq);eg(gB,gA,gr,ea(gB,gA));if(!gv&&gB.cm){gB.cm.scrollIntoView({from:gA.from,to:cW(gA)})}var gw=[];d8(gB,function(gF,gE){if(!gE&&dh(gw,gF.history)==-1){dE(gF.history,gA);gw.push(gF.history)}eg(gF,gA,null,ea(gF,gA))})}}function fs(gr,gt){if(gt==0){return}gr.first+=gt;gr.sel=new ga(bR(gr.sel.ranges,function(gu){return new dY(W(gu.anchor.line+gt,gu.anchor.ch),W(gu.head.line+gt,gu.head.ch))}),gr.sel.primIndex);if(gr.cm){ah(gr.cm,gr.first,gr.first-gt,gt);for(var gs=gr.cm.display,gq=gs.viewFrom;gq<gs.viewTo;gq++){R(gr.cm,gq,"gutter")}}}function eg(gu,gv,gt,gr){if(gu.cm&&!gu.cm.curOp){return c1(gu.cm,eg)(gu,gv,gt,gr)}if(gv.to.line<gu.first){fs(gu,gv.text.length-1-(gv.to.line-gv.from.line));return}if(gv.from.line>gu.lastLine()){return}if(gv.from.line<gu.first){var gq=gv.text.length-1-(gu.first-gv.from.line);fs(gu,gq);gv={from:W(gu.first,0),to:W(gv.to.line+gq,gv.to.ch),text:[fL(gv.text)],origin:gv.origin}}var gs=gu.lastLine();if(gv.to.line>gs){gv={from:gv.from,to:W(gs,fk(gu,gs).text.length),text:[gv.text[0]],origin:gv.origin}}gv.removed=gb(gu,gv.from,gv.to);if(!gt){gt=fp(gu,gv)}if(gu.cm){aI(gu.cm,gv,gr)}else{fD(gu,gv,gr)}es(gu,gt,Z)}function aI(gB,gx,gv){var gA=gB.doc,gw=gB.display,gy=gx.from,gz=gx.to;var gq=false,gu=gy.line;if(!gB.options.lineWrapping){gu=bM(x(fk(gA,gy.line)));gA.iter(gu,gz.line+1,function(gD){if(gD==gw.maxLine){gq=true;return true}})}if(gA.sel.contains(gx.from,gx.to)>-1){V(gB)}fD(gA,gx,gv,bd(gB));if(!gB.options.lineWrapping){gA.iter(gu,gy.line+gx.text.length,function(gE){var gD=eq(gE);if(gD>gw.maxLineLength){gw.maxLine=gE;gw.maxLineLength=gD;gw.maxLineChanged=true;gq=false}});if(gq){gB.curOp.updateMaxLine=true}}gA.frontier=Math.min(gA.frontier,gy.line);eh(gB,400);var gC=gx.text.length-(gz.line-gy.line)-1;if(gx.full){ah(gB)}else{if(gy.line==gz.line&&gx.text.length==1&&!dS(gB.doc,gx)){R(gB,gy.line,"text")}else{ah(gB,gy.line,gz.line+1,gC)}}var gs=fn(gB,"changes"),gt=fn(gB,"change");if(gt||gs){var gr={from:gy,to:gz,text:gx.text,removed:gx.removed,origin:gx.origin};if(gt){ae(gB,"change",gB,gr)}if(gs){(gB.curOp.changeObjs||(gB.curOp.changeObjs=[])).push(gr)}}gB.display.selForContextMenu=null}function a0(gt,gs,gv,gu,gq){if(!gu){gu=gv}if(ce(gu,gv)<0){var gr=gu;gu=gv;gv=gr}if(typeof gs=="string"){gs=gt.splitLines(gs)}bf(gt,{from:gv,to:gu,text:gs,origin:gq})}function d7(gr,gu){if(aQ(gr,"scrollCursorIntoView")){return}var gv=gr.display,gs=gv.sizer.getBoundingClientRect(),gq=null;if(gu.top+gs.top<0){gq=true}else{if(gu.bottom+gs.top>(window.innerHeight||document.documentElement.clientHeight)){gq=false}}if(gq!=null&&!fz){var gt=f9("div","\u200b",null,"position: absolute; top: "+(gu.top-gv.viewOffset-fd(gr.display))+"px; height: "+(gu.bottom-gu.top+cS(gr)+gv.barHeight)+"px; left: "+gu.left+"px; width: 2px;");gr.display.lineSpace.appendChild(gt);gt.scrollIntoView(gq);gr.display.lineSpace.removeChild(gt)}}function D(gA,gy,gu,gt){if(gt==null){gt=0}for(var gv=0;gv<5;gv++){var gw=false,gz=dU(gA,gy);var gq=!gu||gu==gy?gz:dU(gA,gu);var gs=G(gA,Math.min(gz.left,gq.left),Math.min(gz.top,gq.top)-gt,Math.max(gz.left,gq.left),Math.max(gz.bottom,gq.bottom)+gt);var gx=gA.doc.scrollTop,gr=gA.doc.scrollLeft;if(gs.scrollTop!=null){N(gA,gs.scrollTop);if(Math.abs(gA.doc.scrollTop-gx)>1){gw=true}}if(gs.scrollLeft!=null){bD(gA,gs.scrollLeft);if(Math.abs(gA.doc.scrollLeft-gr)>1){gw=true}}if(!gw){break}}return gz}function E(gq,gs,gu,gr,gt){var gv=G(gq,gs,gu,gr,gt);if(gv.scrollTop!=null){N(gq,gv.scrollTop)}if(gv.scrollLeft!=null){bD(gq,gv.scrollLeft)}}function G(gC,gt,gB,gr,gA){var gy=gC.display,gw=aX(gC.display);if(gB<0){gB=0}var gu=gC.curOp&&gC.curOp.scrollTop!=null?gC.curOp.scrollTop:gy.scroller.scrollTop;var gE=cU(gC),gG={};if(gA-gB>gE){gA=gB+gE}var gs=gC.doc.height+bH(gy);var gq=gB<gw,gx=gA>gs-gw;if(gB<gu){gG.scrollTop=gq?0:gB}else{if(gA>gu+gE){var gz=Math.min(gB,(gx?gs:gA)-gE);if(gz!=gu){gG.scrollTop=gz}}}var gF=gC.curOp&&gC.curOp.scrollLeft!=null?gC.curOp.scrollLeft:gy.scroller.scrollLeft;var gD=dl(gC)-(gC.options.fixedGutter?gy.gutters.offsetWidth:0);var gv=gr-gt>gD;if(gv){gr=gt+gD}if(gt<10){gG.scrollLeft=0}else{if(gt<gF){gG.scrollLeft=Math.max(0,gt-(gv?0:10))}else{if(gr>gD+gF-3){gG.scrollLeft=gr+(gv?0:10)-gD}}}return gG}function cK(gq,gs,gr){if(gs!=null||gr!=null){fH(gq)}if(gs!=null){gq.curOp.scrollLeft=(gq.curOp.scrollLeft==null?gq.doc.scrollLeft:gq.curOp.scrollLeft)+gs}if(gr!=null){gq.curOp.scrollTop=(gq.curOp.scrollTop==null?gq.doc.scrollTop:gq.curOp.scrollTop)+gr}}function fK(gq){fH(gq);var gr=gq.getCursor(),gt=gr,gs=gr;if(!gq.options.lineWrapping){gt=gr.ch?W(gr.line,gr.ch-1):gr;gs=W(gr.line,gr.ch+1)}gq.curOp.scrollToPos={from:gt,to:gs,margin:gq.options.cursorScrollMargin,isCursor:true}}function fH(gq){var gs=gq.curOp.scrollToPos;if(gs){gq.curOp.scrollToPos=null;var gu=dH(gq,gs.from),gt=dH(gq,gs.to);var gr=G(gq,Math.min(gu.left,gt.left),Math.min(gu.top,gt.top)-gs.margin,Math.max(gu.right,gt.right),Math.max(gu.bottom,gt.bottom)+gs.margin);gq.scrollTo(gr.scrollLeft,gr.scrollTop)}}function ad(gD,gt,gC,gs){var gB=gD.doc,gr;if(gC==null){gC="add"}if(gC=="smart"){if(!gB.mode.indent){gC="prev"}else{gr=dC(gD,gt)}}var gx=gD.options.tabSize;var gE=fk(gB,gt),gw=bS(gE.text,null,gx);if(gE.stateAfter){gE.stateAfter=null}var gq=gE.text.match(/^\s*/)[0],gz;if(!gs&&!/\S/.test(gE.text)){gz=0;gC="not"}else{if(gC=="smart"){gz=gB.mode.indent(gr,gE.text.slice(gq.length),gE.text);if(gz==b9||gz>150){if(!gs){return}gC="prev"}}}if(gC=="prev"){if(gt>gB.first){gz=bS(fk(gB,gt-1).text,null,gx)}else{gz=0}}else{if(gC=="add"){gz=gw+gD.options.indentUnit}else{if(gC=="subtract"){gz=gw-gD.options.indentUnit}else{if(typeof gC=="number"){gz=gw+gC}}}}gz=Math.max(0,gz);var gA="",gy=0;if(gD.options.indentWithTabs){for(var gu=Math.floor(gz/gx);gu;--gu){gy+=gx;gA+="\t"}}if(gy<gz){gA+=co(gz-gy)}if(gA!=gq){a0(gB,gA,W(gt,0),W(gt,gq.length),"+input");gE.stateAfter=null;return true}else{for(var gu=0;gu<gB.sel.ranges.length;gu++){var gv=gB.sel.ranges[gu];if(gv.head.line==gt&&gv.head.ch<gq.length){var gy=W(gt,gq.length);e(gB,gu,new dY(gy,gy));break}}}}function eC(gt,gs,gq,gv){var gu=gs,gr=gs;if(typeof gs=="number"){gr=fk(gt,c4(gt,gs))}else{gu=bM(gs)}if(gu==null){return null}if(gv(gr,gu)&&gt.cm){R(gt.cm,gu,gq)}return gr}function e1(gq,gw){var gr=gq.doc.sel.ranges,gu=[];for(var gt=0;gt<gr.length;gt++){var gs=gw(gr[gt]);while(gu.length&&ce(gs.from,fL(gu).to)<=0){var gv=gu.pop();if(ce(gv.from,gs.from)<0){gs.from=gv.from;break}}gu.push(gs)}cL(gq,function(){for(var gx=gu.length-1;gx>=0;gx--){a0(gq.doc,"",gu[gx].from,gu[gx].to,"+delete")}fK(gq)})}function bv(gH,gu,gC,gB,gw){var gz=gu.line,gA=gu.ch,gG=gC;var gr=fk(gH,gz);function gF(){var gI=gz+gC;if(gI<gH.first||gI>=gH.first+gH.size){return false}gz=gI;return gr=fk(gH,gI)}function gE(gJ){var gI=(gw?u:ai)(gr,gA,gC,true);if(gI==null){if(!gJ&&gF()){if(gw){gA=(gC<0?cR:cD)(gr)}else{gA=gC<0?gr.text.length:0}}else{return false}}else{gA=gI}return true}if(gB=="char"){gE()}else{if(gB=="column"){gE(true)}else{if(gB=="word"||gB=="group"){var gD=null,gx=gB=="group";var gq=gH.cm&&gH.cm.getHelper(gu,"wordChars");for(var gv=true;;gv=false){if(gC<0&&!gE(!gv)){break}var gs=gr.text.charAt(gA)||"\n";var gt=cz(gs,gq)?"w":gx&&gs=="\n"?"n":!gx||/\s/.test(gs)?null:"p";if(gx&&!gv&&!gt){gt="s"}if(gD&&gD!=gt){if(gC<0){gC=1;gE()}break}if(gt){gD=gt}if(gC>0&&!gE(!gv)){break}}}}}var gy=bU(gH,W(gz,gA),gu,gG,true);if(!ce(gu,gy)){gy.hitSide=true}return gy}function bp(gy,gt,gq,gx){var gw=gy.doc,gv=gt.left,gu;if(gx=="page"){var gs=Math.min(gy.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);gu=gt.top+gq*(gs-(gq<0?1.5:0.5)*aX(gy.display))}else{if(gx=="line"){gu=gq>0?gt.bottom+3:gt.top-3}}for(;;){var gr=fU(gy,gv,gu);if(!gr.outside){break}if(gq<0?gu<=0:gu>=gw.height){gr.hitSide=true;break}gu+=gq*5}return gr}H.prototype={constructor:H,focus:function(){window.focus();this.display.input.focus()},setOption:function(gs,gt){var gr=this.options,gq=gr[gs];if(gr[gs]==gt&&gs!="mode"){return}gr[gs]=gt;if(be.hasOwnProperty(gs)){c1(this,be[gs])(this,gt,gq)}},getOption:function(gq){return this.options[gq]},getDoc:function(){return this.doc},addKeyMap:function(gr,gq){this.state.keyMaps[gq?"push":"unshift"](f4(gr))},removeKeyMap:function(gr){var gs=this.state.keyMaps;for(var gq=0;gq<gs.length;++gq){if(gs[gq]==gr||gs[gq].name==gr){gs.splice(gq,1);return true}}},addOverlay:c7(function(gq,gr){var gs=gq.token?gq:H.getMode(this.options,gq);if(gs.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:gs,modeSpec:gq,opaque:gr&&gr.opaque});this.state.modeGen++;ah(this)}),removeOverlay:c7(function(gq){var gs=this.state.overlays;for(var gr=0;gr<gs.length;++gr){var gt=gs[gr].modeSpec;if(gt==gq||typeof gq=="string"&&gt.name==gq){gs.splice(gr,1);this.state.modeGen++;ah(this);return}}}),indentLine:c7(function(gs,gq,gr){if(typeof gq!="string"&&typeof gq!="number"){if(gq==null){gq=this.options.smartIndent?"smart":"prev"}else{gq=gq?"add":"subtract"}}if(b8(this.doc,gs)){ad(this,gs,gq,gr)}}),indentSelection:c7(function(gz){var gq=this.doc.sel.ranges,gt=-1;for(var gv=0;gv<gq.length;gv++){var gw=gq[gv];if(!gw.empty()){var gx=gw.from(),gy=gw.to();var gr=Math.max(gt,gx.line);gt=Math.min(this.lastLine(),gy.line-(gy.ch?0:1))+1;for(var gu=gr;gu<gt;++gu){ad(this,gu,gz)}var gs=this.doc.sel.ranges;if(gx.ch==0&&gq.length==gs.length&&gs[gv].from().ch>0){e(this.doc,gv,new dY(gx,gs[gv].to()),Z)}}else{if(gw.head.line>gt){ad(this,gw.head.line,gz,true);gt=gw.head.line;if(gv==this.doc.sel.primIndex){fK(this)}}}}}),getTokenAt:function(gr,gq){return cp(this,gr,gq)},getLineTokens:function(gr,gq){return cp(this,W(gr),gq,true)},getTokenTypeAt:function(gx){gx=fP(this.doc,gx);var gt=c5(this,fk(this.doc,gx.line));var gv=0,gw=(gt.length-1)/2,gs=gx.ch;var gr;if(gs==0){gr=gt[2]}else{for(;;){var gq=(gv+gw)>>1;if((gq?gt[gq*2-1]:0)>=gs){gw=gq}else{if(gt[gq*2+1]<gs){gv=gq+1}else{gr=gt[gq*2+2];break}}}}var gu=gr?gr.indexOf("cm-overlay "):-1;return gu<0?gr:gu==0?null:gr.slice(0,gu-1)},getModeAt:function(gr){var gq=this.doc.mode;if(!gq.innerMode){return gq}return H.innerMode(gq,this.getTokenAt(gr).state).mode},getHelper:function(gr,gq){return this.getHelpers(gr,gq)[0]},getHelpers:function(gx,gs){var gt=[];if(!ft.hasOwnProperty(gs)){return gt}var gq=ft[gs],gw=this.getModeAt(gx);if(typeof gw[gs]=="string"){if(gq[gw[gs]]){gt.push(gq[gw[gs]])}}else{if(gw[gs]){for(var gr=0;gr<gw[gs].length;gr++){var gv=gq[gw[gs][gr]];if(gv){gt.push(gv)}}}else{if(gw.helperType&&gq[gw.helperType]){gt.push(gq[gw.helperType])}else{if(gq[gw.name]){gt.push(gq[gw.name])}}}}for(var gr=0;gr<gq._global.length;gr++){var gu=gq._global[gr];if(gu.pred(gw,this)&&dh(gt,gu.val)==-1){gt.push(gu.val)}}return gt},getStateAfter:function(gr,gq){var gs=this.doc;gr=c4(gs,gr==null?gs.first+gs.size-1:gr);return dC(this,gr+1,gq)},cursorCoords:function(gt,gr){var gs,gq=this.doc.sel.primary();if(gt==null){gs=gq.head}else{if(typeof gt=="object"){gs=fP(this.doc,gt)}else{gs=gt?gq.from():gq.to()}}return dU(this,gs,gr||"page")},charCoords:function(gr,gq){return cI(this,fP(this.doc,gr),gq||"page")},coordsChar:function(gq,gr){gq=gl(this,gq,gr||"page");return fU(this,gq.left,gq.top)},lineAtHeight:function(gq,gr){gq=gl(this,{top:gq,left:0},gr||"page").top;return bF(this.doc,gq+this.display.viewOffset)},heightAtLine:function(gr,gu){var gq=false,gs;if(typeof gr=="number"){var gt=this.doc.first+this.doc.size-1;if(gr<this.doc.first){gr=this.doc.first}else{if(gr>gt){gr=gt;gq=true}}gs=fk(this.doc,gr)}else{gs=gr}return eU(this,gs,{top:0,left:0},gu||"page").top+(gq?this.doc.height-bL(gs):0)},defaultTextHeight:function(){return aX(this.display)},defaultCharWidth:function(){return dD(this.display)},setGutterMarker:c7(function(gq,gr,gs){return eC(this.doc,gq,"gutter",function(gt){var gu=gt.gutterMarkers||(gt.gutterMarkers={});gu[gr]=gs;if(!gs&&eY(gu)){gt.gutterMarkers=null}return true})}),clearGutter:c7(function(gs){var gq=this,gt=gq.doc,gr=gt.first;gt.iter(function(gu){if(gu.gutterMarkers&&gu.gutterMarkers[gs]){gu.gutterMarkers[gs]=null;R(gq,gr,"gutter");if(eY(gu.gutterMarkers)){gu.gutterMarkers=null}}++gr})}),lineInfo:function(gq){if(typeof gq=="number"){if(!b8(this.doc,gq)){return null}var gr=gq;gq=fk(this.doc,gq);if(!gq){return null}}else{var gr=bM(gq);if(gr==null){return null}}return{line:gr,handle:gq,text:gq.text,gutterMarkers:gq.gutterMarkers,textClass:gq.textClass,bgClass:gq.bgClass,wrapClass:gq.wrapClass,widgets:gq.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gv,gs,gx,gt,gz){var gu=this.display;gv=dU(this,fP(this.doc,gv));var gw=gv.bottom,gr=gv.left;gs.style.position="absolute";gs.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gs);gu.sizer.appendChild(gs);if(gt=="over"){gw=gv.top}else{if(gt=="above"||gt=="near"){var gq=Math.max(gu.wrapper.clientHeight,this.doc.height),gy=Math.max(gu.sizer.clientWidth,gu.lineSpace.clientWidth);if((gt=="above"||gv.bottom+gs.offsetHeight>gq)&&gv.top>gs.offsetHeight){gw=gv.top-gs.offsetHeight}else{if(gv.bottom+gs.offsetHeight<=gq){gw=gv.bottom}}if(gr+gs.offsetWidth>gy){gr=gy-gs.offsetWidth}}}gs.style.top=gw+"px";gs.style.left=gs.style.right="";if(gz=="right"){gr=gu.sizer.clientWidth-gs.offsetWidth;gs.style.right="0px"}else{if(gz=="left"){gr=0}else{if(gz=="middle"){gr=(gu.sizer.clientWidth-gs.offsetWidth)/2}}gs.style.left=gr+"px"}if(gx){E(this,gr,gw,gr+gs.offsetWidth,gw+gs.offsetHeight)}},triggerOnKeyDown:c7(p),triggerOnKeyPress:c7(cw),triggerOnKeyUp:bh,execCommand:function(gq){if(eG.hasOwnProperty(gq)){return eG[gq].call(null,this)}},triggerElectric:c7(function(gq){f2(this,gq)}),findPosH:function(gw,gt,gu,gr){var gq=1;if(gt<0){gq=-1;gt=-gt}for(var gs=0,gv=fP(this.doc,gw);gs<gt;++gs){gv=bv(this.doc,gv,gq,gu,gr);if(gv.hitSide){break}}return gv},moveH:c7(function(gr,gs){var gq=this;gq.extendSelectionsBy(function(gt){if(gq.display.shift||gq.doc.extend||gt.empty()){return bv(gq.doc,gt.head,gr,gs,gq.options.rtlMoveVisually)}else{return gr<0?gt.from():gt.to()}},cV)}),deleteH:c7(function(gq,gr){var gs=this.doc.sel,gt=this.doc;if(gs.somethingSelected()){gt.replaceSelection("",null,"+delete")}else{e1(this,function(gv){var gu=bv(gt,gv.head,gq,gr,false);return gq<0?{from:gu,to:gv.head}:{from:gv.head,to:gu}})}}),findPosV:function(gv,gs,gw,gy){var gq=1,gu=gy;if(gs<0){gq=-1;gs=-gs}for(var gr=0,gx=fP(this.doc,gv);gr<gs;++gr){var gt=dU(this,gx,"div");if(gu==null){gu=gt.left}else{gt.left=gu}gx=bp(this,gt,gq,gw);if(gx.hitSide){break}}return gx},moveV:c7(function(gr,gt){var gq=this,gv=this.doc,gu=[];var gw=!gq.display.shift&&!gv.extend&&gv.sel.somethingSelected();gv.extendSelectionsBy(function(gx){if(gw){return gr<0?gx.from():gx.to()}var gz=dU(gq,gx.head,"div");if(gx.goalColumn!=null){gz.left=gx.goalColumn}gu.push(gz.left);var gy=bp(gq,gz,gr,gt);if(gt=="page"&&gx==gv.sel.primary()){cK(gq,null,cI(gq,gy,"div").top-gz.top)}return gy},cV);if(gu.length){for(var gs=0;gs<gv.sel.ranges.length;gs++){gv.sel.ranges[gs].goalColumn=gu[gs]}}}),findWordAt:function(gx){var gv=this.doc,gt=fk(gv,gx.line).text;var gw=gx.ch,gs=gx.ch;if(gt){var gu=this.getHelper(gx,"wordChars");if((gx.xRel<0||gs==gt.length)&&gw){--gw}else{++gs}var gr=gt.charAt(gw);var gq=cz(gr,gu)?function(gy){return cz(gy,gu)}:/\s/.test(gr)?function(gy){return/\s/.test(gy)}:function(gy){return !/\s/.test(gy)&&!cz(gy)};while(gw>0&&gq(gt.charAt(gw-1))){--gw}while(gs<gt.length&&gq(gt.charAt(gs))){++gs}}return new dY(W(gx.line,gw),W(gx.line,gs))},toggleOverwrite:function(gq){if(gq!=null&&gq==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){fF(this.display.cursorDiv,"CodeMirror-overwrite")}else{f(this.display.cursorDiv,"CodeMirror-overwrite")}aD(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==dO()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:c7(function(gq,gr){if(gq!=null||gr!=null){fH(this)}if(gq!=null){this.curOp.scrollLeft=gq}if(gr!=null){this.curOp.scrollTop=gr}}),getScrollInfo:function(){var gq=this.display.scroller;return{left:gq.scrollLeft,top:gq.scrollTop,height:gq.scrollHeight-cS(this)-this.display.barHeight,width:gq.scrollWidth-cS(this)-this.display.barWidth,clientHeight:cU(this),clientWidth:dl(this)}},scrollIntoView:c7(function(gr,gs){if(gr==null){gr={from:this.doc.sel.primary().head,to:null};if(gs==null){gs=this.options.cursorScrollMargin}}else{if(typeof gr=="number"){gr={from:W(gr,0),to:null}}else{if(gr.from==null){gr={from:gr,to:null}}}}if(!gr.to){gr.to=gr.from}gr.margin=gs||0;if(gr.from.line!=null){fH(this);this.curOp.scrollToPos=gr}else{var gq=G(this,Math.min(gr.from.left,gr.to.left),Math.min(gr.from.top,gr.to.top)-gr.margin,Math.max(gr.from.right,gr.to.right),Math.max(gr.from.bottom,gr.to.bottom)+gr.margin);this.scrollTo(gq.scrollLeft,gq.scrollTop)}}),setSize:c7(function(gt,gr){var gq=this;function gs(gv){return typeof gv=="number"||/^\d+$/.test(String(gv))?gv+"px":gv}if(gt!=null){gq.display.wrapper.style.width=gs(gt)}if(gr!=null){gq.display.wrapper.style.height=gs(gr)}if(gq.options.lineWrapping){aN(this)}var gu=gq.display.viewFrom;gq.doc.iter(gu,gq.display.viewTo,function(gv){if(gv.widgets){for(var gw=0;gw<gv.widgets.length;gw++){if(gv.widgets[gw].noHScroll){R(gq,gu,"widget");break}}}++gu});gq.curOp.forceUpdate=true;aD(gq,"refresh",this)}),operation:function(gq){return cL(this,gq)},refresh:c7(function(){var gq=this.display.cachedTextHeight;ah(this);this.curOp.forceUpdate=true;aj(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);c3(this);if(gq==null||Math.abs(gq-aX(this.display))>0.5){X(this)}aD(this,"refresh",this)}),swapDoc:c7(function(gr){var gq=this.doc;gq.cm=null;ed(this,gr);aj(this);this.display.input.reset();this.scrollTo(gr.scrollLeft,gr.scrollTop);this.curOp.forceScroll=true;ae(this,"swapDoc",this,gq);return gq}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bx(H);var e7=H.defaults={};var be=H.optionHandlers={};function s(gq,gt,gs,gr){H.defaults[gq]=gt;if(gs){be[gq]=gr?function(gu,gw,gv){if(gv!=cb){gs(gu,gw,gv)}}:gs}}var cb=H.Init={toString:function(){return"CodeMirror.Init"}};s("value","",function(gq,gr){gq.setValue(gr)},true);s("mode",null,function(gq,gr){gq.doc.modeOption=gr;bq(gq)},true);s("indentUnit",2,bq,true);s("indentWithTabs",false);s("smartIndent",true);s("tabSize",4,function(gq){eo(gq);aj(gq);ah(gq)},true);s("lineSeparator",null,function(gq,gt){gq.doc.lineSep=gt;if(!gt){return}var gs=[],gu=gq.doc.first;gq.doc.iter(function(gv){for(var gx=0;;){var gw=gv.text.indexOf(gt,gx);if(gw==-1){break}gx=gw+gt.length;gs.push(W(gu,gw))}gu++});for(var gr=gs.length-1;gr>=0;gr--){a0(gq.doc,gt,gs[gr],W(gs[gr].line,gs[gr].ch+gt.length))}});s("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(gq,gs,gr){gq.state.specialChars=new RegExp(gs.source+(gs.test("\t")?"":"|\t"),"g");if(gr!=H.Init){gq.refresh()}});s("specialCharPlaceholder",fh,function(gq){gq.refresh()},true);s("electricChars",true);s("inputStyle",ei?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);s("rtlMoveVisually",!aO);s("wholeLineUpdateBefore",true);s("theme","default",function(gq){cN(gq);dw(gq)},true);s("keyMap","default",function(gq,gu,gr){var gs=f4(gu);var gt=gr!=H.Init&&f4(gr);if(gt&&gt.detach){gt.detach(gq,gs)}if(gs.attach){gs.attach(gq,gt||null)}});s("extraKeys",null);s("lineWrapping",false,eJ,true);s("gutters",[],function(gq){cd(gq.options);dw(gq)},true);s("fixedGutter",true,function(gq,gr){gq.display.gutters.style.left=gr?dX(gq.display)+"px":"0";gq.refresh()},true);s("coverGutterNextToScrollbar",false,function(gq){e2(gq)},true);s("scrollbarStyle","native",function(gq){aC(gq);e2(gq);gq.display.scrollbars.setScrollTop(gq.doc.scrollTop);gq.display.scrollbars.setScrollLeft(gq.doc.scrollLeft)},true);s("lineNumbers",false,function(gq){cd(gq.options);dw(gq)},true);s("firstLineNumber",1,dw,true);s("lineNumberFormatter",function(gq){return gq},dw,true);s("showCursorWhenSelecting",false,bB,true);s("resetSelectionOnContextMenu",true);s("lineWiseCopyCut",true);s("readOnly",false,function(gq,gr){if(gr=="nocursor"){aU(gq);gq.display.input.blur();gq.display.disabled=true}else{gq.display.disabled=false}gq.display.input.readOnlyChanged(gr)});s("disableInput",false,function(gq,gr){if(!gr){gq.display.input.reset()}},true);s("dragDrop",true,f7);s("allowDropFileTypes",null);s("cursorBlinkRate",530);s("cursorScrollMargin",0);s("cursorHeight",1,bB,true);s("singleCursorHeightPerLine",true,bB,true);s("workTime",100);s("workDelay",100);s("flattenSpans",true,eo,true);s("addModeClass",false,eo,true);s("pollInterval",100);s("undoDepth",200,function(gq,gr){gq.doc.history.undoDepth=gr});s("historyEventDelay",1250);s("viewportMargin",10,function(gq){gq.refresh()},true);s("maxHighlightLength",10000,eo,true);s("moveInputWithCursor",true,function(gq,gr){if(!gr){gq.display.input.resetPosition()}});s("tabindex",null,function(gq,gr){gq.display.input.getField().tabIndex=gr||""});s("autofocus",null);var ds=H.modes={},aR=H.mimeModes={};H.defineMode=function(gq,gr){if(!H.defaults.mode&&gq!="null"){H.defaults.mode=gq}if(arguments.length>2){gr.dependencies=Array.prototype.slice.call(arguments,2)}ds[gq]=gr};H.defineMIME=function(gr,gq){aR[gr]=gq};H.resolveMode=function(gq){if(typeof gq=="string"&&aR.hasOwnProperty(gq)){gq=aR[gq]}else{if(gq&&typeof gq.name=="string"&&aR.hasOwnProperty(gq.name)){var gr=aR[gq.name];if(typeof gr=="string"){gr={name:gr}}gq=cj(gr,gq);gq.name=gr.name}else{if(typeof gq=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(gq)){return H.resolveMode("application/xml")}}}if(typeof gq=="string"){return{name:gq}}else{return gq||{name:"null"}}};H.getMode=function(gr,gq){var gq=H.resolveMode(gq);var gt=ds[gq.name];if(!gt){return H.getMode(gr,"text/plain")}var gu=gt(gr,gq);if(dp.hasOwnProperty(gq.name)){var gs=dp[gq.name];for(var gv in gs){if(!gs.hasOwnProperty(gv)){continue}if(gu.hasOwnProperty(gv)){gu["_"+gv]=gu[gv]}gu[gv]=gs[gv]}}gu.name=gq.name;if(gq.helperType){gu.helperType=gq.helperType}if(gq.modeProps){for(var gv in gq.modeProps){gu[gv]=gq.modeProps[gv]}}return gu};H.defineMode("null",function(){return{token:function(gq){gq.skipToEnd()}}});H.defineMIME("text/plain","null");var dp=H.modeExtensions={};H.extendMode=function(gs,gr){var gq=dp.hasOwnProperty(gs)?dp[gs]:(dp[gs]={});aM(gr,gq)};H.defineExtension=function(gq,gr){H.prototype[gq]=gr};H.defineDocExtension=function(gq,gr){ar.prototype[gq]=gr};H.defineOption=s;var a7=[];H.defineInitHook=function(gq){a7.push(gq)};var ft=H.helpers={};H.registerHelper=function(gr,gq,gs){if(!ft.hasOwnProperty(gr)){ft[gr]=H[gr]={_global:[]}}ft[gr][gq]=gs};H.registerGlobalHelper=function(gs,gr,gq,gt){H.registerHelper(gs,gr,gt);ft[gs]._global.push({pred:gq,val:gt})};var b2=H.copyState=function(gt,gq){if(gq===true){return gq}if(gt.copyState){return gt.copyState(gq)}var gs={};for(var gu in gq){var gr=gq[gu];if(gr instanceof Array){gr=gr.concat([])}gs[gu]=gr}return gs};var bZ=H.startState=function(gs,gr,gq){return gs.startState?gs.startState(gr,gq):true};H.innerMode=function(gs,gq){while(gs.innerMode){var gr=gs.innerMode(gq);if(!gr||gr.mode==gs){break}gq=gr.state;gs=gr.mode}return gr||{mode:gs,state:gq}};var eG=H.commands={selectAll:function(gq){gq.setSelection(W(gq.firstLine(),0),W(gq.lastLine()),Z)},singleSelection:function(gq){gq.setSelection(gq.getCursor("anchor"),gq.getCursor("head"),Z)},killLine:function(gq){e1(gq,function(gs){if(gs.empty()){var gr=fk(gq.doc,gs.head.line).text.length;if(gs.head.ch==gr&&gs.head.line<gq.lastLine()){return{from:gs.head,to:W(gs.head.line+1,0)}}else{return{from:gs.head,to:W(gs.head.line,gr)}}}else{return{from:gs.from(),to:gs.to()}}})},deleteLine:function(gq){e1(gq,function(gr){return{from:W(gr.from().line,0),to:fP(gq.doc,W(gr.to().line+1,0))}})},delLineLeft:function(gq){e1(gq,function(gr){return{from:W(gr.from().line,0),to:gr.from()}})},delWrappedLineLeft:function(gq){e1(gq,function(gr){var gt=gq.charCoords(gr.head,"div").top+5;var gs=gq.coordsChar({left:0,top:gt},"div");return{from:gs,to:gr.from()}})},delWrappedLineRight:function(gq){e1(gq,function(gr){var gt=gq.charCoords(gr.head,"div").top+5;var gs=gq.coordsChar({left:gq.display.lineDiv.offsetWidth+100,top:gt},"div");return{from:gr.from(),to:gs}})},undo:function(gq){gq.undo()},redo:function(gq){gq.redo()},undoSelection:function(gq){gq.undoSelection()},redoSelection:function(gq){gq.redoSelection()},goDocStart:function(gq){gq.extendSelection(W(gq.firstLine(),0))},goDocEnd:function(gq){gq.extendSelection(W(gq.lastLine()))},goLineStart:function(gq){gq.extendSelectionsBy(function(gr){return bs(gq,gr.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(gq){gq.extendSelectionsBy(function(gr){return dI(gq,gr.head)},{origin:"+move",bias:1})},goLineEnd:function(gq){gq.extendSelectionsBy(function(gr){return dP(gq,gr.head.line)},{origin:"+move",bias:-1})},goLineRight:function(gq){gq.extendSelectionsBy(function(gr){var gs=gq.charCoords(gr.head,"div").top+5;return gq.coordsChar({left:gq.display.lineDiv.offsetWidth+100,top:gs},"div")},cV)},goLineLeft:function(gq){gq.extendSelectionsBy(function(gr){var gs=gq.charCoords(gr.head,"div").top+5;return gq.coordsChar({left:0,top:gs},"div")},cV)},goLineLeftSmart:function(gq){gq.extendSelectionsBy(function(gr){var gs=gq.charCoords(gr.head,"div").top+5;var gt=gq.coordsChar({left:0,top:gs},"div");if(gt.ch<gq.getLine(gt.line).search(/\S/)){return dI(gq,gr.head)}return gt},cV)},goLineUp:function(gq){gq.moveV(-1,"line")},goLineDown:function(gq){gq.moveV(1,"line")},goPageUp:function(gq){gq.moveV(-1,"page")},goPageDown:function(gq){gq.moveV(1,"page")},goCharLeft:function(gq){gq.moveH(-1,"char")},goCharRight:function(gq){gq.moveH(1,"char")},goColumnLeft:function(gq){gq.moveH(-1,"column")},goColumnRight:function(gq){gq.moveH(1,"column")},goWordLeft:function(gq){gq.moveH(-1,"word")},goGroupRight:function(gq){gq.moveH(1,"group")},goGroupLeft:function(gq){gq.moveH(-1,"group")},goWordRight:function(gq){gq.moveH(1,"word")},delCharBefore:function(gq){gq.deleteH(-1,"char")},delCharAfter:function(gq){gq.deleteH(1,"char")},delWordBefore:function(gq){gq.deleteH(-1,"word")},delWordAfter:function(gq){gq.deleteH(1,"word")},delGroupBefore:function(gq){gq.deleteH(-1,"group")},delGroupAfter:function(gq){gq.deleteH(1,"group")},indentAuto:function(gq){gq.indentSelection("smart")},indentMore:function(gq){gq.indentSelection("add")},indentLess:function(gq){gq.indentSelection("subtract")},insertTab:function(gq){gq.replaceSelection("\t")},insertSoftTab:function(gq){var gs=[],gr=gq.listSelections(),gv=gq.options.tabSize;for(var gu=0;gu<gr.length;gu++){var gw=gr[gu].from();var gt=bS(gq.getLine(gw.line),gw.ch,gv);gs.push(new Array(gv-gt%gv+1).join(" "))}gq.replaceSelections(gs)},defaultTab:function(gq){if(gq.somethingSelected()){gq.indentSelection("add")}else{gq.execCommand("insertTab")}},transposeChars:function(gq){cL(gq,function(){var gt=gq.listSelections(),gs=[];for(var gu=0;gu<gt.length;gu++){var gw=gt[gu].head,gr=fk(gq.doc,gw.line).text;if(gr){if(gw.ch==gr.length){gw=new W(gw.line,gw.ch-1)}if(gw.ch>0){gw=new W(gw.line,gw.ch+1);gq.replaceRange(gr.charAt(gw.ch-1)+gr.charAt(gw.ch-2),W(gw.line,gw.ch-2),gw,"+transpose")}else{if(gw.line>gq.doc.first){var gv=fk(gq.doc,gw.line-1).text;if(gv){gq.replaceRange(gr.charAt(0)+gq.doc.lineSeparator()+gv.charAt(gv.length-1),W(gw.line-1,gv.length-1),W(gw.line,1),"+transpose")}}}}gs.push(new dY(gw,gw))}gq.setSelections(gs)})},newlineAndIndent:function(gq){cL(gq,function(){var gr=gq.listSelections().length;for(var gt=0;gt<gr;gt++){var gs=gq.listSelections()[gt];gq.replaceRange(gq.doc.lineSeparator(),gs.anchor,gs.head,"+input");gq.indentLine(gs.from().line+1,null,true)}fK(gq)})},toggleOverwrite:function(gq){gq.toggleOverwrite()}};var ff=H.keyMap={};ff.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};ff.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};ff.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};ff.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};ff["default"]=b6?ff.macDefault:ff.pcDefault;function dt(gr){var gx=gr.split(/-(?!$)/),gr=gx[gx.length-1];var gw,gv,gq,gu;for(var gt=0;gt<gx.length-1;gt++){var gs=gx[gt];if(/^(cmd|meta|m)$/i.test(gs)){gu=true}else{if(/^a(lt)?$/i.test(gs)){gw=true}else{if(/^(c|ctrl|control)$/i.test(gs)){gv=true}else{if(/^s(hift)$/i.test(gs)){gq=true}else{throw new Error("Unrecognized modifier name: "+gs)}}}}}if(gw){gr="Alt-"+gr}if(gv){gr="Ctrl-"+gr}if(gu){gr="Cmd-"+gr}if(gq){gr="Shift-"+gr}return gr}H.normalizeKeyMap=function(gx){var gr={};for(var gw in gx){if(gx.hasOwnProperty(gw)){var gy=gx[gw];if(/^(name|fallthrough|(de|at)tach)$/.test(gw)){continue}if(gy=="..."){delete gx[gw];continue}var gz=bR(gw.split(" "),dt);for(var gv=0;gv<gz.length;gv++){var gt,gs;if(gv==gz.length-1){gs=gz.join(" ");gt=gy}else{gs=gz.slice(0,gv+1).join(" ");gt="..."}var gu=gr[gs];if(!gu){gr[gs]=gt}else{if(gu!=gt){throw new Error("Inconsistent bindings for "+gs)}}}delete gx[gw]}}for(var gq in gr){gx[gq]=gr[gq]}return gx};var i=H.lookupKey=function(gt,gw,gv,gs){gw=f4(gw);var gu=gw.call?gw.call(gt,gs):gw[gt];if(gu===false){return"nothing"}if(gu==="..."){return"multi"}if(gu!=null&&gv(gu)){return"handled"}if(gw.fallthrough){if(Object.prototype.toString.call(gw.fallthrough)!="[object Array]"){return i(gt,gw.fallthrough,gv,gs)}for(var gr=0;gr<gw.fallthrough.length;gr++){var gq=i(gt,gw.fallthrough[gr],gv,gs);if(gq){return gq}}}};var eF=H.isModifierKey=function(gr){var gq=typeof gr=="string"?gr:fl[gr.keyCode];return gq=="Ctrl"||gq=="Alt"||gq=="Shift"||gq=="Mod"};var fw=H.keyName=function(gr,gt){if(d4&&gr.keyCode==34&&gr["char"]){return false}var gs=fl[gr.keyCode],gq=gs;if(gq==null||gr.altGraphKey){return false}if(gr.altKey&&gs!="Alt"){gq="Alt-"+gq}if((bP?gr.metaKey:gr.ctrlKey)&&gs!="Ctrl"){gq="Ctrl-"+gq}if((bP?gr.ctrlKey:gr.metaKey)&&gs!="Cmd"){gq="Cmd-"+gq}if(!gt&&gr.shiftKey&&gs!="Shift"){gq="Shift-"+gq}return gq};function f4(gq){return typeof gq=="string"?ff[gq]:gq}H.fromTextArea=function(gx,gy){gy=gy?aM(gy):{};gy.value=gx.value;if(!gy.tabindex&&gx.tabIndex){gy.tabindex=gx.tabIndex}if(!gy.placeholder&&gx.placeholder){gy.placeholder=gx.placeholder}if(gy.autofocus==null){var gq=dO();gy.autofocus=gq==gx||gx.getAttribute("autofocus")!=null&&gq==document.body}function gu(){gx.value=gw.getValue()}if(gx.form){bW(gx.form,"submit",gu);if(!gy.leaveSubmitMethodAlone){var gr=gx.form,gv=gr.submit;try{var gt=gr.submit=function(){gu();gr.submit=gv;gr.submit();gr.submit=gt}}catch(gs){}}}gy.finishInit=function(gz){gz.save=gu;gz.getTextArea=function(){return gx};gz.toTextArea=function(){gz.toTextArea=isNaN;gu();gx.parentNode.removeChild(gz.getWrapperElement());gx.style.display="";if(gx.form){ef(gx.form,"submit",gu);if(typeof gx.form.submit=="function"){gx.form.submit=gv}}}};gx.style.display="none";var gw=H(function(gz){gx.parentNode.insertBefore(gz,gx.nextSibling)},gy);return gw};var eX=H.StringStream=function(gq,gr){this.pos=this.start=0;this.string=gq;this.tabSize=gr||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eX.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(gq){var gs=this.string.charAt(this.pos);if(typeof gq=="string"){var gr=gs==gq}else{var gr=gs&&(gq.test?gq.test(gs):gq(gs))}if(gr){++this.pos;return gs}},eatWhile:function(gq){var gr=this.pos;while(this.eat(gq)){}return this.pos>gr},eatSpace:function(){var gq=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>gq},skipToEnd:function(){this.pos=this.string.length},skipTo:function(gq){var gr=this.string.indexOf(gq,this.pos);if(gr>-1){this.pos=gr;return true}},backUp:function(gq){this.pos-=gq},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bS(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bS(this.string,null,this.tabSize)-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},match:function(gu,gr,gq){if(typeof gu=="string"){var gv=function(gw){return gq?gw.toLowerCase():gw};var gt=this.string.substr(this.pos,gu.length);if(gv(gt)==gv(gu)){if(gr!==false){this.pos+=gu.length}return true}}else{var gs=this.string.slice(this.pos).match(gu);if(gs&&gs.index>0){return null}if(gs&&gr!==false){this.pos+=gs[0].length}return gs}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(gr,gq){this.lineStart+=gr;try{return gq()}finally{this.lineStart-=gr}}};var a4=0;var P=H.TextMarker=function(gr,gq){this.lines=[];this.type=gq;this.doc=gr;this.id=++a4};bx(P);P.prototype.clear=function(){if(this.explicitlyCleared){return}var gx=this.doc.cm,gr=gx&&!gx.curOp;if(gr){cH(gx)}if(fn(this,"clear")){var gy=this.find();if(gy){ae(this,"clear",gy.from,gy.to)}}var gs=null,gv=null;for(var gt=0;gt<this.lines.length;++gt){var gz=this.lines[gt];var gw=fe(gz.markedSpans,this);if(gx&&!this.collapsed){R(gx,bM(gz),"text")}else{if(gx){if(gw.to!=null){gv=bM(gz)}if(gw.from!=null){gs=bM(gz)}}}gz.markedSpans=eK(gz.markedSpans,gw);if(gw.from==null&&this.collapsed&&!fB(this.doc,gz)&&gx){gc(gz,aX(gx.display))}}if(gx&&this.collapsed&&!gx.options.lineWrapping){for(var gt=0;gt<this.lines.length;++gt){var gq=x(this.lines[gt]),gu=eq(gq);if(gu>gx.display.maxLineLength){gx.display.maxLine=gq;gx.display.maxLineLength=gu;gx.display.maxLineChanged=true}}}if(gs!=null&&gx&&this.collapsed){ah(gx,gs,gv+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gx){eB(gx.doc)}}if(gx){ae(gx,"markerCleared",gx,this)}if(gr){al(gx)}if(this.parent){this.parent.clear()}};P.prototype.find=function(gt,gr){if(gt==null&&this.type=="bookmark"){gt=1}var gw,gv;for(var gs=0;gs<this.lines.length;++gs){var gq=this.lines[gs];var gu=fe(gq.markedSpans,this);if(gu.from!=null){gw=W(gr?gq:bM(gq),gu.from);if(gt==-1){return gw}}if(gu.to!=null){gv=W(gr?gq:bM(gq),gu.to);if(gt==1){return gv}}}return gw&&{from:gw,to:gv}};P.prototype.changed=function(){var gs=this.find(-1,true),gr=this,gq=this.doc.cm;if(!gs||!gq){return}cL(gq,function(){var gu=gs.line,gv=bM(gs.line);var gt=fg(gq,gv);if(gt){at(gt);gq.curOp.selectionChanged=gq.curOp.forceUpdate=true}gq.curOp.updateMaxLine=true;if(!fB(gr.doc,gu)&&gr.height!=null){var gx=gr.height;gr.height=null;var gw=cX(gr)-gx;if(gw){gc(gu,gu.height+gw)}}})};P.prototype.attachLine=function(gq){if(!this.lines.length&&this.doc.cm){var gr=this.doc.cm.curOp;if(!gr.maybeHiddenMarkers||dh(gr.maybeHiddenMarkers,this)==-1){(gr.maybeUnhiddenMarkers||(gr.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(gq)};P.prototype.detachLine=function(gq){this.lines.splice(dh(this.lines,gq),1);if(!this.lines.length&&this.doc.cm){var gr=this.doc.cm.curOp;(gr.maybeHiddenMarkers||(gr.maybeHiddenMarkers=[])).push(this)}};var a4=0;function eI(gy,gw,gx,gA,gu){if(gA&&gA.shared){return O(gy,gw,gx,gA,gu)}if(gy.cm&&!gy.cm.curOp){return c1(gy.cm,eI)(gy,gw,gx,gA,gu)}var gt=new P(gy,gu),gz=ce(gw,gx);if(gA){aM(gA,gt,false)}if(gz>0||gz==0&&gt.clearWhenEmpty!==false){return gt}if(gt.replacedWith){gt.collapsed=true;gt.widgetNode=f9("span",[gt.replacedWith],"CodeMirror-widget");if(!gA.handleMouseEvents){gt.widgetNode.setAttribute("cm-ignore-events","true")}if(gA.insertLeft){gt.widgetNode.insertLeft=true}}if(gt.collapsed){if(z(gy,gw.line,gw,gx,gt)||gw.line!=gx.line&&z(gy,gx.line,gw,gx,gt)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}a6=true}if(gt.addToHistory){fS(gy,{from:gw,to:gx,origin:"markText"},gy.sel,NaN)}var gr=gw.line,gv=gy.cm,gq;gy.iter(gr,gx.line+1,function(gB){if(gv&&gt.collapsed&&!gv.options.lineWrapping&&x(gB)==gv.display.maxLine){gq=true}if(gt.collapsed&&gr!=gw.line){gc(gB,0)}cc(gB,new ek(gt,gr==gw.line?gw.ch:null,gr==gx.line?gx.ch:null));++gr});if(gt.collapsed){gy.iter(gw.line,gx.line+1,function(gB){if(fB(gy,gB)){gc(gB,0)}})}if(gt.clearOnEnter){bW(gt,"beforeCursorEnter",function(){gt.clear()})}if(gt.readOnly){gj=true;if(gy.history.done.length||gy.history.undone.length){gy.clearHistory()}}if(gt.collapsed){gt.id=++a4;gt.atomic=true}if(gv){if(gq){gv.curOp.updateMaxLine=true}if(gt.collapsed){ah(gv,gw.line,gx.line+1)}else{if(gt.className||gt.title||gt.startStyle||gt.endStyle||gt.css){for(var gs=gw.line;gs<=gx.line;gs++){R(gv,gs,"text")}}}if(gt.atomic){eB(gv.doc)}ae(gv,"markerAdded",gv,gt)}return gt}var y=H.SharedTextMarker=function(gs,gr){this.markers=gs;this.primary=gr;for(var gq=0;gq<gs.length;++gq){gs[gq].parent=this}};bx(y);y.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gq=0;gq<this.markers.length;++gq){this.markers[gq].clear()}ae(this,"clear")};y.prototype.find=function(gr,gq){return this.primary.find(gr,gq)};function O(gu,gx,gw,gq,gs){gq=aM(gq);gq.shared=false;var gv=[eI(gu,gx,gw,gq,gs)],gr=gv[0];var gt=gq.widgetNode;d8(gu,function(gz){if(gt){gq.widgetNode=gt.cloneNode(true)}gv.push(eI(gz,fP(gz,gx),fP(gz,gw),gq,gs));for(var gy=0;gy<gz.linked.length;++gy){if(gz.linked[gy].isParent){return}}gr=fL(gv)});return new y(gv,gr)}function eT(gq){return gq.findMarks(W(gq.first,0),gq.clipPos(W(gq.lastLine())),function(gr){return gr.parent})}function dF(gv,gw){for(var gt=0;gt<gw.length;gt++){var gr=gw[gt],gx=gr.find();var gq=gv.clipPos(gx.from),gu=gv.clipPos(gx.to);if(ce(gq,gu)){var gs=eI(gv,gq,gu,gr.primary,gr.primary.type);gr.markers.push(gs);gs.parent=gr}}}function er(gt){for(var gs=0;gs<gt.length;gs++){var gq=gt[gs],gv=[gq.primary.doc];d8(gq.primary.doc,function(gw){gv.push(gw)});for(var gr=0;gr<gq.markers.length;gr++){var gu=gq.markers[gr];if(dh(gv,gu.doc)==-1){gu.parent=null;gq.markers.splice(gr--,1)}}}}function ek(gq,gs,gr){this.marker=gq;this.from=gs;this.to=gr}function fe(gs,gq){if(gs){for(var gr=0;gr<gs.length;++gr){var gt=gs[gr];if(gt.marker==gq){return gt}}}}function eK(gr,gs){for(var gt,gq=0;gq<gr.length;++gq){if(gr[gq]!=gs){(gt||(gt=[])).push(gr[gq])}}return gt}function cc(gq,gr){gq.markedSpans=gq.markedSpans?gq.markedSpans.concat([gr]):[gr];gr.marker.attachLine(gq)}function aP(gr,gs,gw){if(gr){for(var gu=0,gx;gu<gr.length;++gu){var gy=gr[gu],gv=gy.marker;var gq=gy.from==null||(gv.inclusiveLeft?gy.from<=gs:gy.from<gs);if(gq||gy.from==gs&&gv.type=="bookmark"&&(!gw||!gy.marker.insertLeft)){var gt=gy.to==null||(gv.inclusiveRight?gy.to>=gs:gy.to>gs);(gx||(gx=[])).push(new ek(gv,gy.from,gt?null:gy.to))}}}return gx}function aA(gr,gt,gw){if(gr){for(var gu=0,gx;gu<gr.length;++gu){var gy=gr[gu],gv=gy.marker;var gs=gy.to==null||(gv.inclusiveRight?gy.to>=gt:gy.to>gt);if(gs||gy.from==gt&&gv.type=="bookmark"&&(!gw||gy.marker.insertLeft)){var gq=gy.from==null||(gv.inclusiveLeft?gy.from<=gt:gy.from<gt);(gx||(gx=[])).push(new ek(gv,gq?null:gy.from-gt,gy.to==null?null:gy.to-gt))}}}return gx}function em(gC,gz){if(gz.full){return null}var gy=b8(gC,gz.from.line)&&fk(gC,gz.from.line).markedSpans;var gF=b8(gC,gz.to.line)&&fk(gC,gz.to.line).markedSpans;if(!gy&&!gF){return null}var gr=gz.from.ch,gu=gz.to.ch,gx=ce(gz.from,gz.to)==0;var gw=aP(gy,gr,gx);var gE=aA(gF,gu,gx);var gD=gz.text.length==1,gs=fL(gz.text).length+(gD?gr:0);if(gw){for(var gt=0;gt<gw.length;++gt){var gB=gw[gt];if(gB.to==null){var gG=fe(gE,gB.marker);if(!gG){gB.to=gr}else{if(gD){gB.to=gG.to==null?null:gG.to+gs}}}}}if(gE){for(var gt=0;gt<gE.length;++gt){var gB=gE[gt];if(gB.to!=null){gB.to+=gs}if(gB.from==null){var gG=fe(gw,gB.marker);if(!gG){gB.from=gs;if(gD){(gw||(gw=[])).push(gB)}}}else{gB.from+=gs;if(gD){(gw||(gw=[])).push(gB)}}}}if(gw){gw=q(gw)}if(gE&&gE!=gw){gE=q(gE)}var gv=[gw];if(!gD){var gA=gz.text.length-2,gq;if(gA>0&&gw){for(var gt=0;gt<gw.length;++gt){if(gw[gt].to==null){(gq||(gq=[])).push(new ek(gw[gt].marker,null,null))}}}for(var gt=0;gt<gA;++gt){gv.push(gq)}gv.push(gE)}return gv}function q(gr){for(var gq=0;gq<gr.length;++gq){var gs=gr[gq];if(gs.from!=null&&gs.from==gs.to&&gs.marker.clearWhenEmpty!==false){gr.splice(gq--,1)}}if(!gr.length){return null}return gr}function ea(gy,gw){var gq=b3(gy,gw);var gz=em(gy,gw);if(!gq){return gz}if(!gz){return gq}for(var gt=0;gt<gq.length;++gt){var gu=gq[gt],gv=gz[gt];if(gu&&gv){spans:for(var gs=0;gs<gv.length;++gs){var gx=gv[gs];for(var gr=0;gr<gu.length;++gr){if(gu[gr].marker==gx.marker){continue spans}}gu.push(gx)}}else{if(gv){gq[gt]=gv}}}return gq}function cG(gC,gA,gB){var gu=null;gC.iter(gA.line,gB.line+1,function(gD){if(gD.markedSpans){for(var gE=0;gE<gD.markedSpans.length;++gE){var gF=gD.markedSpans[gE].marker;if(gF.readOnly&&(!gu||dh(gu,gF)==-1)){(gu||(gu=[])).push(gF)}}}});if(!gu){return null}var gv=[{from:gA,to:gB}];for(var gw=0;gw<gu.length;++gw){var gx=gu[gw],gs=gx.find(0);for(var gt=0;gt<gv.length;++gt){var gr=gv[gt];if(ce(gr.to,gs.from)<0||ce(gr.from,gs.to)>0){continue}var gz=[gt,1],gq=ce(gr.from,gs.from),gy=ce(gr.to,gs.to);if(gq<0||!gx.inclusiveLeft&&!gq){gz.push({from:gr.from,to:gs.from})}if(gy>0||!gx.inclusiveRight&&!gy){gz.push({from:gs.to,to:gr.to})}gv.splice.apply(gv,gz);gt+=gz.length-1}}return gv}function gf(gq){var gs=gq.markedSpans;if(!gs){return}for(var gr=0;gr<gs.length;++gr){gs[gr].marker.detachLine(gq)}gq.markedSpans=null}function c2(gq,gs){if(!gs){return}for(var gr=0;gr<gs.length;++gr){gs[gr].marker.attachLine(gq)}gq.markedSpans=gs}function v(gq){return gq.inclusiveLeft?-1:0}function bV(gq){return gq.inclusiveRight?1:0}function dQ(gt,gr){var gv=gt.lines.length-gr.lines.length;if(gv!=0){return gv}var gs=gt.find(),gw=gr.find();var gq=ce(gs.from,gw.from)||v(gt)-v(gr);if(gq){return -gq}var gu=ce(gs.to,gw.to)||bV(gt)-bV(gr);if(gu){return gu}return gr.id-gt.id}function a5(gr,gv){var gq=a6&&gr.markedSpans,gu;if(gq){for(var gt,gs=0;gs<gq.length;++gs){gt=gq[gs];if(gt.marker.collapsed&&(gv?gt.from:gt.to)==null&&(!gu||dQ(gu,gt.marker)<0)){gu=gt.marker}}}return gu}function eS(gq){return a5(gq,true)}function ex(gq){return a5(gq,false)}function z(gy,gs,gw,gx,gu){var gB=fk(gy,gs);var gq=a6&&gB.markedSpans;if(gq){for(var gt=0;gt<gq.length;++gt){var gr=gq[gt];if(!gr.marker.collapsed){continue}var gA=gr.marker.find(0);var gz=ce(gA.from,gw)||v(gr.marker)-v(gu);var gv=ce(gA.to,gx)||bV(gr.marker)-bV(gu);if(gz>=0&&gv<=0||gz<=0&&gv>=0){continue}if(gz<=0&&(ce(gA.to,gw)>0||(gr.marker.inclusiveRight&&gu.inclusiveLeft))||gz>=0&&(ce(gA.from,gx)<0||(gr.marker.inclusiveLeft&&gu.inclusiveRight))){return true}}}}function x(gr){var gq;while(gq=eS(gr)){gr=gq.find(-1,true).line}return gr}function g(gs){var gq,gr;while(gq=ex(gs)){gs=gq.find(1,true).line;(gr||(gr=[])).push(gs)}return gr}function aV(gt,gr){var gq=fk(gt,gr),gs=x(gq);if(gq==gs){return gr}return bM(gs)}function d3(gt,gs){if(gs>gt.lastLine()){return gs}var gr=fk(gt,gs),gq;if(!fB(gt,gr)){return gs}while(gq=ex(gr)){gr=gq.find(1,true).line}return bM(gr)+1}function fB(gu,gr){var gq=a6&&gr.markedSpans;if(gq){for(var gt,gs=0;gs<gq.length;++gs){gt=gq[gs];if(!gt.marker.collapsed){continue}if(gt.from==null){return true}if(gt.marker.widgetNode){continue}if(gt.from==0&&gt.marker.inclusiveLeft&&T(gu,gr,gt)){return true}}}}function T(gv,gr,gt){if(gt.to==null){var gq=gt.marker.find(1,true);return T(gv,gq.line,fe(gq.line.markedSpans,gt.marker))}if(gt.marker.inclusiveRight&&gt.to==gr.text.length){return true}for(var gu,gs=0;gs<gr.markedSpans.length;++gs){gu=gr.markedSpans[gs];if(gu.marker.collapsed&&!gu.marker.widgetNode&&gu.from==gt.to&&(gu.to==null||gu.to!=gt.from)&&(gu.marker.inclusiveLeft||gt.marker.inclusiveRight)&&T(gv,gr,gu)){return true}}}var dB=H.LineWidget=function(gt,gs,gq){if(gq){for(var gr in gq){if(gq.hasOwnProperty(gr)){this[gr]=gq[gr]}}}this.doc=gt;this.node=gs};bx(dB);function dZ(gq,gr,gs){if(bL(gr)<((gq.curOp&&gq.curOp.scrollTop)||gq.doc.scrollTop)){cK(gq,null,gs)}}dB.prototype.clear=function(){var gr=this.doc.cm,gt=this.line.widgets,gs=this.line,gv=bM(gs);if(gv==null||!gt){return}for(var gu=0;gu<gt.length;++gu){if(gt[gu]==this){gt.splice(gu--,1)}}if(!gt.length){gs.widgets=null}var gq=cX(this);gc(gs,Math.max(0,gs.height-gq));if(gr){cL(gr,function(){dZ(gr,gs,-gq);R(gr,gv,"widget")})}};dB.prototype.changed=function(){var gr=this.height,gq=this.doc.cm,gs=this.line;this.height=null;var gt=cX(this)-gr;if(!gt){return}gc(gs,gs.height+gt);if(gq){cL(gq,function(){gq.curOp.forceUpdate=true;dZ(gq,gs,gt)})}};function cX(gs){if(gs.height!=null){return gs.height}var gq=gs.doc.cm;if(!gq){return 0}if(!gh(document.body,gs.node)){var gr="position: relative;";if(gs.coverGutter){gr+="margin-left: -"+gq.display.gutters.offsetWidth+"px;"}if(gs.noHScroll){gr+="width: "+gq.display.wrapper.clientWidth+"px;"}bQ(gq.display.measure,f9("div",[gs.node],null,gr))}return gs.height=gs.node.parentNode.offsetHeight}function bG(gv,gu,gs,gr){var gt=new dB(gv,gs,gr);var gq=gv.cm;if(gq&&gt.noHScroll){gq.display.alignWidgets=true}eC(gv,gu,"widget",function(gx){var gy=gx.widgets||(gx.widgets=[]);if(gt.insertAt==null){gy.push(gt)}else{gy.splice(Math.min(gy.length-1,Math.max(0,gt.insertAt)),0,gt)}gt.line=gx;if(gq&&!fB(gv,gx)){var gw=bL(gx)<gv.scrollTop;gc(gx,gx.height+cX(gt));if(gw){cK(gq,null,gt.height)}gq.curOp.forceUpdate=true}return true});return gt}var gd=H.Line=function(gs,gr,gq){this.text=gs;c2(this,gr);this.height=gq?gq(this):1};bx(gd);gd.prototype.lineNo=function(){return bM(this)};function ep(gr,gu,gs,gq){gr.text=gu;if(gr.stateAfter){gr.stateAfter=null}if(gr.styles){gr.styles=null}if(gr.order!=null){gr.order=null}gf(gr);c2(gr,gs);var gt=gq?gq(gr):1;if(gt!=gr.height){gc(gr,gt)}}function bA(gq){gq.parent=null;gf(gq)}function di(gs,gr){if(gs){for(;;){var gq=gs.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!gq){break}gs=gs.slice(0,gq.index)+gs.slice(gq.index+gq[0].length);var gt=gq[1]?"bgClass":"textClass";if(gr[gt]==null){gr[gt]=gq[2]}else{if(!(new RegExp("(?:^|s)"+gq[2]+"(?:$|s)")).test(gr[gt])){gr[gt]+=" "+gq[2]}}}}return gs}function fv(gs,gr){if(gs.blankLine){return gs.blankLine(gr)}if(!gs.innerMode){return}var gq=H.innerMode(gs,gr);if(gq.mode.blankLine){return gq.mode.blankLine(gq.state)}}function eD(gv,gu,gt,gq){for(var gr=0;gr<10;gr++){if(gq){gq[0]=H.innerMode(gv,gt).mode}var gs=gv.token(gu,gt);if(gu.pos>gu.start){return gs}}throw new Error("Mode "+gv.name+" failed to advance stream.")}function cp(gz,gx,gu,gt){function gq(gC){return{start:gA.start,end:gA.pos,string:gA.current(),type:gs||null,state:gC?b2(gy.mode,gr):gr}}var gy=gz.doc,gv=gy.mode,gs;gx=fP(gy,gx);var gB=fk(gy,gx.line),gr=dC(gz,gx.line,gu);var gA=new eX(gB.text,gz.options.tabSize),gw;if(gt){gw=[]}while((gt||gA.pos<gx.ch)&&!gA.eol()){gA.start=gA.pos;gs=eD(gv,gA,gr);if(gt){gw.push(gq(true))}}return gt?gw:gq()}function w(gA,gC,gv,gr,gw,gt,gu){var gs=gv.flattenSpans;if(gs==null){gs=gA.options.flattenSpans}var gy=0,gx=null;var gB=new eX(gC,gA.options.tabSize),gq;var gE=gA.options.addModeClass&&[null];if(gC==""){di(fv(gv,gr),gt)}while(!gB.eol()){if(gB.pos>gA.options.maxHighlightLength){gs=false;if(gu){dx(gA,gC,gr,gB.pos)}gB.pos=gC.length;gq=null}else{gq=di(eD(gv,gB,gr,gE),gt)}if(gE){var gD=gE[0].name;if(gD){gq="m-"+(gq?gD+" "+gq:gD)}}if(!gs||gx!=gq){while(gy<gB.start){gy=Math.min(gB.start,gy+50000);gw(gy,gx)}gx=gq}gB.start=gB.pos}while(gy<gB.pos){var gz=Math.min(gB.pos,gy+50000);gw(gz,gx);gy=gz}}function fE(gx,gz,gq,gu){var gy=[gx.state.modeGen],gt={};w(gx,gz.text,gx.doc.mode,gq,function(gA,gB){gy.push(gA,gB)},gt,gu);for(var gr=0;gr<gx.state.overlays.length;++gr){var gv=gx.state.overlays[gr],gw=1,gs=0;w(gx,gz.text,gv.mode,true,function(gA,gC){var gE=gw;while(gs<gA){var gB=gy[gw];if(gB>gA){gy.splice(gw,1,gA,gy[gw+1],gB)}gw+=2;gs=Math.min(gA,gB)}if(!gC){return}if(gv.opaque){gy.splice(gE,gw-gE,gA,"cm-overlay "+gC);gw=gE+2}else{for(;gE<gw;gE+=2){var gD=gy[gE+1];gy[gE+1]=(gD?gD+" ":"")+"cm-overlay "+gC}}},gt)}return{styles:gy,classes:gt.bgClass||gt.textClass?gt:null}}function c5(gr,gs,gu){if(!gs.styles||gs.styles[0]!=gr.state.modeGen){var gt=dC(gr,bM(gs));var gq=fE(gr,gs,gs.text.length>gr.options.maxHighlightLength?b2(gr.doc.mode,gt):gt);gs.stateAfter=gt;gs.styles=gq.styles;if(gq.classes){gs.styleClasses=gq.classes}else{if(gs.styleClasses){gs.styleClasses=null}}if(gu===gr.doc.frontier){gr.doc.frontier++}}return gs.styles}function dx(gq,gv,gs,gr){var gu=gq.doc.mode;var gt=new eX(gv,gq.options.tabSize);gt.start=gt.pos=gr||0;if(gv==""){fv(gu,gs)}while(!gt.eol()){eD(gu,gt,gs);gt.start=gt.pos}}var dW={},b0={};function e0(gs,gr){if(!gs||/^\s*$/.test(gs)){return null}var gq=gr.addModeClass?b0:dW;return gq[gs]||(gq[gs]=gs.replace(/\S+/g,"cm-$&"))}function eV(gr,gv){var gw=f9("span",null,null,cZ?"padding-right: .1px":null);var gt={pre:f9("pre",[gw],"CodeMirror-line"),content:gw,col:0,pos:0,cm:gr,splitSpaces:(dK||cZ)&&gr.getOption("lineWrapping")};gv.measure={};for(var gu=0;gu<=(gv.rest?gv.rest.length:0);gu++){var gs=gu?gv.rest[gu-1]:gv.line,gq;gt.pos=0;gt.addToken=t;if(bN(gr.display.measure)&&(gq=a(gs))){gt.addToken=U(gt.addToken,gq)}gt.map=[];var gx=gv!=gr.display.externalMeasured&&bM(gs);bn(gs,gt,c5(gr,gs,gx));if(gs.styleClasses){if(gs.styleClasses.bgClass){gt.bgClass=fZ(gs.styleClasses.bgClass,gt.bgClass||"")}if(gs.styleClasses.textClass){gt.textClass=fZ(gs.styleClasses.textClass,gt.textClass||"")}}if(gt.map.length==0){gt.map.push(0,0,gt.content.appendChild(bm(gr.display.measure)))}if(gu==0){gv.measure.map=gt.map;gv.measure.cache={}}else{(gv.measure.maps||(gv.measure.maps=[])).push(gt.map);(gv.measure.caches||(gv.measure.caches=[])).push({})}}if(cZ&&/\bcm-tab\b/.test(gt.content.lastChild.className)){gt.content.className="cm-tab-wrap-hack"}aD(gr,"renderLine",gr,gv.line,gt.pre);if(gt.pre.className){gt.textClass=fZ(gt.pre.className,gt.textClass||"")}return gt}function fh(gr){var gq=f9("span","\u2022","cm-invalidchar");gq.title="\\u"+gr.charCodeAt(0).toString(16);gq.setAttribute("aria-label",gq.title);return gq}function t(gB,gw,gG,gD,gz,gI,gv){if(!gw){return}var gF=gB.splitSpaces?gw.replace(/ {3,}/g,cE):gw;var gq=gB.cm.state.specialChars,gr=false;if(!gq.test(gw)){gB.col+=gw.length;var gE=document.createTextNode(gF);gB.map.push(gB.pos,gB.pos+gw.length,gE);if(dK&&k<9){gr=true}gB.pos+=gw.length}else{var gE=document.createDocumentFragment(),gt=0;while(true){gq.lastIndex=gt;var gC=gq.exec(gw);var gH=gC?gC.index-gt:gw.length-gt;if(gH){var gy=document.createTextNode(gF.slice(gt,gt+gH));if(dK&&k<9){gE.appendChild(f9("span",[gy]))}else{gE.appendChild(gy)}gB.map.push(gB.pos,gB.pos+gH,gy);gB.col+=gH;gB.pos+=gH}if(!gC){break}gt+=gH+1;if(gC[0]=="\t"){var gA=gB.cm.options.tabSize,gx=gA-gB.col%gA;var gy=gE.appendChild(f9("span",co(gx),"cm-tab"));gy.setAttribute("role","presentation");gy.setAttribute("cm-text","\t");gB.col+=gx}else{if(gC[0]=="\r"||gC[0]=="\n"){var gy=gE.appendChild(f9("span",gC[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));gy.setAttribute("cm-text",gC[0]);gB.col+=1}else{var gy=gB.cm.options.specialCharPlaceholder(gC[0]);gy.setAttribute("cm-text",gC[0]);if(dK&&k<9){gE.appendChild(f9("span",[gy]))}else{gE.appendChild(gy)}gB.col+=1}}gB.map.push(gB.pos,gB.pos+1,gy);gB.pos++}}if(gG||gD||gz||gr||gv){var gs=gG||"";if(gD){gs+=gD}if(gz){gs+=gz}var gu=f9("span",[gE],gs,gv);if(gI){gu.title=gI}return gB.content.appendChild(gu)}gB.content.appendChild(gE)}function cE(gq){var gr=" ";for(var gs=0;gs<gq.length-2;++gs){gr+=gs%2?" ":"\u00a0"}gr+=" ";return gr}function U(gr,gq){return function(gz,gB,gs,gw,gC,gA,gy){gs=gs?gs+" cm-force-border":"cm-force-border";var gt=gz.pos,gv=gt+gB.length;for(;;){for(var gx=0;gx<gq.length;gx++){var gu=gq[gx];if(gu.to>gt&&gu.from<=gt){break}}if(gu.to>=gv){return gr(gz,gB,gs,gw,gC,gA,gy)}gr(gz,gB.slice(0,gu.to-gt),gs,gw,null,gA,gy);gw=null;gB=gB.slice(gu.to-gt);gt=gu.to}}}function ac(gr,gt,gq,gs){var gu=!gs&&gq.widgetNode;if(gu){gr.map.push(gr.pos,gr.pos+gt,gu)}if(!gs&&gr.cm.display.input.needsContentAttribute){if(!gu){gu=gr.content.appendChild(document.createElement("span"))}gu.setAttribute("cm-marker",gq.id)}if(gu){gr.cm.display.input.setUneditable(gu);gr.content.appendChild(gu)}gr.pos+=gt}function bn(gA,gH,gz){var gv=gA.markedSpans,gx=gA.text,gF=0;if(!gv){for(var gK=1;gK<gz.length;gK+=2){gH.addToken(gH,gx.slice(gF,gF=gz[gK]),e0(gz[gK+1],gH.cm.options))}return}var gL=gx.length,gu=0,gK=1,gD="",gM,gB;var gO=0,gq,gN,gE,gP,gs;for(;;){if(gO==gu){gq=gN=gE=gP=gB="";gs=null;gO=Infinity;var gw=[],gy;for(var gI=0;gI<gv.length;++gI){var gJ=gv[gI],gG=gJ.marker;if(gG.type=="bookmark"&&gJ.from==gu&&gG.widgetNode){gw.push(gG)}else{if(gJ.from<=gu&&(gJ.to==null||gJ.to>gu||gG.collapsed&&gJ.to==gu&&gJ.from==gu)){if(gJ.to!=null&&gJ.to!=gu&&gO>gJ.to){gO=gJ.to;gN=""}if(gG.className){gq+=" "+gG.className}if(gG.css){gB=(gB?gB+";":"")+gG.css}if(gG.startStyle&&gJ.from==gu){gE+=" "+gG.startStyle}if(gG.endStyle&&gJ.to==gO){(gy||(gy=[])).push(gG.endStyle,gJ.to)}if(gG.title&&!gP){gP=gG.title}if(gG.collapsed&&(!gs||dQ(gs.marker,gG)<0)){gs=gJ}}else{if(gJ.from>gu&&gO>gJ.from){gO=gJ.from}}}}if(gy){for(var gI=0;gI<gy.length;gI+=2){if(gy[gI+1]==gO){gN+=" "+gy[gI]}}}if(!gs||gs.from==gu){for(var gI=0;gI<gw.length;++gI){ac(gH,0,gw[gI])}}if(gs&&(gs.from||0)==gu){ac(gH,(gs.to==null?gL+1:gs.to)-gu,gs.marker,gs.from==null);if(gs.to==null){return}if(gs.to==gu){gs=false}}}if(gu>=gL){break}var gC=Math.min(gL,gO);while(true){if(gD){var gr=gu+gD.length;if(!gs){var gt=gr>gC?gD.slice(0,gC-gu):gD;gH.addToken(gH,gt,gM?gM+gq:gq,gE,gu+gt.length==gO?gN:"",gP,gB)}if(gr>=gC){gD=gD.slice(gC-gu);gu=gC;break}gu=gr;gE=""}gD=gx.slice(gF,gF=gz[gK++]);gM=e0(gz[gK++],gH.cm.options)}}}function dS(gq,gr){return gr.from.ch==0&&gr.to.ch==0&&fL(gr.text)==""&&(!gq.cm||gq.cm.options.wholeLineUpdateBefore)}function fD(gD,gy,gr,gu){function gE(gG){return gr?gr[gG]:null}function gs(gG,gI,gH){ep(gG,gI,gH,gu);ae(gG,"change",gG,gy)}function gq(gJ,gH){for(var gI=gJ,gG=[];gI<gH;++gI){gG.push(new gd(gF[gI],gE(gI),gu))}return gG}var gC=gy.from,gB=gy.to,gF=gy.text;var gz=fk(gD,gC.line),gA=fk(gD,gB.line);var gx=fL(gF),gt=gE(gF.length-1),gw=gB.line-gC.line;if(gy.full){gD.insert(0,gq(0,gF.length));gD.remove(gF.length,gD.size-gF.length)}else{if(dS(gD,gy)){var gv=gq(0,gF.length-1);gs(gA,gA.text,gt);if(gw){gD.remove(gC.line,gw)}if(gv.length){gD.insert(gC.line,gv)}}else{if(gz==gA){if(gF.length==1){gs(gz,gz.text.slice(0,gC.ch)+gx+gz.text.slice(gB.ch),gt)}else{var gv=gq(1,gF.length-1);gv.push(new gd(gx+gz.text.slice(gB.ch),gt,gu));gs(gz,gz.text.slice(0,gC.ch)+gF[0],gE(0));gD.insert(gC.line+1,gv)}}else{if(gF.length==1){gs(gz,gz.text.slice(0,gC.ch)+gF[0]+gA.text.slice(gB.ch),gE(0));gD.remove(gC.line+1,gw)}else{gs(gz,gz.text.slice(0,gC.ch)+gF[0],gE(0));gs(gA,gx+gA.text.slice(gB.ch),gt);var gv=gq(1,gF.length-1);if(gw>1){gD.remove(gC.line+1,gw-1)}gD.insert(gC.line+1,gv)}}}}ae(gD,"change",gD,gy)}function e3(gr){this.lines=gr;this.parent=null;for(var gs=0,gq=0;gs<gr.length;++gs){gr[gs].parent=this;gq+=gr[gs].height}this.height=gq}e3.prototype={chunkSize:function(){return this.lines.length},removeInner:function(gq,gu){for(var gs=gq,gt=gq+gu;gs<gt;++gs){var gr=this.lines[gs];this.height-=gr.height;bA(gr);ae(gr,"delete")}this.lines.splice(gq,gu)},collapse:function(gq){gq.push.apply(gq,this.lines)},insertInner:function(gr,gs,gq){this.height+=gq;this.lines=this.lines.slice(0,gr).concat(gs).concat(this.lines.slice(gr));for(var gt=0;gt<gs.length;++gt){gs[gt].parent=this}},iterN:function(gq,gt,gs){for(var gr=gq+gt;gq<gr;++gq){if(gs(this.lines[gq])){return true}}}};function fC(gt){this.children=gt;var gs=0,gq=0;for(var gr=0;gr<gt.length;++gr){var gu=gt[gr];gs+=gu.chunkSize();gq+=gu.height;gu.parent=this}this.size=gs;this.height=gq;this.parent=null}fC.prototype={chunkSize:function(){return this.size},removeInner:function(gq,gx){this.size-=gx;for(var gs=0;gs<this.children.length;++gs){var gw=this.children[gs],gu=gw.chunkSize();if(gq<gu){var gt=Math.min(gx,gu-gq),gv=gw.height;gw.removeInner(gq,gt);this.height-=gv-gw.height;if(gu==gt){this.children.splice(gs--,1);gw.parent=null}if((gx-=gt)==0){break}gq=0}else{gq-=gu}}if(this.size-gx<25&&(this.children.length>1||!(this.children[0] instanceof e3))){var gr=[];this.collapse(gr);this.children=[new e3(gr)];this.children[0].parent=this}},collapse:function(gq){for(var gr=0;gr<this.children.length;++gr){this.children[gr].collapse(gq)}},insertInner:function(gr,gs,gq){this.size+=gs.length;this.height+=gq;for(var gv=0;gv<this.children.length;++gv){var gx=this.children[gv],gw=gx.chunkSize();if(gr<=gw){gx.insertInner(gr,gs,gq);if(gx.lines&&gx.lines.length>50){while(gx.lines.length>50){var gu=gx.lines.splice(gx.lines.length-25,25);var gt=new e3(gu);gx.height-=gt.height;this.children.splice(gv+1,0,gt);gt.parent=this}this.maybeSpill()}break}gr-=gw}},maybeSpill:function(){if(this.children.length<=10){return}var gt=this;do{var gr=gt.children.splice(gt.children.length-5,5);var gs=new fC(gr);if(!gt.parent){var gu=new fC(gt.children);gu.parent=gt;gt.children=[gu,gs];gt=gu}else{gt.size-=gs.size;gt.height-=gs.height;var gq=dh(gt.parent.children,gt);gt.parent.children.splice(gq+1,0,gs)}gs.parent=gt.parent}while(gt.children.length>10);gt.parent.maybeSpill()},iterN:function(gq,gw,gv){for(var gr=0;gr<this.children.length;++gr){var gu=this.children[gr],gt=gu.chunkSize();if(gq<gt){var gs=Math.min(gw,gt-gq);if(gu.iterN(gq,gs,gv)){return true}if((gw-=gs)==0){break}gq=0}else{gq-=gt}}}};var cq=0;var ar=H.Doc=function(gt,gs,gq,gr){if(!(this instanceof ar)){return new ar(gt,gs,gq,gr)}if(gq==null){gq=0}fC.call(this,[new e3([new gd("",null)])]);this.first=gq;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=gq;var gu=W(gq,0);this.sel=eW(gu);this.history=new f0(null);this.id=++cq;this.modeOption=gs;this.lineSep=gr;this.extend=false;if(typeof gt=="string"){gt=this.splitLines(gt)}fD(this,{from:gu,to:gu,text:gt});bT(this,eW(gu),Z)};ar.prototype=cj(fC.prototype,{constructor:ar,iter:function(gs,gr,gq){if(gq){this.iterN(gs-this.first,gr-gs,gq)}else{this.iterN(this.first,this.first+this.size,gs)}},insert:function(gr,gs){var gq=0;for(var gt=0;gt<gs.length;++gt){gq+=gs[gt].height}this.insertInner(gr-this.first,gs,gq)},remove:function(gq,gr){this.removeInner(gq-this.first,gr)},getValue:function(gr){var gq=a1(this,this.first,this.first+this.size);if(gr===false){return gq}return gq.join(gr||this.lineSeparator())},setValue:cC(function(gr){var gs=W(this.first,0),gq=this.first+this.size-1;bf(this,{from:gs,to:W(gq,fk(this,gq).text.length),text:this.splitLines(gr),origin:"setValue",full:true},true);bT(this,eW(gs))}),replaceRange:function(gr,gt,gs,gq){gt=fP(this,gt);gs=gs?fP(this,gs):gt;a0(this,gr,gt,gs,gq)},getRange:function(gt,gs,gr){var gq=gb(this,fP(this,gt),fP(this,gs));if(gr===false){return gq}return gq.join(gr||this.lineSeparator())},getLine:function(gr){var gq=this.getLineHandle(gr);return gq&&gq.text},getLineHandle:function(gq){if(b8(this,gq)){return fk(this,gq)}},getLineNumber:function(gq){return bM(gq)},getLineHandleVisualStart:function(gq){if(typeof gq=="number"){gq=fk(this,gq)}return x(gq)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(gq){return fP(this,gq)},getCursor:function(gs){var gq=this.sel.primary(),gr;if(gs==null||gs=="head"){gr=gq.head}else{if(gs=="anchor"){gr=gq.anchor}else{if(gs=="end"||gs=="to"||gs===false){gr=gq.to()}else{gr=gq.from()}}}return gr},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cC(function(gq,gs,gr){F(this,fP(this,typeof gq=="number"?W(gq,gs||0):gq),null,gr)}),setSelection:cC(function(gr,gs,gq){F(this,fP(this,gr),fP(this,gs||gr),gq)}),extendSelection:cC(function(gs,gq,gr){f3(this,fP(this,gs),gq&&fP(this,gq),gr)}),extendSelections:cC(function(gr,gq){av(this,d0(this,gr),gq)}),extendSelectionsBy:cC(function(gs,gq){var gr=bR(this.sel.ranges,gs);av(this,d0(this,gr),gq)}),setSelections:cC(function(gq,gu,gs){if(!gq.length){return}for(var gt=0,gr=[];gt<gq.length;gt++){gr[gt]=new dY(fP(this,gq[gt].anchor),fP(this,gq[gt].head))}if(gu==null){gu=Math.min(gq.length-1,this.sel.primIndex)}bT(this,cv(gr,gu),gs)}),addSelection:cC(function(gs,gt,gr){var gq=this.sel.ranges.slice(0);gq.push(new dY(fP(this,gs),fP(this,gt||gs)));bT(this,cv(gq,gq.length-1),gr)}),getSelection:function(gu){var gr=this.sel.ranges,gq;for(var gs=0;gs<gr.length;gs++){var gt=gb(this,gr[gs].from(),gr[gs].to());gq=gq?gq.concat(gt):gt}if(gu===false){return gq}else{return gq.join(gu||this.lineSeparator())}},getSelections:function(gu){var gt=[],gq=this.sel.ranges;for(var gr=0;gr<gq.length;gr++){var gs=gb(this,gq[gr].from(),gq[gr].to());if(gu!==false){gs=gs.join(gu||this.lineSeparator())}gt[gr]=gs}return gt},replaceSelection:function(gs,gu,gq){var gt=[];for(var gr=0;gr<this.sel.ranges.length;gr++){gt[gr]=gs}this.replaceSelections(gt,gu,gq||"+input")},replaceSelections:cC(function(gv,gx,gs){var gu=[],gw=this.sel;for(var gt=0;gt<gw.ranges.length;gt++){var gr=gw.ranges[gt];gu[gt]={from:gr.from(),to:gr.to(),text:this.splitLines(gv[gt]),origin:gs}}var gq=gx&&gx!="end"&&af(this,gu,gx);for(var gt=gu.length-1;gt>=0;gt--){bf(this,gu[gt])}if(gq){fc(this,gq)}else{if(this.cm){fK(this.cm)}}}),undo:cC(function(){b7(this,"undo")}),redo:cC(function(){b7(this,"redo")}),undoSelection:cC(function(){b7(this,"undo",true)}),redoSelection:cC(function(){b7(this,"redo",true)}),setExtending:function(gq){this.extend=gq},getExtending:function(){return this.extend},historySize:function(){var gt=this.history,gq=0,gs=0;for(var gr=0;gr<gt.done.length;gr++){if(!gt.done[gr].ranges){++gq}}for(var gr=0;gr<gt.undone.length;gr++){if(!gt.undone[gr].ranges){++gs}}return{undo:gq,redo:gs}},clearHistory:function(){this.history=new f0(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(gq){if(gq){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gq){return this.history.generation==(gq||this.cleanGeneration)},getHistory:function(){return{done:bO(this.history.done),undone:bO(this.history.undone)}},setHistory:function(gr){var gq=this.history=new f0(this.history.maxGeneration);gq.done=bO(gr.done.slice(0),null,true);gq.undone=bO(gr.undone.slice(0),null,true)},addLineClass:cC(function(gs,gr,gq){return eC(this,gs,gr=="gutter"?"gutter":"class",function(gt){var gu=gr=="text"?"textClass":gr=="background"?"bgClass":gr=="gutter"?"gutterClass":"wrapClass";if(!gt[gu]){gt[gu]=gq}else{if(S(gq).test(gt[gu])){return false}else{gt[gu]+=" "+gq}}return true})}),removeLineClass:cC(function(gs,gr,gq){return eC(this,gs,gr=="gutter"?"gutter":"class",function(gu){var gx=gr=="text"?"textClass":gr=="background"?"bgClass":gr=="gutter"?"gutterClass":"wrapClass";var gw=gu[gx];if(!gw){return false}else{if(gq==null){gu[gx]=null}else{var gv=gw.match(S(gq));if(!gv){return false}var gt=gv.index+gv[0].length;gu[gx]=gw.slice(0,gv.index)+(!gv.index||gt==gw.length?"":" ")+gw.slice(gt)||null}}return true})}),addLineWidget:cC(function(gs,gr,gq){return bG(this,gs,gr,gq)}),removeLineWidget:function(gq){gq.clear()},markText:function(gs,gr,gq){return eI(this,fP(this,gs),fP(this,gr),gq,gq&&gq.type||"range")},setBookmark:function(gs,gq){var gr={replacedWith:gq&&(gq.nodeType==null?gq.widget:gq),insertLeft:gq&&gq.insertLeft,clearWhenEmpty:false,shared:gq&&gq.shared,handleMouseEvents:gq&&gq.handleMouseEvents};gs=fP(this,gs);return eI(this,gs,gs,gr,"bookmark")},findMarksAt:function(gu){gu=fP(this,gu);var gt=[],gr=fk(this,gu.line).markedSpans;if(gr){for(var gq=0;gq<gr.length;++gq){var gs=gr[gq];if((gs.from==null||gs.from<=gu.ch)&&(gs.to==null||gs.to>=gu.ch)){gt.push(gs.marker.parent||gs.marker)}}}return gt},findMarks:function(gu,gt,gq){gu=fP(this,gu);gt=fP(this,gt);var gr=[],gs=gu.line;this.iter(gu.line,gt.line+1,function(gv){var gx=gv.markedSpans;if(gx){for(var gw=0;gw<gx.length;gw++){var gy=gx[gw];if(!(gy.to!=null&&gs==gu.line&&gu.ch>=gy.to||gy.from==null&&gs!=gu.line||gy.from!=null&&gs==gt.line&&gy.from>=gt.ch)&&(!gq||gq(gy.marker))){gr.push(gy.marker.parent||gy.marker)}}}++gs});return gr},getAllMarks:function(){var gq=[];this.iter(function(gs){var gr=gs.markedSpans;if(gr){for(var gt=0;gt<gr.length;++gt){if(gr[gt].from!=null){gq.push(gr[gt].marker)}}}});return gq},posFromIndex:function(gs){var gq,gt=this.first,gr=this.lineSeparator().length;this.iter(function(gu){var gv=gu.text.length+gr;if(gv>gs){gq=gs;return true}gs-=gv;++gt});return fP(this,W(gt,gq))},indexFromPos:function(gs){gs=fP(this,gs);var gq=gs.ch;if(gs.line<this.first||gs.ch<0){return 0}var gr=this.lineSeparator().length;this.iter(this.first,gs.line,function(gt){gq+=gt.text.length+gr});return gq},copy:function(gq){var gr=new ar(a1(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);gr.scrollTop=this.scrollTop;gr.scrollLeft=this.scrollLeft;gr.sel=this.sel;gr.extend=false;if(gq){gr.history.undoDepth=this.history.undoDepth;gr.setHistory(this.getHistory())}return gr},linkedDoc:function(gq){if(!gq){gq={}}var gt=this.first,gs=this.first+this.size;if(gq.from!=null&&gq.from>gt){gt=gq.from}if(gq.to!=null&&gq.to<gs){gs=gq.to}var gr=new ar(a1(this,gt,gs),gq.mode||this.modeOption,gt,this.lineSep);if(gq.sharedHist){gr.history=this.history}(this.linked||(this.linked=[])).push({doc:gr,sharedHist:gq.sharedHist});gr.linked=[{doc:this,isParent:true,sharedHist:gq.sharedHist}];dF(gr,eT(this));return gr},unlinkDoc:function(gr){if(gr instanceof H){gr=gr.doc}if(this.linked){for(var gs=0;gs<this.linked.length;++gs){var gt=this.linked[gs];if(gt.doc!=gr){continue}this.linked.splice(gs,1);gr.unlinkDoc(this);er(eT(this));break}}if(gr.history==this.history){var gq=[gr.id];d8(gr,function(gu){gq.push(gu.id)},true);gr.history=new f0(null);gr.history.done=bO(this.history.done,gq);gr.history.undone=bO(this.history.undone,gq)}},iterLinkedDocs:function(gq){d8(this,gq)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(gq){if(this.lineSep){return gq.split(this.lineSep)}return fY(gq)},lineSeparator:function(){return this.lineSep||"\n"}});ar.prototype.eachLine=ar.prototype.iter;var d="iter insert remove copy getEditor constructor".split(" ");for(var bJ in ar.prototype){if(ar.prototype.hasOwnProperty(bJ)&&dh(d,bJ)<0){H.prototype[bJ]=(function(gq){return function(){return gq.apply(this.doc,arguments)}})(ar.prototype[bJ])}}bx(ar);function d8(gt,gs,gr){function gq(gz,gx,gv){if(gz.linked){for(var gw=0;gw<gz.linked.length;++gw){var gu=gz.linked[gw];if(gu.doc==gx){continue}var gy=gv&&gu.sharedHist;if(gr&&!gy){continue}gs(gu.doc,gy);gq(gu.doc,gz,gy)}}}gq(gt,null,true)}function ed(gq,gr){if(gr.cm){throw new Error("This document is already in use.")}gq.doc=gr;gr.cm=gq;X(gq);bq(gq);if(!gq.options.lineWrapping){h(gq)}gq.options.mode=gr.modeOption;ah(gq)}function fk(gt,gv){gv-=gt.first;if(gv<0||gv>=gt.size){throw new Error("There is no line "+(gv+gt.first)+" in the document.")}for(var gq=gt;!gq.lines;){for(var gr=0;;++gr){var gu=gq.children[gr],gs=gu.chunkSize();if(gv<gs){gq=gu;break}gv-=gs}}return gq.lines[gv]}function gb(gs,gu,gq){var gr=[],gt=gu.line;gs.iter(gu.line,gq.line+1,function(gv){var gw=gv.text;if(gt==gq.line){gw=gw.slice(0,gq.ch)}if(gt==gu.line){gw=gw.slice(gu.ch)}gr.push(gw);++gt});return gr}function a1(gr,gt,gs){var gq=[];gr.iter(gt,gs,function(gu){gq.push(gu.text)});return gq}function gc(gr,gq){var gs=gq-gr.height;if(gs){for(var gt=gr;gt;gt=gt.parent){gt.height+=gs}}}function bM(gq){if(gq.parent==null){return null}var gu=gq.parent,gt=dh(gu.lines,gq);for(var gr=gu.parent;gr;gu=gr,gr=gr.parent){for(var gs=0;;++gs){if(gr.children[gs]==gu){break}gt+=gr.children[gs].chunkSize()}}return gt+gu.first}function bF(gs,gv){var gx=gs.first;outer:do{for(var gt=0;gt<gs.children.length;++gt){var gw=gs.children[gt],gu=gw.height;if(gv<gu){gs=gw;continue outer}gv-=gu;gx+=gw.chunkSize()}return gx}while(!gs.lines);for(var gt=0;gt<gs.lines.length;++gt){var gr=gs.lines[gt],gq=gr.height;if(gv<gq){break}gv-=gq}return gx+gt}function bL(gs){gs=x(gs);var gu=0,gr=gs.parent;for(var gt=0;gt<gr.lines.length;++gt){var gq=gr.lines[gt];if(gq==gs){break}else{gu+=gq.height}}for(var gv=gr.parent;gv;gr=gv,gv=gr.parent){for(var gt=0;gt<gv.children.length;++gt){var gw=gv.children[gt];if(gw==gr){break}else{gu+=gw.height}}}return gu}function a(gr){var gq=gr.order;if(gq==null){gq=gr.order=bg(gr.text)}return gq}function f0(gq){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=gq||1}function du(gq,gs){var gr={from:ch(gs.from),to:cW(gs),text:gb(gq,gs.from,gs.to)};bX(gq,gr,gs.from.line,gs.to.line+1);d8(gq,function(gt){bX(gt,gr,gs.from.line,gs.to.line+1)},true);return gr}function fG(gr){while(gr.length){var gq=fL(gr);if(gq.ranges){gr.pop()}else{break}}}function eQ(gr,gq){if(gq){fG(gr.done);return fL(gr.done)}else{if(gr.done.length&&!fL(gr.done).ranges){return fL(gr.done)}else{if(gr.done.length>1&&!gr.done[gr.done.length-2].ranges){gr.done.pop();return fL(gr.done)}}}}function fS(gw,gu,gq,gt){var gs=gw.history;gs.undone.length=0;var gr=+new Date,gx;if((gs.lastOp==gt||gs.lastOrigin==gu.origin&&gu.origin&&((gu.origin.charAt(0)=="+"&&gw.cm&&gs.lastModTime>gr-gw.cm.options.historyEventDelay)||gu.origin.charAt(0)=="*"))&&(gx=eQ(gs,gs.lastOp==gt))){var gy=fL(gx.changes);if(ce(gu.from,gu.to)==0&&ce(gu.from,gy.to)==0){gy.to=cW(gu)}else{gx.changes.push(du(gw,gu))}}else{var gv=fL(gs.done);if(!gv||!gv.ranges){cM(gw.sel,gs.done)}gx={changes:[du(gw,gu)],generation:gs.generation};gs.done.push(gx);while(gs.done.length>gs.undoDepth){gs.done.shift();if(!gs.done[0].ranges){gs.done.shift()}}}gs.done.push(gq);gs.generation=++gs.maxGeneration;gs.lastModTime=gs.lastSelTime=gr;gs.lastOp=gs.lastSelOp=gt;gs.lastOrigin=gs.lastSelOrigin=gu.origin;if(!gy){aD(gw,"historyAdded")}}function bz(gu,gq,gs,gt){var gr=gq.charAt(0);return gr=="*"||gr=="+"&&gs.ranges.length==gt.ranges.length&&gs.somethingSelected()==gt.somethingSelected()&&new Date-gu.history.lastSelTime<=(gu.cm?gu.cm.options.historyEventDelay:500)}function gi(gv,gt,gq,gs){var gu=gv.history,gr=gs&&gs.origin;if(gq==gu.lastSelOp||(gr&&gu.lastSelOrigin==gr&&(gu.lastModTime==gu.lastSelTime&&gu.lastOrigin==gr||bz(gv,gr,fL(gu.done),gt)))){gu.done[gu.done.length-1]=gt}else{cM(gt,gu.done)}gu.lastSelTime=+new Date;gu.lastSelOrigin=gr;gu.lastSelOp=gq;if(gs&&gs.clearRedo!==false){fG(gu.undone)}}function cM(gr,gq){var gs=fL(gq);if(!(gs&&gs.ranges&&gs.equals(gr))){gq.push(gr)}}function bX(gr,gv,gu,gt){var gq=gv["spans_"+gr.id],gs=0;gr.iter(Math.max(gr.first,gu),Math.min(gr.first+gr.size,gt),function(gw){if(gw.markedSpans){(gq||(gq=gv["spans_"+gr.id]={}))[gs]=gw.markedSpans}++gs})}function bk(gs){if(!gs){return null}for(var gr=0,gq;gr<gs.length;++gr){if(gs[gr].marker.explicitlyCleared){if(!gq){gq=gs.slice(0,gr)}}else{if(gq){gq.push(gs[gr])}}}return !gq?gs:gq.length?gq:null}function b3(gt,gu){var gs=gu["spans_"+gt.id];if(!gs){return null}for(var gr=0,gq=[];gr<gu.text.length;++gr){gq.push(bk(gs[gr]))}return gq}function bO(gB,gt,gA){for(var gw=0,gr=[];gw<gB.length;++gw){var gs=gB[gw];if(gs.ranges){gr.push(gA?ga.prototype.deepCopy.call(gs):gs);continue}var gy=gs.changes,gz=[];gr.push({changes:gz});for(var gv=0;gv<gy.length;++gv){var gx=gy[gv],gu;gz.push({from:gx.from,to:gx.to,text:gx.text});if(gt){for(var gq in gx){if(gu=gq.match(/^spans_(\d+)$/)){if(dh(gt,Number(gu[1]))>-1){fL(gz)[gq]=gx[gq];delete gx[gq]}}}}}}return gr}function I(gt,gs,gr,gq){if(gr<gt.line){gt.line+=gq}else{if(gs<gt.line){gt.line=gs;gt.ch=0}}}function fm(gt,gv,gw,gx){for(var gs=0;gs<gt.length;++gs){var gq=gt[gs],gu=true;if(gq.ranges){if(!gq.copied){gq=gt[gs]=gq.deepCopy();gq.copied=true}for(var gr=0;gr<gq.ranges.length;gr++){I(gq.ranges[gr].anchor,gv,gw,gx);I(gq.ranges[gr].head,gv,gw,gx)}continue}for(var gr=0;gr<gq.changes.length;++gr){var gy=gq.changes[gr];if(gw<gy.from.line){gy.from=W(gy.from.line+gx,gy.from.ch);gy.to=W(gy.to.line+gx,gy.to.ch)}else{if(gv<=gy.to.line){gu=false;break}}}if(!gu){gt.splice(0,gs+1);gs=0}}}function dE(gr,gu){var gt=gu.from.line,gs=gu.to.line,gq=gu.text.length-(gs-gt)-1;fm(gr.done,gt,gs,gq);fm(gr.undone,gt,gs,gq)}var cF=H.e_preventDefault=function(gq){if(gq.preventDefault){gq.preventDefault()}else{gq.returnValue=false}};var dq=H.e_stopPropagation=function(gq){if(gq.stopPropagation){gq.stopPropagation()}else{gq.cancelBubble=true}};function bK(gq){return gq.defaultPrevented!=null?gq.defaultPrevented:gq.returnValue==false}var eu=H.e_stop=function(gq){cF(gq);dq(gq)};function L(gq){return gq.target||gq.srcElement}function fT(gr){var gq=gr.which;if(gq==null){if(gr.button&1){gq=1}else{if(gr.button&2){gq=3}else{if(gr.button&4){gq=2}}}}if(b6&&gr.ctrlKey&&gq==1){gq=3}return gq}var bW=H.on=function(gt,gr,gs){if(gt.addEventListener){gt.addEventListener(gr,gs,false)}else{if(gt.attachEvent){gt.attachEvent("on"+gr,gs)}else{var gu=gt._handlers||(gt._handlers={});var gq=gu[gr]||(gu[gr]=[]);gq.push(gs)}}};var fa=[];function en(gs,gr,gt){var gq=gs._handlers&&gs._handlers[gr];if(gt){return gq&&gq.length>0?gq.slice():fa}else{return gq||fa}}var ef=H.off=function(gu,gs,gt){if(gu.removeEventListener){gu.removeEventListener(gs,gt,false)}else{if(gu.detachEvent){gu.detachEvent("on"+gs,gt)}else{var gq=en(gu,gs,false);for(var gr=0;gr<gq.length;++gr){if(gq[gr]==gt){gq.splice(gr,1);break}}}}};var aD=H.signal=function(gu,gt){var gq=en(gu,gt,true);if(!gq.length){return}var gr=Array.prototype.slice.call(arguments,2);for(var gs=0;gs<gq.length;++gs){gq[gs].apply(null,gr)}};var by=null;function ae(gw,gu){var gq=en(gw,gu,false);if(!gq.length){return}var gs=Array.prototype.slice.call(arguments,2),gv;if(bo){gv=bo.delayedCallbacks}else{if(by){gv=by}else{gv=by=[];setTimeout(aL,0)}}function gr(gx){return function(){gx.apply(null,gs)}}for(var gt=0;gt<gq.length;++gt){gv.push(gr(gq[gt]))}}function aL(){var gq=by;by=null;for(var gr=0;gr<gq.length;++gr){gq[gr]()}}function aQ(gq,gs,gr){if(typeof gs=="string"){gs={type:gs,preventDefault:function(){this.defaultPrevented=true}}}aD(gq,gr||gs.type,gq,gs);return bK(gs)||gs.codemirrorIgnore}function V(gr){var gq=gr._handlers&&gr._handlers.cursorActivity;if(!gq){return}var gt=gr.curOp.cursorActivityHandlers||(gr.curOp.cursorActivityHandlers=[]);for(var gs=0;gs<gq.length;++gs){if(dh(gt,gq[gs])==-1){gt.push(gq[gs])}}}function fn(gr,gq){return en(gr,gq).length>0}function bx(gq){gq.prototype.on=function(gr,gs){bW(this,gr,gs)};gq.prototype.off=function(gr,gs){ef(this,gr,gs)}}var dJ=30;var b9=H.Pass={toString:function(){return"CodeMirror.Pass"}};var Z={scroll:false},M={origin:"*mouse"},cV={origin:"+move"};function gp(){this.id=null}gp.prototype.set=function(gq,gr){clearTimeout(this.id);this.id=setTimeout(gr,gq)};var bS=H.countColumn=function(gt,gr,gv,gw,gs){if(gr==null){gr=gt.search(/[^\s\u00a0]/);if(gr==-1){gr=gt.length}}for(var gu=gw||0,gx=gs||0;;){var gq=gt.indexOf("\t",gu);if(gq<0||gq>=gr){return gx+(gr-gu)}gx+=gq-gu;gx+=gv-(gx%gv);gu=gq+1}};var et=H.findColumn=function(gu,gt,gv){for(var gw=0,gs=0;;){var gr=gu.indexOf("\t",gw);if(gr==-1){gr=gu.length}var gq=gr-gw;if(gr==gu.length||gs+gq>=gt){return gw+Math.min(gq,gt-gs)}gs+=gr-gw;gs+=gv-(gs%gv);gw=gr+1;if(gs>=gt){return gw}}};var aZ=[""];function co(gq){while(aZ.length<=gq){aZ.push(fL(aZ)+" ")}return aZ[gq]}function fL(gq){return gq[gq.length-1]}var dL=function(gq){gq.select()};if(e5){dL=function(gq){gq.selectionStart=0;gq.selectionEnd=gq.value.length}}else{if(dK){dL=function(gr){try{gr.select()}catch(gq){}}}}function dh(gs,gq){for(var gr=0;gr<gs.length;++gr){if(gs[gr]==gq){return gr}}return -1}function bR(gt,gs){var gq=[];for(var gr=0;gr<gt.length;gr++){gq[gr]=gs(gt[gr],gr)}return gq}function f1(){}function cj(gs,gq){var gr;if(Object.create){gr=Object.create(gs)}else{f1.prototype=gs;gr=new f1()}if(gq){aM(gq,gr)}return gr}function aM(gs,gr,gq){if(!gr){gr={}}for(var gt in gs){if(gs.hasOwnProperty(gt)&&(gq!==false||!gr.hasOwnProperty(gt))){gr[gt]=gs[gt]}}return gr}function cu(gr){var gq=Array.prototype.slice.call(arguments,1);return function(){return gr.apply(null,gq)}}var bb=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fI=H.isWordChar=function(gq){return/\w/.test(gq)||gq>"\x80"&&(gq.toUpperCase()!=gq.toLowerCase()||bb.test(gq))};function cz(gq,gr){if(!gr){return fI(gq)}if(gr.source.indexOf("\\w")>-1&&fI(gq)){return true}return gr.test(gq)}function eY(gq){for(var gr in gq){if(gq.hasOwnProperty(gr)&&gq[gr]){return false}}return true}var eN=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fu(gq){return gq.charCodeAt(0)>=768&&eN.test(gq)}function f9(gq,gu,gt,gs){var gv=document.createElement(gq);if(gt){gv.className=gt}if(gs){gv.style.cssText=gs}if(typeof gu=="string"){gv.appendChild(document.createTextNode(gu))}else{if(gu){for(var gr=0;gr<gu.length;++gr){gv.appendChild(gu[gr])}}}return gv}var ck;if(document.createRange){ck=function(gt,gu,gr,gq){var gs=document.createRange();gs.setEnd(gq||gt,gr);gs.setStart(gt,gu);return gs}}else{ck=function(gs,gu,gq){var gr=document.body.createTextRange();try{gr.moveToElementText(gs.parentNode)}catch(gt){return gr}gr.collapse(true);gr.moveEnd("character",gq);gr.moveStart("character",gu);return gr}}function d2(gr){for(var gq=gr.childNodes.length;gq>0;--gq){gr.removeChild(gr.firstChild)}return gr}function bQ(gq,gr){return d2(gq).appendChild(gr)}var gh=H.contains=function(gq,gr){if(gr.nodeType==3){gr=gr.parentNode}if(gq.contains){return gq.contains(gr)}do{if(gr.nodeType==11){gr=gr.host}if(gr==gq){return true}}while(gr=gr.parentNode)};function dO(){var gq=document.activeElement;while(gq&&gq.root&&gq.root.activeElement){gq=gq.root.activeElement}return gq}if(dK&&k<11){dO=function(){try{return document.activeElement}catch(gq){return document.body}}}function S(gq){return new RegExp("(^|\\s)"+gq+"(?:$|\\s)\\s*")}var f=H.rmClass=function(gs,gq){var gt=gs.className;var gr=S(gq).exec(gt);if(gr){var gu=gt.slice(gr.index+gr[0].length);gs.className=gt.slice(0,gr.index)+(gu?gr[1]+gu:"")}};var fF=H.addClass=function(gr,gq){var gs=gr.className;if(!S(gq).test(gs)){gr.className+=(gs?" ":"")+gq}};function fZ(gs,gq){var gr=gs.split(" ");for(var gt=0;gt<gr.length;gt++){if(gr[gt]&&!S(gr[gt]).test(gq)){gq+=" "+gr[gt]}}return gq}function az(gt){if(!document.body.getElementsByClassName){return}var gs=document.body.getElementsByClassName("CodeMirror");for(var gr=0;gr<gs.length;gr++){var gq=gs[gr].CodeMirror;if(gq){gt(gq)}}}var cB=false;function bi(){if(cB){return}fJ();cB=true}function fJ(){var gq;bW(window,"resize",function(){if(gq==null){gq=setTimeout(function(){gq=null;az(aS)},100)}});bW(window,"blur",function(){az(aU)})}var eP=function(){if(dK&&k<9){return false}var gq=f9("div");return"draggable" in gq||"dragDrop" in gq}();var fR;function bm(gq){if(fR==null){var gs=f9("span","\u200b");bQ(gq,f9("span",[gs,document.createTextNode("x")]));if(gq.firstChild.offsetHeight!=0){fR=gs.offsetWidth<=1&&gs.offsetHeight>2&&!(dK&&k<8)}}var gr=fR?f9("span","\u200b"):f9("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gr.setAttribute("cm-text","");return gr}var fQ;function bN(gt){if(fQ!=null){return fQ}var gq=bQ(gt,document.createTextNode("A\u062eA"));var gs=ck(gq,0,1).getBoundingClientRect();if(!gs||gs.left==gs.right){return false}var gr=ck(gq,1,2).getBoundingClientRect();return fQ=(gr.right-gs.right<3)}var fY=H.splitLines="\n\nb".split(/\n/).length!=3?function(gv){var gw=0,gq=[],gu=gv.length;while(gw<=gu){var gt=gv.indexOf("\n",gw);if(gt==-1){gt=gv.length}var gs=gv.slice(gw,gv.charAt(gt-1)=="\r"?gt-1:gt);var gr=gs.indexOf("\r");if(gr!=-1){gq.push(gs.slice(0,gr));gw+=gr+1}else{gq.push(gs);gw=gt+1}}return gq}:function(gq){return gq.split(/\r\n?|\n/)};var br=window.getSelection?function(gr){try{return gr.selectionStart!=gr.selectionEnd}catch(gq){return false}}:function(gs){try{var gq=gs.ownerDocument.selection.createRange()}catch(gr){}if(!gq||gq.parentElement()!=gs){return false}return gq.compareEndPoints("StartToEnd",gq)!=0};var c9=(function(){var gq=f9("div");if("oncopy" in gq){return true}gq.setAttribute("oncopy","return;");return typeof gq.oncopy=="function"})();var fb=null;function aJ(gr){if(fb!=null){return fb}var gs=bQ(gr,f9("span","x"));var gt=gs.getBoundingClientRect();var gq=ck(gs,0,1).getBoundingClientRect();return fb=Math.abs(gt.left-gq.left)>1}var fl=H.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var gq=0;gq<10;gq++){fl[gq+48]=fl[gq+96]=String(gq)}for(var gq=65;gq<=90;gq++){fl[gq]=String.fromCharCode(gq)}for(var gq=1;gq<=12;gq++){fl[gq+111]=fl[gq+63235]="F"+gq}})();function d5(gq,gw,gv,gu){if(!gq){return gu(gw,gv,"ltr")}var gt=false;for(var gs=0;gs<gq.length;++gs){var gr=gq[gs];if(gr.from<gv&&gr.to>gw||gw==gv&&gr.to==gw){gu(Math.max(gr.from,gw),Math.min(gr.to,gv),gr.level==1?"rtl":"ltr");gt=true}}if(!gt){gu(gw,gv,"ltr")}}function dy(gq){return gq.level%2?gq.to:gq.from}function gk(gq){return gq.level%2?gq.from:gq.to}function cD(gr){var gq=a(gr);return gq?dy(gq[0]):0}function cR(gr){var gq=a(gr);if(!gq){return gr.text.length}return gk(fL(gq))}function bs(gr,gu){var gs=fk(gr.doc,gu);var gv=x(gs);if(gv!=gs){gu=bM(gv)}var gq=a(gv);var gt=!gq?0:gq[0].level%2?cR(gv):cD(gv);return W(gu,gt)}function dP(gs,gv){var gr,gt=fk(gs.doc,gv);while(gr=ex(gt)){gt=gr.find(1,true).line;gv=null}var gq=a(gt);var gu=!gq?gt.text.length:gq[0].level%2?cD(gt):cR(gt);return W(gv==null?bM(gt):gv,gu)}function dI(gr,gw){var gv=bs(gr,gw.line);var gs=fk(gr.doc,gv.line);var gq=a(gs);if(!gq||gq[0].level==0){var gu=Math.max(0,gs.text.search(/\S/));var gt=gw.line==gv.line&&gw.ch<=gu&&gw.ch;return W(gv.line,gt?0:gu)}return gv}function am(gr,gs,gq){var gt=gr[0].level;if(gs==gt){return true}if(gq==gt){return false}return gs<gq}var e6;function aF(gq,gu){e6=null;for(var gr=0,gs;gr<gq.length;++gr){var gt=gq[gr];if(gt.from<gu&&gt.to>gu){return gr}if((gt.from==gu||gt.to==gu)){if(gs==null){gs=gr}else{if(am(gq,gt.level,gq[gs].level)){if(gt.from!=gt.to){e6=gs}return gr}else{if(gt.from!=gt.to){e6=gr}return gs}}}}return gs}function fj(gq,gt,gr,gs){if(!gs){return gt+gr}do{gt+=gr}while(gt>0&&fu(gq.text.charAt(gt)));return gt}function u(gq,gx,gs,gt){var gu=a(gq);if(!gu){return ai(gq,gx,gs,gt)}var gw=aF(gu,gx),gr=gu[gw];var gv=fj(gq,gx,gr.level%2?-gs:gs,gt);for(;;){if(gv>gr.from&&gv<gr.to){return gv}if(gv==gr.from||gv==gr.to){if(aF(gu,gv)==gw){return gv}gr=gu[gw+=gs];return(gs>0)==gr.level%2?gr.to:gr.from}else{gr=gu[gw+=gs];if(!gr){return null}if((gs>0)==gr.level%2){gv=fj(gq,gr.to,-1,gt)}else{gv=fj(gq,gr.from,1,gt)}}}}function ai(gq,gu,gr,gs){var gt=gu+gr;if(gs){while(gt>0&&fu(gq.text.charAt(gt))){gt+=gr}}return gt<0||gt>gq.text.length?null:gt}var bg=(function(){var gw="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gu="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function gt(gA){if(gA<=247){return gw.charAt(gA)}else{if(1424<=gA&&gA<=1524){return"R"}else{if(1536<=gA&&gA<=1773){return gu.charAt(gA-1536)}else{if(1774<=gA&&gA<=2220){return"r"}else{if(8192<=gA&&gA<=8203){return"w"}else{if(gA==8204){return"b"}else{return"L"}}}}}}}var gq=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gz=/[stwN]/,gs=/[LRr]/,gr=/[Lb1n]/,gv=/[1n]/;var gy="L";function gx(gC,gB,gA){this.level=gC;this.from=gB;this.to=gA}return function(gK){if(!gq.test(gK)){return false}var gQ=gK.length,gG=[];for(var gP=0,gC;gP<gQ;++gP){gG.push(gC=gt(gK.charCodeAt(gP)))}for(var gP=0,gJ=gy;gP<gQ;++gP){var gC=gG[gP];if(gC=="m"){gG[gP]=gJ}else{gJ=gC}}for(var gP=0,gA=gy;gP<gQ;++gP){var gC=gG[gP];if(gC=="1"&&gA=="r"){gG[gP]="n"}else{if(gs.test(gC)){gA=gC;if(gC=="r"){gG[gP]="R"}}}}for(var gP=1,gJ=gG[0];gP<gQ-1;++gP){var gC=gG[gP];if(gC=="+"&&gJ=="1"&&gG[gP+1]=="1"){gG[gP]="1"}else{if(gC==","&&gJ==gG[gP+1]&&(gJ=="1"||gJ=="n")){gG[gP]=gJ}}gJ=gC}for(var gP=0;gP<gQ;++gP){var gC=gG[gP];if(gC==","){gG[gP]="N"}else{if(gC=="%"){for(var gD=gP+1;gD<gQ&&gG[gD]=="%";++gD){}var gR=(gP&&gG[gP-1]=="!")||(gD<gQ&&gG[gD]=="1")?"1":"N";for(var gN=gP;gN<gD;++gN){gG[gN]=gR}gP=gD-1}}}for(var gP=0,gA=gy;gP<gQ;++gP){var gC=gG[gP];if(gA=="L"&&gC=="1"){gG[gP]="L"}else{if(gs.test(gC)){gA=gC}}}for(var gP=0;gP<gQ;++gP){if(gz.test(gG[gP])){for(var gD=gP+1;gD<gQ&&gz.test(gG[gD]);++gD){}var gH=(gP?gG[gP-1]:gy)=="L";var gB=(gD<gQ?gG[gD]:gy)=="L";var gR=gH||gB?"L":"R";for(var gN=gP;gN<gD;++gN){gG[gN]=gR}gP=gD-1}}var gO=[],gL;for(var gP=0;gP<gQ;){if(gr.test(gG[gP])){var gE=gP;for(++gP;gP<gQ&&gr.test(gG[gP]);++gP){}gO.push(new gx(0,gE,gP))}else{var gF=gP,gI=gO.length;for(++gP;gP<gQ&&gG[gP]!="L";++gP){}for(var gN=gF;gN<gP;){if(gv.test(gG[gN])){if(gF<gN){gO.splice(gI,0,new gx(1,gF,gN))}var gM=gN;for(++gN;gN<gP&&gv.test(gG[gN]);++gN){}gO.splice(gI,0,new gx(2,gM,gN));gF=gN}else{++gN}}if(gF<gP){gO.splice(gI,0,new gx(1,gF,gP))}}}if(gO[0].level==1&&(gL=gK.match(/^\s+/))){gO[0].from=gL[0].length;gO.unshift(new gx(0,0,gL[0].length))}if(fL(gO).level==1&&(gL=gK.match(/\s+$/))){fL(gO).to-=gL[0].length;gO.push(new gx(0,gQ-gL[0].length,gQ))}if(gO[0].level==2){gO.unshift(new gx(1,gO[0].to,gO[0].to))}if(gO[0].level!=fL(gO).level){gO.push(new gx(gO[0].level,gQ,gQ))}return gO}})();H.version="5.14.0";return H});